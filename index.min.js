/**
 * @license AngularJS v1.0.6
 * (c) 2010-2012 Google, Inc. http://angularjs.org
 * License: MIT
 */

/**
  * Klass.js - copyright @dedfat
  * version 1.0
  * https://github.com/ded/klass
  * Follow our software http://twitter.com/dedfat :)
  * MIT License
  */

// Copyright (c) 2011 by Code Computerlove (http://www.codecomputerlove.com)

// Licensed under the MIT license

(function(t,e,n){function i(t){return t&&"number"==typeof t.length?"function"!=typeof t.hasOwnProperty&&"function"!=typeof t.constructor?!0:t instanceof oe||Zn&&t instanceof Zn||"[object Object]"!==Kn.call(t)||"function"==typeof t.callee:!1}function o(t,e,n){var s;if(t)if(b(t))for(s in t)"prototype"!=s&&"length"!=s&&"name"!=s&&t.hasOwnProperty(s)&&e.call(n,t[s],s);else if(t.forEach&&t.forEach!==o)t.forEach(e,n);else if(i(t))for(s=0;t.length>s;s++)e.call(n,t[s],s);else for(s in t)t.hasOwnProperty(s)&&e.call(n,t[s],s);return t}function s(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e.sort()}function r(t,e,n){for(var i=s(t),o=0;i.length>o;o++)e.call(n,t[i[o]],i[o]);return i}function a(t){return function(e,n){t(n,e)}}function l(){for(var t,e=ei.length;e;){if(e--,t=ei[e].charCodeAt(0),57==t)return ei[e]="A",ei.join("");if(90!=t)return ei[e]=String.fromCharCode(t+1),ei.join("");ei[e]="0"}return ei.unshift("0"),ei.join("")}function u(t){return o(arguments,function(e){e!==t&&o(e,function(e,n){t[n]=e})}),t}function c(t){return parseInt(t,10)}function h(t,e){return u(new(u(function(){},{prototype:t})),e)}function d(){}function p(t){return t}function f(t){return function(){return t}}function g(t){return t===n}function m(t){return t!==n}function v(t){return null!=t&&"object"==typeof t}function y(t){return"string"==typeof t}function w(t){return"number"==typeof t}function $(t){return"[object Date]"==Kn.apply(t)}function E(t){return"[object Array]"==Kn.apply(t)}function b(t){return"function"==typeof t}function T(t){return t&&t.document&&t.location&&t.alert&&t.setInterval}function S(t){return t&&t.$evalAsync&&t.$watch}function C(t){return"[object File]"===Kn.apply(t)}function O(t){return y(t)?t.replace(/^\s*/,"").replace(/\s*$/,""):t}function M(t){return t&&(t.nodeName||t.bind&&t.find)}function D(t,e,n){var i=[];return o(t,function(t,o,s){i.push(e.call(n,t,o,s))}),i}function x(t,e){return-1!=P(t,e)}function P(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0;t.length>n;n++)if(e===t[n])return n;return-1}function k(t,e){var n=P(t,e);return n>=0&&t.splice(n,1),e}function H(t,e){if(T(t)||S(t))throw Error("Can't copy Window or Scope");if(e){if(t===e)throw Error("Can't copy equivalent objects or arrays");if(E(t)){e.length=0;for(var n=0;t.length>n;n++)e.push(H(t[n]))}else{o(e,function(t,n){delete e[n]});for(var i in t)e[i]=H(t[i])}}else e=t,t&&(E(t)?e=H(t,[]):$(t)?e=new Date(t.getTime()):v(t)&&(e=H(t,{})));return e}function A(t,e){e=e||{};for(var n in t)t.hasOwnProperty(n)&&"$$"!==n.substr(0,2)&&(e[n]=t[n]);return e}function I(t,e){if(t===e)return!0;if(null===t||null===e)return!1;if(t!==t&&e!==e)return!0;var i,o,s,r=typeof t,a=typeof e;if(r==a&&"object"==r){if(!E(t)){if($(t))return $(e)&&t.getTime()==e.getTime();if(S(t)||S(e)||T(t)||T(e))return!1;s={};for(o in t)if("$"!==o.charAt(0)&&!b(t[o])){if(!I(t[o],e[o]))return!1;s[o]=!0}for(o in e)if(!s[o]&&"$"!==o.charAt(0)&&e[o]!==n&&!b(e[o]))return!1;return!0}if((i=t.length)==e.length){for(o=0;i>o;o++)if(!I(t[o],e[o]))return!1;return!0}}return!1}function _(t,e,n){return t.concat(Yn.call(e,n))}function N(t,e){return Yn.call(t,e||0)}function B(t,e){var n=arguments.length>2?N(arguments,2):[];return!b(e)||e instanceof RegExp?e:n.length?function(){return arguments.length?e.apply(t,n.concat(Yn.call(arguments,0))):e.apply(t,n)}:function(){return arguments.length?e.apply(t,arguments):e.call(t)}}function R(t,i){var o=i;return/^\$+/.test(t)?o=n:T(i)?o="$WINDOW":i&&e===i?o="$DOCUMENT":S(i)&&(o="$SCOPE"),o}function L(t,e){return JSON.stringify(t,R,e?"  ":null)}function j(t){return y(t)?JSON.parse(t):t}function U(t){if(t&&0!==t.length){var e=qn(""+t);t=!("f"==e||"0"==e||"false"==e||"no"==e||"n"==e||"[]"==e)}else t=!1;return t}function q(t){t=zn(t).clone();try{t.html("")}catch(e){}var n=3,i=zn("<div>").append(t).html();try{return t[0].nodeType===n?qn(i):i.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(t,e){return"<"+qn(e)})}catch(e){return qn(i)}}function V(t){var e,n,i={};return o((t||"").split("&"),function(t){t&&(e=t.split("="),n=decodeURIComponent(e[0]),i[n]=m(e[1])?decodeURIComponent(e[1]):!0)}),i}function F(t){var e=[];return o(t,function(t,n){e.push(z(n,!0)+(t===!0?"":"="+z(t,!0)))}),e.length?e.join("&"):""}function W(t){return z(t,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function z(t,e){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,e?"%20":"+")}function Z(t,n){function i(t){t&&a.push(t)}var s,r,a=[t],l=["ng:app","ng-app","x-ng-app","data-ng-app"],u=/\sng[:\-]app(:\s*([\w\d_]+);?)?\s/;o(l,function(n){l[n]=!0,i(e.getElementById(n)),n=n.replace(":","\\:"),t.querySelectorAll&&(o(t.querySelectorAll("."+n),i),o(t.querySelectorAll("."+n+"\\:"),i),o(t.querySelectorAll("["+n+"]"),i))}),o(a,function(t){if(!s){var e=" "+t.className+" ",n=u.exec(e);n?(s=t,r=(n[2]||"").replace(/\s+/g,",")):o(t.attributes,function(e){!s&&l[e.name]&&(s=t,r=e.value)})}}),s&&n(s,r?[r]:[])}function G(e,i){var s=function(){e=zn(e),i=i||[],i.unshift(["$provide",function(t){t.value("$rootElement",e)}]),i.unshift("ng");var t=Te(i);return t.invoke(["$rootScope","$rootElement","$compile","$injector",function(t,e,n,i){t.$apply(function(){e.data("$injector",i),n(e)(t)})}]),t},r=/^NG_DEFER_BOOTSTRAP!/;return t&&!r.test(t.name)?s():(t.name=t.name.replace(r,""),ti.resumeBootstrap=function(t){o(t,function(t){i.push(t)}),s()},n)}function X(t,e){return e=e||"_",t.replace(ni,function(t,n){return(n?e:"")+t.toLowerCase()})}function Q(){Zn=t.jQuery,Zn?(zn=Zn,u(Zn.fn,{scope:hi.scope,controller:hi.controller,injector:hi.injector,inheritedData:hi.inheritedData}),ie("remove",!0),ie("empty"),ie("html")):zn=oe,ti.element=zn}function Y(t,e,n){if(!t)throw Error("Argument '"+(e||"?")+"' is "+(n||"required"));return t}function J(t,e,n){return n&&E(t)&&(t=t[t.length-1]),Y(b(t),e,"not a function, got "+(t&&"object"==typeof t?t.constructor.name||"Object":typeof t)),t}function K(t){function e(t,e,n){return t[e]||(t[e]=n())}return e(e(t,"angular",Object),"module",function(){var t={};return function(n,i,o){return i&&t.hasOwnProperty(n)&&(t[n]=null),e(t,n,function(){function t(t,n,i){return function(){return e[i||"push"]([t,n,arguments]),a}}if(!i)throw Error("No module: "+n);var e=[],s=[],r=t("$injector","invoke"),a={_invokeQueue:e,_runBlocks:s,requires:i,name:n,provider:t("$provide","provider"),factory:t("$provide","factory"),service:t("$provide","service"),value:t("$provide","value"),constant:t("$provide","constant","unshift"),filter:t("$filterProvider","register"),controller:t("$controllerProvider","register"),directive:t("$compileProvider","directive"),config:r,run:function(t){return s.push(t),this}};return o&&r(o),a})}})}function te(e){u(e,{bootstrap:G,copy:H,extend:u,equals:I,element:zn,forEach:o,injector:Te,noop:d,bind:B,toJson:L,fromJson:j,identity:p,isUndefined:g,isDefined:m,isString:y,isFunction:b,isObject:v,isNumber:w,isElement:M,isArray:E,version:ii,isDate:$,lowercase:qn,uppercase:Vn,callbacks:{counter:0}}),Gn=K(t);try{Gn("ngLocale")}catch(n){Gn("ngLocale",[]).provider("$locale",mn)}Gn("ng",["ngLocale"],["$provide",function(t){t.provider("$compile",xe).directive({a:_i,input:Wi,textarea:Wi,form:Li,script:Do,select:Po,style:Ho,option:ko,ngBind:io,ngBindHtmlUnsafe:so,ngBindTemplate:oo,ngClass:ro,ngClassEven:lo,ngClassOdd:ao,ngCsp:ho,ngCloak:uo,ngController:co,ngForm:ji,ngHide:Eo,ngInclude:go,ngInit:mo,ngNonBindable:vo,ngPluralize:yo,ngRepeat:wo,ngShow:$o,ngSubmit:fo,ngStyle:bo,ngSwitch:To,ngSwitchWhen:So,ngSwitchDefault:Co,ngOptions:xo,ngView:Mo,ngTransclude:Oo,ngModel:Yi,ngList:to,ngChange:Ji,required:Ki,ngRequired:Ki,ngValue:no}).directive(Ni).directive(po),t.provider({$anchorScroll:Se,$browser:Oe,$cacheFactory:Me,$controller:ke,$document:He,$exceptionHandler:Ae,$filter:yn,$interpolate:Ie,$http:pn,$httpBackend:fn,$location:ze,$log:Ze,$parse:tn,$route:on,$routeParams:sn,$rootScope:rn,$q:en,$sniffer:an,$templateCache:De,$timeout:vn,$window:ln})}])}function ee(){return++ri}function ne(t){return t.replace(ui,function(t,e,n,i){return i?n.toUpperCase():n}).replace(ci,"Moz$1")}function ie(t,e){function n(){for(var t,n,o,s,r,a,l,u=[this],c=e;u.length;)for(t=u.shift(),n=0,o=t.length;o>n;n++)for(s=zn(t[n]),c?s.triggerHandler("$destroy"):c=!c,r=0,a=(l=s.children()).length;a>r;r++)u.push(Zn(l[r]));return i.apply(this,arguments)}var i=Zn.fn[t];i=i.$original||i,n.$original=i,Zn.fn[t]=n}function oe(t){if(t instanceof oe)return t;if(!(this instanceof oe)){if(y(t)&&"<"!=t.charAt(0))throw Error("selectors not implemented");return new oe(t)}if(y(t)){var n=e.createElement("div");n.innerHTML="<div>&#160;</div>"+t,n.removeChild(n.firstChild),fe(this,n.childNodes),this.remove()}else fe(this,t)}function se(t){return t.cloneNode(!0)}function re(t){le(t);for(var e=0,n=t.childNodes||[];n.length>e;e++)re(n[e])}function ae(t,e,n){var i=ue(t,"events"),s=ue(t,"handle");s&&(g(e)?o(i,function(e,n){li(t,n,e),delete i[n]}):g(n)?(li(t,e,i[e]),delete i[e]):k(i[e],n))}function le(t){var e=t[si],i=oi[e];i&&(i.handle&&(i.events.$destroy&&i.handle({},"$destroy"),ae(t)),delete oi[e],t[si]=n)}function ue(t,e,i){var o=t[si],s=oi[o||-1];return m(i)?(s||(t[si]=o=ee(),s=oi[o]={}),s[e]=i,n):s&&s[e]}function ce(t,e,n){var i=ue(t,"data"),o=m(n),s=!o&&m(e),r=s&&!v(e);if(i||r||ue(t,"data",i={}),o)i[e]=n;else{if(!s)return i;if(r)return i&&i[e];u(i,e)}}function he(t,e){return(" "+t.className+" ").replace(/[\n\t]/g," ").indexOf(" "+e+" ")>-1}function de(t,e){e&&o(e.split(" "),function(e){t.className=O((" "+t.className+" ").replace(/[\n\t]/g," ").replace(" "+O(e)+" "," "))})}function pe(t,e){e&&o(e.split(" "),function(e){he(t,e)||(t.className=O(t.className+" "+O(e)))})}function fe(t,e){if(e){e=e.nodeName||!m(e.length)||T(e)?[e]:e;for(var n=0;e.length>n;n++)t.push(e[n])}}function ge(t,e){return me(t,"$"+(e||"ngController")+"Controller")}function me(t,e,n){for(t=zn(t),9==t[0].nodeType&&(t=t.find("html"));t.length;){if(n=t.data(e))return n;t=t.parent()}}function ve(t,e){var n=di[e.toLowerCase()];return n&&pi[t.nodeName]&&n}function ye(t,n){var i=function(i,s){if(i.preventDefault||(i.preventDefault=function(){i.returnValue=!1}),i.stopPropagation||(i.stopPropagation=function(){i.cancelBubble=!0}),i.target||(i.target=i.srcElement||e),g(i.defaultPrevented)){var r=i.preventDefault;i.preventDefault=function(){i.defaultPrevented=!0,r.call(i)},i.defaultPrevented=!1}i.isDefaultPrevented=function(){return i.defaultPrevented},o(n[s||i.type],function(e){e.call(t,i)}),8>=Qn?(i.preventDefault=null,i.stopPropagation=null,i.isDefaultPrevented=null):(delete i.preventDefault,delete i.stopPropagation,delete i.isDefaultPrevented)};return i.elem=t,i}function we(t){var e,i=typeof t;return"object"==i&&null!==t?"function"==typeof(e=t.$$hashKey)?e=t.$$hashKey():e===n&&(e=t.$$hashKey=l()):e=t,i+":"+e}function $e(t){o(t,this.put,this)}function Ee(){}function be(t){var e,n,i,s;return"function"==typeof t?(e=t.$inject)||(e=[],n=(""+t).replace(yi,""),i=n.match(gi),o(i[1].split(mi),function(t){t.replace(vi,function(t,n,i){e.push(i)})}),t.$inject=e):E(t)?(s=t.length-1,J(t[s],"fn"),e=t.slice(0,s)):J(t,"fn",!0),e}function Te(t){function e(t){return function(e,i){return v(e)?(o(e,a(t)),n):t(e,i)}}function i(t,e){if((b(e)||E(e))&&(e=S.instantiate(e)),!e.$get)throw Error("Provider "+t+" must define $get factory method.");return T[t+m]=e}function s(t,e){return i(t,{$get:e})}function r(t,e){return s(t,["$injector",function(t){return t.instantiate(e)}])}function l(t,e){return s(t,f(e))}function u(t,e){T[t]=e,C[t]=e}function c(t,e){var n=S.get(t+m),i=n.$get;n.$get=function(){var t=O.invoke(i,n);return O.invoke(e,null,{$delegate:t})}}function h(t){var e=[];return o(t,function(t){if(!$.get(t))if($.put(t,!0),y(t)){var n=Gn(t);e=e.concat(h(n.requires)).concat(n._runBlocks);try{for(var i=n._invokeQueue,o=0,s=i.length;s>o;o++){var r=i[o],a="$injector"==r[0]?S:S.get(r[0]);a[r[1]].apply(a,r[2])}}catch(l){throw l.message&&(l.message+=" from "+t),l}}else if(b(t))try{e.push(S.invoke(t))}catch(l){throw l.message&&(l.message+=" from "+t),l}else if(E(t))try{e.push(S.invoke(t))}catch(l){throw l.message&&(l.message+=" from "+(t[t.length-1]+"")),l}else J(t,"module")}),e}function p(t,e){function n(n){if("string"!=typeof n)throw Error("Service name expected");if(t.hasOwnProperty(n)){if(t[n]===g)throw Error("Circular dependency: "+w.join(" <- "));return t[n]}try{return w.unshift(n),t[n]=g,t[n]=e(n)}finally{w.shift()}}function i(t,e,i){var o,s,r,a=[],l=be(t);for(s=0,o=l.length;o>s;s++)r=l[s],a.push(i&&i.hasOwnProperty(r)?i[r]:n(r));switch(t.$inject||(t=t[o]),e?-1:a.length){case 0:return t();case 1:return t(a[0]);case 2:return t(a[0],a[1]);case 3:return t(a[0],a[1],a[2]);case 4:return t(a[0],a[1],a[2],a[3]);case 5:return t(a[0],a[1],a[2],a[3],a[4]);case 6:return t(a[0],a[1],a[2],a[3],a[4],a[5]);case 7:return t(a[0],a[1],a[2],a[3],a[4],a[5],a[6]);case 8:return t(a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7]);case 9:return t(a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8]);case 10:return t(a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9]);default:return t.apply(e,a)}}function o(t,e){var n,o,s=function(){};return s.prototype=(E(t)?t[t.length-1]:t).prototype,n=new s,o=i(t,n,e),v(o)?o:n}return{invoke:i,instantiate:o,get:n,annotate:be}}var g={},m="Provider",w=[],$=new $e,T={$provide:{provider:e(i),factory:e(s),service:e(r),value:e(l),constant:e(u),decorator:c}},S=p(T,function(){throw Error("Unknown provider: "+w.join(" <- "))}),C={},O=C.$injector=p(C,function(t){var e=S.get(t+m);return O.invoke(e.$get,e)});return o(h(t),function(t){O.invoke(t||d)}),O}function Se(){var t=!0;this.disableAutoScrolling=function(){t=!1},this.$get=["$window","$location","$rootScope",function(e,n,i){function s(t){var e=null;return o(t,function(t){e||"a"!==qn(t.nodeName)||(e=t)}),e}function r(){var t,i=n.hash();i?(t=a.getElementById(i))?t.scrollIntoView():(t=s(a.getElementsByName(i)))?t.scrollIntoView():"top"===i&&e.scrollTo(0,0):e.scrollTo(0,0)}var a=e.document;return t&&i.$watch(function(){return n.hash()},function(){i.$evalAsync(r)}),r}]}function Ce(t,e,i,s){function r(t){try{t.apply(null,N(arguments,1))}finally{if(w--,0===w)for(;$.length;)try{$.pop()()}catch(e){i.error(e)}}}function a(t,e){(function n(){o(b,function(t){t()}),E=e(n,t)})()}function l(){T!=u.url()&&(T=u.url(),o(C,function(t){t(u.url())}))}var u=this,c=e[0],h=t.location,p=t.history,f=t.setTimeout,m=t.clearTimeout,v={};u.isMock=!1;var w=0,$=[];u.$$completeOutstandingRequest=r,u.$$incOutstandingRequestCount=function(){w++},u.notifyWhenNoOutstandingRequests=function(t){o(b,function(t){t()}),0===w?t():$.push(t)};var E,b=[];u.addPollFn=function(t){return g(E)&&a(100,f),b.push(t),t};var T=h.href,S=e.find("base");u.url=function(t,e){if(t){if(T==t)return;return T=t,s.history?e?p.replaceState(null,"",t):(p.pushState(null,"",t),S.attr("href",S.attr("href"))):e?h.replace(t):h.href=t,u}return h.href.replace(/%27/g,"'")};var C=[],O=!1;u.onUrlChange=function(e){return O||(s.history&&zn(t).bind("popstate",l),s.hashchange?zn(t).bind("hashchange",l):u.addPollFn(l),O=!0),C.push(e),e},u.baseHref=function(){var t=S.attr("href");return t?t.replace(/^https?\:\/\/[^\/]*/,""):""};var M={},D="",x=u.baseHref();u.cookies=function(t,e){var o,s,r,a,l;if(!t){if(c.cookie!==D)for(D=c.cookie,s=D.split("; "),M={},a=0;s.length>a;a++)r=s[a],l=r.indexOf("="),l>0&&(M[unescape(r.substring(0,l))]=unescape(r.substring(l+1)));return M}e===n?c.cookie=escape(t)+"=;path="+x+";expires=Thu, 01 Jan 1970 00:00:00 GMT":y(e)&&(o=(c.cookie=escape(t)+"="+escape(e)+";path="+x).length+1,o>4096&&i.warn("Cookie '"+t+"' possibly not set or overflowed because it was too large ("+o+" > 4096 bytes)!"))},u.defer=function(t,e){var n;return w++,n=f(function(){delete v[n],r(t)},e||0),v[n]=!0,n},u.defer.cancel=function(t){return v[t]?(delete v[t],m(t),r(d),!0):!1}}function Oe(){this.$get=["$window","$log","$sniffer","$document",function(t,e,n,i){return new Ce(t,i,e,n)}]}function Me(){this.$get=function(){function t(t,n){function i(t){t!=h&&(d?d==t&&(d=t.n):d=t,o(t.n,t.p),o(t,h),h=t,h.n=null)}function o(t,e){t!=e&&(t&&(t.p=e),e&&(e.n=t))}if(t in e)throw Error("cacheId "+t+" taken");var s=0,r=u({},n,{id:t}),a={},l=n&&n.capacity||Number.MAX_VALUE,c={},h=null,d=null;return e[t]={put:function(t,e){var n=c[t]||(c[t]={key:t});i(n),g(e)||(t in a||s++,a[t]=e,s>l&&this.remove(d.key))},get:function(t){var e=c[t];if(e)return i(e),a[t]},remove:function(t){var e=c[t];e&&(e==h&&(h=e.p),e==d&&(d=e.n),o(e.n,e.p),delete c[t],delete a[t],s--)},removeAll:function(){a={},s=0,c={},h=d=null},destroy:function(){a=null,r=null,c=null,delete e[t]},info:function(){return u({},r,{size:s})}}}var e={};return t.info=function(){var t={};return o(e,function(e,n){t[n]=e.info()}),t},t.get=function(t){return e[t]},t}}function De(){this.$get=["$cacheFactory",function(t){return t("templates")}]}function xe(t){var i={},s="Directive",r=/^\s*directive\:\s*([\d\w\-_]+)\s+(.*)$/,l=/(([\d\w\-_]+)(?:\:([^;]+))?;?)/,c="Template must have exactly one root element. was: ",h=/^\s*(https?|ftp|mailto|file):/;this.directive=function d(e,n){return y(e)?(Y(n,"directive"),i.hasOwnProperty(e)||(i[e]=[],t.factory(e+s,["$injector","$exceptionHandler",function(t,n){var s=[];return o(i[e],function(i){try{var o=t.invoke(i);b(o)?o={compile:f(o)}:!o.compile&&o.link&&(o.compile=f(o.link)),o.priority=o.priority||0,o.name=o.name||e,o.require=o.require||o.controller&&o.name,o.restrict=o.restrict||"A",s.push(o)}catch(r){n(r)}}),s}])),i[e].push(n)):o(e,a(d)),this},this.urlSanitizationWhitelist=function(t){return m(t)?(h=t,this):h},this.$get=["$injector","$interpolate","$exceptionHandler","$http","$templateCache","$parse","$controller","$rootScope","$document",function(t,a,d,g,m,w,$,T,S){function C(t,e,n){t instanceof zn||(t=zn(t)),o(t,function(e,n){3==e.nodeType&&e.nodeValue.match(/\S+/)&&(t[n]=zn(e).wrap("<span></span>").parent()[0])});var i=D(t,e,t,n);return function(e,n){Y(e,"scope");for(var o=n?hi.clone.call(t):t,s=0,r=o.length;r>s;s++){var a=o[s];(1==a.nodeType||9==a.nodeType)&&o.eq(s).data("$scope",e)}return M(o,"ng-scope"),n&&n(o,e),i&&i(e,o,o),o}}function M(t,e){try{t.addClass(e)}catch(n){}}function D(t,e,i,o){function s(t,i,o,s){var r,a,l,u,c,d,p,f,g=[];for(d=0,p=i.length;p>d;d++)g.push(i[d]);for(d=0,f=0,p=h.length;p>d;f++)l=g[f],r=h[d++],a=h[d++],r?(r.scope?(u=t.$new(v(r.scope)),zn(l).data("$scope",u)):u=t,c=r.transclude,c||!s&&e?r(a,u,l,o,function(e){return function(n){var i=t.$new();return i.$$transcluded=!0,e(i,n).bind("$destroy",B(i,i.$destroy))}}(c||e)):r(a,u,l,n,s)):a&&a(t,l.childNodes,n,s)}for(var r,a,l,u,c,h=[],d=0;t.length>d;d++)u=new U,l=x(t[d],[],u,o),r=l.length?P(l,t[d],u,e,i):null,a=r&&r.terminal||!t[d].childNodes||!t[d].childNodes.length?null:D(t[d].childNodes,r?r.transclude:e),h.push(r),h.push(a),c=c||r||a;return c?s:null}function x(t,e,n,i){var o,s,a=t.nodeType,u=n.$attr;switch(a){case 1:k(e,Pe(Xn(t).toLowerCase()),"E",i);for(var c,h,d,p,f=t.attributes,g=0,m=f&&f.length;m>g;g++)c=f[g],c.specified&&(h=c.name,d=Pe(h.toLowerCase()),u[d]=h,n[d]=p=O(Qn&&"href"==h?decodeURIComponent(t.getAttribute(h,2)):c.value),ve(t,d)&&(n[d]=!0),L(t,e,p,d),k(e,d,"A",i));if(s=t.className,y(s)&&""!==s)for(;o=l.exec(s);)d=Pe(o[2]),k(e,d,"C",i)&&(n[d]=O(o[3])),s=s.substr(o.index+o[0].length);break;case 3:R(e,t.nodeValue);break;case 8:try{o=r.exec(t.nodeValue),o&&(d=Pe(o[1]),k(e,d,"M",i)&&(n[d]=O(o[2])))}catch(v){}}return e.sort(_),e}function P(t,i,s,r,a){function l(t,e){t&&(t.require=p.require,k.push(t)),e&&(e.require=p.require,_.push(e))}function u(t,e){var n,i="data",s=!1;if(y(t)){for(;"^"==(n=t.charAt(0))||"?"==n;)t=t.substr(1),"^"==n&&(i="inheritedData"),s=s||"?"==n;if(n=e[i]("$"+t+"Controller"),!n&&!s)throw Error("No controller: "+t);return n}return E(t)&&(n=[],o(t,function(t){n.push(u(t,e))})),n}function h(t,e,r,a,l){var c,h,p,f,g,m;if(c=i===r?s:A(s,new U(zn(r),s.$attr)),h=c.$$element,R){var v=/^\s*([@=&])\s*(\w*)\s*$/,y=e.$parent||e;o(R.scope,function(t,n){var i,o,s,r=t.match(v)||[],a=r[2]||n,l=r[1];switch(e.$$isolateBindings[n]=l+a,l){case"@":c.$observe(a,function(t){e[n]=t}),c.$$observers[a].$$scope=y;break;case"=":o=w(c[a]),s=o.assign||function(){throw i=e[n]=o(y),Error(wi+c[a]+" (directive: "+R.name+")")},i=e[n]=o(y),e.$watch(function(){var t=o(y);return t!==e[n]&&(t!==i?i=e[n]=t:s(y,t=i=e[n])),t});break;case"&":o=w(c[a]),e[n]=function(t){return o(y,t)};break;default:throw Error("Invalid isolate scope definition for directive "+R.name+": "+t)}})}for(T&&o(T,function(t){var n={$scope:e,$element:h,$attrs:c,$transclude:l};m=t.controller,"@"==m&&(m=c[t.name]),h.data("$"+t.name+"Controller",$(m,n))}),p=0,f=k.length;f>p;p++)try{g=k[p],g(e,h,c,g.require&&u(g.require,h))}catch(E){d(E,q(h))}for(t&&t(e,r.childNodes,n,l),p=0,f=_.length;f>p;p++)try{g=_[p],g(e,h,c,g.require&&u(g.require,h))}catch(E){d(E,q(h))}}for(var p,f,g,m,T,S,D,P=-Number.MAX_VALUE,k=[],_=[],B=null,R=null,L=null,V=s.$$element=zn(i),F=r,W=0,Z=t.length;Z>W&&(p=t[W],g=n,!(P>p.priority));W++){if((D=p.scope)&&(N("isolated scope",R,p,V),v(D)&&(M(V,"ng-isolate-scope"),R=p),M(V,"ng-scope"),B=B||p),f=p.name,(D=p.controller)&&(T=T||{},N("'"+f+"' controller",T[f],p,V),T[f]=p),(D=p.transclude)&&(N("transclusion",m,p,V),m=p,P=p.priority,"element"==D?(g=zn(i),V=s.$$element=zn(e.createComment(" "+f+": "+s[f]+" ")),i=V[0],j(a,zn(g[0]),i),F=C(g,r,P)):(g=zn(se(i)).contents(),V.html(""),F=C(g,r))),D=p.template)if(N("template",L,p,V),L=p,D=z(D),p.replace){if(g=zn("<div>"+O(D)+"</div>").contents(),i=g[0],1!=g.length||1!==i.nodeType)throw Error(c+D);j(a,V,i);var G={$attr:{}};t=t.concat(x(i,t.splice(W+1,t.length-(W+1)),G)),H(s,G),Z=t.length}else V.html(D);if(p.templateUrl)N("template",L,p,V),L=p,h=I(t.splice(W,t.length-W),h,V,s,a,p.replace,F),Z=t.length;else if(p.compile)try{S=p.compile(V,s,F),b(S)?l(null,S):S&&l(S.pre,S.post)}catch(X){d(X,q(V))}p.terminal&&(h.terminal=!0,P=Math.max(P,p.priority))}return h.scope=B&&B.scope,h.transclude=m&&F,h}function k(e,o,r,a){var l=!1;if(i.hasOwnProperty(o))for(var u,c=t.get(o+s),h=0,p=c.length;p>h;h++)try{u=c[h],(a===n||a>u.priority)&&-1!=u.restrict.indexOf(r)&&(e.push(u),l=!0)}catch(f){d(f)}return l}function H(t,e){var n=e.$attr,i=t.$attr,s=t.$$element;o(t,function(i,o){"$"!=o.charAt(0)&&(e[o]&&(i+=("style"===o?";":" ")+e[o]),t.$set(o,i,!0,n[o]))}),o(e,function(e,o){"class"==o?(M(s,e),t["class"]=(t["class"]?t["class"]+" ":"")+e):"style"==o?s.attr("style",s.attr("style")+";"+e):"$"==o.charAt(0)||t.hasOwnProperty(o)||(t[o]=e,i[o]=n[o])})}function I(t,e,n,i,o,s,r){var a,l,h=[],d=n[0],p=t.shift(),f=u({},p,{controller:null,templateUrl:null,transclude:null,scope:null});return n.html(""),g.get(p.templateUrl,{cache:m}).success(function(u){var p,g,m;if(u=z(u),s){if(m=zn("<div>"+O(u)+"</div>").contents(),p=m[0],1!=m.length||1!==p.nodeType)throw Error(c+u);g={$attr:{}},j(o,n,p),x(p,t,g),H(i,g)}else p=d,n.html(u);for(t.unshift(f),a=P(t,p,i,r),l=D(n[0].childNodes,r);h.length;){var v=h.pop(),y=h.pop(),w=h.pop(),$=h.pop(),E=p;w!==d&&(E=se(p),j(y,zn(w),E)),a(function(){e(l,$,E,o,v)},$,E,o,v)}h=null}).error(function(t,e,n,i){throw Error("Failed to load template: "+i.url)}),function(t,n,i,o,s){h?(h.push(n),h.push(i),h.push(o),h.push(s)):a(function(){e(l,n,i,o,s)},n,i,o,s)}}function _(t,e){return e.priority-t.priority}function N(t,e,n,i){if(e)throw Error("Multiple directives ["+e.name+", "+n.name+"] asking for "+t+" on: "+q(i))}function R(t,e){var n=a(e,!0);n&&t.push({priority:0,compile:f(function(t,e){var i=e.parent(),o=i.data("$binding")||[];o.push(n),M(i.data("$binding",o),"ng-binding"),t.$watch(n,function(t){e[0].nodeValue=t})})})}function L(t,e,i,o){var s=a(i,!0);s&&e.push({priority:100,compile:f(function(t,e,i){var r=i.$$observers||(i.$$observers={});"class"===o&&(s=a(i[o],!0)),i[o]=n,(r[o]||(r[o]=[])).$$inter=!0,(i.$$observers&&i.$$observers[o].$$scope||t).$watch(s,function(t){i.$set(o,t)})})})}function j(t,e,n){var i,o,s=e[0],r=s.parentNode;if(t)for(i=0,o=t.length;o>i;i++)if(t[i]==s){t[i]=n;break}r&&r.replaceChild(n,s),n[zn.expando]=s[zn.expando],e[0]=n}var U=function(t,e){this.$$element=t,this.$attr=e||{}};U.prototype={$normalize:Pe,$set:function(t,e,i,s){var r,a=ve(this.$$element[0],t),l=this.$$observers;a&&(this.$$element.prop(t,e),s=a),this[t]=e,s?this.$attr[t]=s:(s=this.$attr[t],s||(this.$attr[t]=s=X(t,"-"))),"A"===Xn(this.$$element[0])&&"href"===t&&(V.setAttribute("href",e),r=V.href,r.match(h)||(this[t]=e="unsafe:"+r)),i!==!1&&(null===e||e===n?this.$$element.removeAttr(s):this.$$element.attr(s,e)),l&&o(l[t],function(t){try{t(e)}catch(n){d(n)}})},$observe:function(t,e){var n=this,i=n.$$observers||(n.$$observers={}),o=i[t]||(i[t]=[]);return o.push(e),T.$evalAsync(function(){o.$$inter||e(n[t])}),e}};var V=S[0].createElement("a"),F=a.startSymbol(),W=a.endSymbol(),z="{{"==F||"}}"==W?p:function z(t){return t.replace(/\{\{/g,F).replace(/}}/g,W)};return C}]}function Pe(t){return ne(t.replace($i,""))}function ke(){var t={};this.register=function(e,n){v(e)?u(t,e):t[e]=n},this.$get=["$injector","$window",function(e,n){return function(i,o){if(y(i)){var s=i;i=t.hasOwnProperty(s)?t[s]:Ye(o.$scope,s,!0)||Ye(n,s,!0),J(i,s,!0)}return e.instantiate(i,o)}}]}function He(){this.$get=["$window",function(t){return zn(t.document)}]}function Ae(){this.$get=["$log",function(t){return function(){t.error.apply(t,arguments)}}]}function Ie(){var t="{{",e="}}";this.startSymbol=function(e){return e?(t=e,this):t},this.endSymbol=function(t){return t?(e=t,this):e},this.$get=["$parse",function(i){function o(o,a){for(var l,u,c,h,d=0,p=[],f=o.length,g=!1,m=[];f>d;)-1!=(l=o.indexOf(t,d))&&-1!=(u=o.indexOf(e,l+s))?(d!=l&&p.push(o.substring(d,l)),p.push(c=i(h=o.substring(l+s,u))),c.exp=h,d=u+r,g=!0):(d!=f&&p.push(o.substring(d)),d=f);return(f=p.length)||(p.push(""),f=1),!a||g?(m.length=f,c=function(t){for(var e,i=0,o=f;o>i;i++)"function"==typeof(e=p[i])&&(e=e(t),null==e||e==n?e="":"string"!=typeof e&&(e=L(e))),m[i]=e;return m.join("")},c.exp=o,c.parts=p,c):n}var s=t.length,r=e.length;return o.startSymbol=function(){return t},o.endSymbol=function(){return e},o}]}function _e(t){for(var e=t.split("/"),n=e.length;n--;)e[n]=W(e[n]);return e.join("/")}function Ne(t,e){var n=Ei.exec(t);return n={protocol:n[1],host:n[3],port:c(n[5])||Si[n[1]]||null,path:n[6]||"/",search:n[8],hash:n[10]},e&&(e.$$protocol=n.protocol,e.$$host=n.host,e.$$port=n.port),n}function Be(t,e,n){return t+"://"+e+(n==Si[t]?"":":"+n)}function Re(t){return t.substr(0,t.lastIndexOf("/"))}function Le(t,e,n){var i=Ne(t);return decodeURIComponent(i.path)!=e||g(i.hash)||0!==i.hash.indexOf(n)?t:Be(i.protocol,i.host,i.port)+Re(e)+i.hash.substr(n.length)}function je(t,e,n){var i=Ne(t);if(decodeURIComponent(i.path)!=e||g(i.hash)||0!==i.hash.indexOf(n)){var o=i.search&&"?"+i.search||"",s=i.hash&&"#"+i.hash||"",r=Re(e),a=i.path.substr(r.length);if(0!==i.path.indexOf(r))throw Error('Invalid url "'+t+'", missing path prefix "'+r+'" !');return Be(i.protocol,i.host,i.port)+e+"#"+n+a+o+s}return t}function Ue(t,e,i){e=e||"",this.$$parse=function(t){var n=Ne(t,this);if(0!==n.path.indexOf(e))throw Error('Invalid url "'+t+'", missing path prefix "'+e+'" !');this.$$path=decodeURIComponent(n.path.substr(e.length)),this.$$search=V(n.search),this.$$hash=n.hash&&decodeURIComponent(n.hash)||"",this.$$compose()},this.$$compose=function(){var t=F(this.$$search),n=this.$$hash?"#"+W(this.$$hash):"";this.$$url=_e(this.$$path)+(t?"?"+t:"")+n,this.$$absUrl=Be(this.$$protocol,this.$$host,this.$$port)+e+this.$$url},this.$$rewriteAppUrl=function(t){return 0==t.indexOf(i)?t:n},this.$$parse(t)}function qe(t,e,i){var o;this.$$parse=function(t){var n=Ne(t,this);if(n.hash&&0!==n.hash.indexOf(e))throw Error('Invalid url "'+t+'", missing hash prefix "'+e+'" !');o=n.path+(n.search?"?"+n.search:""),n=Ti.exec((n.hash||"").substr(e.length)),this.$$path=n[1]?("/"==n[1].charAt(0)?"":"/")+decodeURIComponent(n[1]):"",this.$$search=V(n[3]),this.$$hash=n[5]&&decodeURIComponent(n[5])||"",this.$$compose()},this.$$compose=function(){var t=F(this.$$search),n=this.$$hash?"#"+W(this.$$hash):"";this.$$url=_e(this.$$path)+(t?"?"+t:"")+n,this.$$absUrl=Be(this.$$protocol,this.$$host,this.$$port)+o+(this.$$url?"#"+e+this.$$url:"")},this.$$rewriteAppUrl=function(t){return 0==t.indexOf(i)?t:n},this.$$parse(t)}function Ve(t,e,i,o){qe.apply(this,arguments),this.$$rewriteAppUrl=function(t){return 0==t.indexOf(i)?i+o+"#"+e+t.substr(i.length):n}}function Fe(t){return function(){return this[t]}}function We(t,e){return function(n){return g(n)?this[t]:(this[t]=e(n),this.$$compose(),this)}}function ze(){var e="",n=!1;this.hashPrefix=function(t){return m(t)?(e=t,this):e},this.html5Mode=function(t){return m(t)?(n=t,this):n},this.$get=["$rootScope","$browser","$sniffer","$rootElement",function(i,o,s,r){function a(t){i.$broadcast("$locationChangeSuccess",l.absUrl(),t)}var l,u,c,h,d=o.url(),p=Ne(d);n?(u=o.baseHref()||"/",c=Re(u),h=Be(p.protocol,p.host,p.port)+c+"/",l=s.history?new Ue(Le(d,u,e),c,h):new Ve(je(d,u,e),e,h,u.substr(c.length+1))):(h=Be(p.protocol,p.host,p.port)+(p.path||"")+(p.search?"?"+p.search:"")+"#"+e+"/",l=new qe(d,e,h)),r.bind("click",function(e){if(!e.ctrlKey&&!e.metaKey&&2!=e.which){for(var n=zn(e.target);"a"!==qn(n[0].nodeName);)if(n[0]===r[0]||!(n=n.parent())[0])return;var o=n.prop("href"),s=l.$$rewriteAppUrl(o);o&&!n.attr("target")&&s&&(l.$$parse(s),i.$apply(),e.preventDefault(),t.angular["ff-684208-preventDefault"]=!0)}}),l.absUrl()!=d&&o.url(l.absUrl(),!0),o.onUrlChange(function(t){l.absUrl()!=t&&(i.$evalAsync(function(){var e=l.absUrl();l.$$parse(t),a(e)}),i.$$phase||i.$digest())});var f=0;return i.$watch(function(){var t=o.url(),e=l.$$replace;return f&&t==l.absUrl()||(f++,i.$evalAsync(function(){i.$broadcast("$locationChangeStart",l.absUrl(),t).defaultPrevented?l.$$parse(t):(o.url(l.absUrl(),e),a(t))})),l.$$replace=!1,f}),l}]}function Ze(){this.$get=["$window",function(t){function e(t){return t instanceof Error&&(t.stack?t=t.message&&-1===t.stack.indexOf(t.message)?"Error: "+t.message+"\n"+t.stack:t.stack:t.sourceURL&&(t=t.message+"\n"+t.sourceURL+":"+t.line)),t}function n(n){var i=t.console||{},s=i[n]||i.log||d;return s.apply?function(){var t=[];return o(arguments,function(n){t.push(e(n))}),s.apply(i,t)}:function(t,e){s(t,e)}}return{log:n("log"),warn:n("warn"),info:n("info"),error:n("error")}}]}function Ge(t,e){function i(t){return-1!=t.indexOf(v)}function o(t){return-1!=t.indexOf(E)}function s(){return t.length>w+1?t.charAt(w+1):!1}function r(t){return t>="0"&&"9">=t}function a(t){return" "==t||"\r"==t||"	"==t||"\n"==t||""==t||" "==t}function l(t){return t>="a"&&"z">=t||t>="A"&&"Z">=t||"_"==t||"$"==t}function c(t){return"-"==t||"+"==t||r(t)}function h(e,n,i){throw i=i||w,Error("Lexer Error: "+e+" at column"+(m(n)?"s "+n+"-"+w+" ["+t.substring(n,i)+"]":" "+i)+" in expression ["+t+"].")}function d(){for(var e="",n=w;t.length>w;){var i=qn(t.charAt(w));if("."==i||r(i))e+=i;else{var o=s();if("e"==i&&c(o))e+=i;else if(c(i)&&o&&r(o)&&"e"==e.charAt(e.length-1))e+=i;else{if(!c(i)||o&&r(o)||"e"!=e.charAt(e.length-1))break;h("Invalid exponent")}}w++}e=1*e,y.push({index:n,text:e,json:!0,fn:function(){return e}})}function p(){for(var n,i,o,s="",c=w;t.length>w;){var h=t.charAt(w);if("."!=h&&!l(h)&&!r(h))break;"."==h&&(n=w),s+=h,w++}if(n)for(i=w;t.length>i;){var h=t.charAt(i);if("("==h){o=s.substr(n-c+1),s=s.substr(0,n-c),w=i;break}if(!a(h))break;i++}var d={index:c,text:s};if(Ci.hasOwnProperty(s))d.fn=d.json=Ci[s];else{var p=Ke(s,e);d.fn=u(function(t,e){return p(t,e)},{assign:function(t,e){return Qe(t,s,e)}})}y.push(d),o&&(y.push({index:n,text:".",json:!1}),y.push({index:n+1,text:o,json:!1}))}function f(e){var i=w;w++;for(var o="",s=e,r=!1;t.length>w;){var a=t.charAt(w);if(s+=a,r){if("u"==a){var l=t.substring(w+1,w+5);l.match(/[\da-f]{4}/i)||h("Invalid unicode escape [\\u"+l+"]"),w+=4,o+=String.fromCharCode(parseInt(l,16))}else{var u=Oi[a];o+=u?u:a}r=!1}else if("\\"==a)r=!0;else{if(a==e)return w++,y.push({index:i,text:s,string:o,json:!0,fn:function(){return o}}),n;o+=a}w++}h("Unterminated quote",i)}for(var g,v,y=[],w=0,$=[],E=":";t.length>w;){if(v=t.charAt(w),i("\"'"))f(v);else if(r(v)||i(".")&&r(s()))d();
else if(l(v))p(),o("{,")&&"{"==$[0]&&(g=y[y.length-1])&&(g.json=-1==g.text.indexOf("."));else if(i("(){}[].,;:"))y.push({index:w,text:v,json:o(":[,")&&i("{[")||i("}]:,")}),i("{[")&&$.unshift(v),i("}]")&&$.shift(),w++;else{if(a(v)){w++;continue}var b=v+s(),T=Ci[v],S=Ci[b];S?(y.push({index:w,text:b,fn:S}),w+=2):T?(y.push({index:w,text:v,fn:T,json:o("[,:")&&i("+-")}),w+=1):h("Unexpected next character ",w,w+1)}E=v}return y}function Xe(t,e,i,o){function s(e,n){throw Error("Syntax Error: Token '"+n.text+"' "+e+" at column "+(n.index+1)+" of the expression ["+t+"] starting at ["+t.substring(n.index)+"].")}function r(){if(0===_.length)throw Error("Unexpected end of expression: "+t);return _[0]}function a(t,e,n,i){if(_.length>0){var o=_[0],s=o.text;if(s==t||s==e||s==n||s==i||!t&&!e&&!n&&!i)return o}return!1}function l(t,n,i,o){var r=a(t,n,i,o);return r?(e&&!r.json&&s("is not valid json",r),_.shift(),r):!1}function c(t){l(t)||s("is unexpected, expecting ["+t+"]",a())}function h(t,e){return function(n,i){return t(n,i,e)}}function p(t,e,n){return function(i,o){return e(i,o,t,n)}}function g(){for(var t=[];;)if(_.length>0&&!a("}",")",";","]")&&t.push(j()),!l(";"))return 1==t.length?t[0]:function(e,n){for(var i,o=0;t.length>o;o++){var s=t[o];s&&(i=s(e,n))}return i}}function m(){for(var t,e=y();;){if(!(t=l("|")))return e;e=p(e,t.fn,v())}}function v(){for(var t=l(),e=i(t.text),n=[];;){if(!(t=l(":"))){var o=function(t,i,o){for(var s=[o],r=0;n.length>r;r++)s.push(n[r](t,i));return e.apply(t,s)};return function(){return o}}n.push(y())}}function y(){return N()}function w(){var e,n,i=$();return(n=l("="))?(i.assign||s("implies assignment but ["+t.substring(0,n.index)+"] can not be assigned to",n),e=$(),function(t,n){return i.assign(t,e(t,n),n)}):i}function $(){for(var t,e=E();;){if(!(t=l("||")))return e;e=p(e,t.fn,E())}}function E(){var t,e=b();return(t=l("&&"))&&(e=p(e,t.fn,E())),e}function b(){var t,e=T();return(t=l("==","!="))&&(e=p(e,t.fn,b())),e}function T(){var t,e=S();return(t=l("<",">","<=",">="))&&(e=p(e,t.fn,T())),e}function S(){for(var t,e=C();t=l("+","-");)e=p(e,t.fn,C());return e}function C(){for(var t,e=O();t=l("*","/","%");)e=p(e,t.fn,O());return e}function O(){var t;return l("+")?M():(t=l("-"))?p(I,t.fn,O()):(t=l("!"))?h(t.fn,O()):M()}function M(){var t;if(l("("))t=j(),c(")");else if(l("["))t=k();else if(l("{"))t=H();else{var e=l();t=e.fn,t||s("not a primary expression",e)}for(var n,i;n=l("(","[",".");)"("===n.text?(t=B(t,i),i=null):"["===n.text?(i=t,t=L(t)):"."===n.text?(i=t,t=R(t)):s("IMPOSSIBLE");return t}function D(t){var e=l().text,n=Ke(e,o);return u(function(e,i){return n(t(e,i),i)},{assign:function(n,i,o){return Qe(t(n,o),e,i)}})}function x(t){var e=y();return c("]"),u(function(i,o){var s,r,a=t(i,o),l=e(i,o);return a?(s=a[l],s&&s.then&&(r=s,"$$v"in s||(r.$$v=n,r.then(function(t){r.$$v=t})),s=s.$$v),s):n},{assign:function(n,i,o){return t(n,o)[e(n,o)]=i}})}function P(t,e){var n=[];if(")"!=r().text)do n.push(y());while(l(","));return c(")"),function(i,o){for(var s=[],r=e?e(i,o):i,a=0;n.length>a;a++)s.push(n[a](i,o));var l=t(i,o)||d;return l.apply?l.apply(r,s):l(s[0],s[1],s[2],s[3],s[4])}}function k(){var t=[];if("]"!=r().text)do t.push(y());while(l(","));return c("]"),function(e,n){for(var i=[],o=0;t.length>o;o++)i.push(t[o](e,n));return i}}function H(){var t=[];if("}"!=r().text)do{var e=l(),n=e.string||e.text;c(":");var i=y();t.push({key:n,value:i})}while(l(","));return c("}"),function(e,n){for(var i={},o=0;t.length>o;o++){var s=t[o],r=s.value(e,n);i[s.key]=r}return i}}var A,I=f(0),_=Ge(t,o),N=w,B=P,R=D,L=x,j=m;return e?(N=$,B=R=L=j=function(){s("is not valid json",{text:t,index:0})},A=M()):A=g(),0!==_.length&&s("is an unexpected token",_[0]),A}function Qe(t,e,n){for(var i=e.split("."),o=0;i.length>1;o++){var s=i.shift(),r=t[s];r||(r={},t[s]=r),t=r}return t[i.shift()]=n,n}function Ye(t,e,n){if(!e)return t;for(var i,o=e.split("."),s=t,r=o.length,a=0;r>a;a++)i=o[a],t&&(t=(s=t)[i]);return!n&&b(t)?B(s,t):t}function Je(t,e,i,o,s){return function(r,a){var l,u=a&&a.hasOwnProperty(t)?a:r;return null===u||u===n?u:(u=u[t],u&&u.then&&("$$v"in u||(l=u,l.$$v=n,l.then(function(t){l.$$v=t})),u=u.$$v),e&&null!==u&&u!==n?(u=u[e],u&&u.then&&("$$v"in u||(l=u,l.$$v=n,l.then(function(t){l.$$v=t})),u=u.$$v),i&&null!==u&&u!==n?(u=u[i],u&&u.then&&("$$v"in u||(l=u,l.$$v=n,l.then(function(t){l.$$v=t})),u=u.$$v),o&&null!==u&&u!==n?(u=u[o],u&&u.then&&("$$v"in u||(l=u,l.$$v=n,l.then(function(t){l.$$v=t})),u=u.$$v),s&&null!==u&&u!==n?(u=u[s],u&&u.then&&("$$v"in u||(l=u,l.$$v=n,l.then(function(t){l.$$v=t})),u=u.$$v),u):u):u):u):u)}}function Ke(t,e){if(Mi.hasOwnProperty(t))return Mi[t];var i,s=t.split("."),r=s.length;if(e)i=6>r?Je(s[0],s[1],s[2],s[3],s[4]):function(t,e){var i,o=0;do i=Je(s[o++],s[o++],s[o++],s[o++],s[o++])(t,e),e=n,t=i;while(r>o);return i};else{var a="var l, fn, p;\n";o(s,function(t,e){a+="if(s === null || s === undefined) return s;\nl=s;\ns="+(e?"s":'((k&&k.hasOwnProperty("'+t+'"))?k:s)')+'["'+t+'"]'+";\n"+"if (s && s.then) {\n"+' if (!("$$v" in s)) {\n'+" p=s;\n"+" p.$$v = undefined;\n"+" p.then(function(v) {p.$$v=v;});\n"+"}\n"+" s=s.$$v\n"+"}\n"}),a+="return s;",i=Function("s","k",a),i.toString=function(){return a}}return Mi[t]=i}function tn(){var t={};this.$get=["$filter","$sniffer",function(e,n){return function(i){switch(typeof i){case"string":return t.hasOwnProperty(i)?t[i]:t[i]=Xe(i,!1,e,n.csp);case"function":return i;default:return d}}}]}function en(){this.$get=["$rootScope","$exceptionHandler",function(t,e){return nn(function(e){t.$evalAsync(e)},e)}]}function nn(t,e){function i(t){return t}function s(t){return u(t)}function r(t){var e=a(),n=t.length,i=[];return n?o(t,function(t,o){l(t).then(function(t){o in i||(i[o]=t,--n||e.resolve(i))},function(t){o in i||e.reject(t)})}):e.resolve(i),e.promise}var a=function(){var o,r,c=[];return r={resolve:function(e){if(c){var i=c;c=n,o=l(e),i.length&&t(function(){for(var t,e=0,n=i.length;n>e;e++)t=i[e],o.then(t[0],t[1])})}},reject:function(t){r.resolve(u(t))},promise:{then:function(t,n){var r=a(),l=function(n){try{r.resolve((t||i)(n))}catch(o){e(o),r.reject(o)}},u=function(t){try{r.resolve((n||s)(t))}catch(i){e(i),r.reject(i)}};return c?c.push([l,u]):o.then(l,u),r.promise}}}},l=function(e){return e&&e.then?e:{then:function(n){var i=a();return t(function(){i.resolve(n(e))}),i.promise}}},u=function(e){return{then:function(n,i){var o=a();return t(function(){o.resolve((i||s)(e))}),o.promise}}},c=function(n,o,r){var c,h=a(),d=function(t){try{return(o||i)(t)}catch(n){return e(n),u(n)}},p=function(t){try{return(r||s)(t)}catch(n){return e(n),u(n)}};return t(function(){l(n).then(function(t){c||(c=!0,h.resolve(l(t).then(d,p)))},function(t){c||(c=!0,h.resolve(p(t)))})}),h.promise};return{defer:a,reject:u,when:c,all:r}}function on(){var t={};this.when=function(e,n){if(t[e]=u({reloadOnSearch:!0},n),e){var i="/"==e[e.length-1]?e.substr(0,e.length-1):e+"/";t[i]={redirectTo:e}}return this},this.otherwise=function(t){return this.when(null,t),this},this.$get=["$rootScope","$location","$routeParams","$q","$injector","$http","$templateCache",function(e,n,i,s,r,a,l){function c(t,e){e="^"+e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")+"$";for(var n,i="",s=[],r={},a=/:(\w+)/g,l=0;null!==(n=a.exec(e));)i+=e.slice(l,n.index),i+="([^\\/]*)",s.push(n[1]),l=a.lastIndex;i+=e.substr(l);var u=t.match(RegExp(i));return u&&o(s,function(t,e){r[t]=u[e+1]}),u?r:null}function d(){var t=p(),u=v.current;t&&u&&t.$$route===u.$$route&&I(t.pathParams,u.pathParams)&&!t.reloadOnSearch&&!g?(u.params=t.params,H(u.params,i),e.$broadcast("$routeUpdate",u)):(t||u)&&(g=!1,e.$broadcast("$routeChangeStart",t,u),v.current=t,t&&t.redirectTo&&(y(t.redirectTo)?n.path(f(t.redirectTo,t.params)).search(t.params).replace():n.url(t.redirectTo(t.pathParams,n.path(),n.search())).replace()),s.when(t).then(function(){if(t){var e,n=[],i=[];return o(t.resolve||{},function(t,e){n.push(e),i.push(y(t)?r.get(t):r.invoke(t))}),m(e=t.template)||m(e=t.templateUrl)&&(e=a.get(e,{cache:l}).then(function(t){return t.data})),m(e)&&(n.push("$template"),i.push(e)),s.all(i).then(function(t){var e={};return o(t,function(t,i){e[n[i]]=t}),e})}}).then(function(n){t==v.current&&(t&&(t.locals=n,H(t.params,i)),e.$broadcast("$routeChangeSuccess",t,u))},function(n){t==v.current&&e.$broadcast("$routeChangeError",t,u,n)}))}function p(){var e,i;return o(t,function(t,o){!i&&(e=c(n.path(),o))&&(i=h(t,{params:u({},n.search(),e),pathParams:e}),i.$$route=t)}),i||t[null]&&h(t[null],{params:{},pathParams:{}})}function f(t,e){var n=[];return o((t||"").split(":"),function(t,i){if(0==i)n.push(t);else{var o=t.match(/(\w+)(.*)/),s=o[1];n.push(e[s]),n.push(o[2]||""),delete e[s]}}),n.join("")}var g=!1,v={routes:t,reload:function(){g=!0,e.$evalAsync(d)}};return e.$on("$locationChangeSuccess",d),v}]}function sn(){this.$get=f({})}function rn(){var t=10;this.digestTtl=function(e){return arguments.length&&(t=e),t},this.$get=["$injector","$exceptionHandler","$parse",function(e,n,i){function o(){this.$id=l(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this["this"]=this.$root=this,this.$$destroyed=!1,this.$$asyncQueue=[],this.$$listeners={},this.$$isolateBindings={}}function s(t){if(c.$$phase)throw Error(c.$$phase+" already in progress");c.$$phase=t}function r(){c.$$phase=null}function a(t,e){var n=i(t);return J(n,e),n}function u(){}o.prototype={$new:function(t){var e,n;if(b(t))throw Error("API-CHANGE: Use $controller to instantiate controllers.");return t?(n=new o,n.$root=this.$root):(e=function(){},e.prototype=this,n=new e,n.$id=l()),n["this"]=n,n.$$listeners={},n.$parent=this,n.$$asyncQueue=[],n.$$watchers=n.$$nextSibling=n.$$childHead=n.$$childTail=null,n.$$prevSibling=this.$$childTail,this.$$childHead?(this.$$childTail.$$nextSibling=n,this.$$childTail=n):this.$$childHead=this.$$childTail=n,n},$watch:function(t,e,n){var i=this,o=a(t,"watch"),s=i.$$watchers,r={fn:e,last:u,get:o,exp:t,eq:!!n};if(!b(e)){var l=a(e||d,"listener");r.fn=function(t,e,n){l(n)}}return s||(s=i.$$watchers=[]),s.unshift(r),function(){k(s,r)}},$digest:function(){var e,i,o,a,l,c,h,d,p,f,g,m=t,v=this,y=[];s("$digest");do{h=!1,p=v;do{for(l=p.$$asyncQueue;l.length;)try{p.$eval(l.shift())}catch(w){n(w)}if(a=p.$$watchers)for(c=a.length;c--;)try{e=a[c],(i=e.get(p))===(o=e.last)||(e.eq?I(i,o):"number"==typeof i&&"number"==typeof o&&isNaN(i)&&isNaN(o))||(h=!0,e.last=e.eq?H(i):i,e.fn(i,o===u?i:o,p),5>m&&(f=4-m,y[f]||(y[f]=[]),g=b(e.exp)?"fn: "+(e.exp.name||""+e.exp):e.exp,g+="; newVal: "+L(i)+"; oldVal: "+L(o),y[f].push(g)))}catch(w){n(w)}if(!(d=p.$$childHead||p!==v&&p.$$nextSibling))for(;p!==v&&!(d=p.$$nextSibling);)p=p.$parent}while(p=d);if(h&&!m--)throw r(),Error(t+" $digest() iterations reached. Aborting!\n"+"Watchers fired in the last 5 iterations: "+L(y))}while(h||l.length);r()},$destroy:function(){if(c!=this&&!this.$$destroyed){var t=this.$parent;this.$broadcast("$destroy"),this.$$destroyed=!0,t.$$childHead==this&&(t.$$childHead=this.$$nextSibling),t.$$childTail==this&&(t.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$parent=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null}},$eval:function(t,e){return i(t)(this,e)},$evalAsync:function(t){this.$$asyncQueue.push(t)},$apply:function(t){try{return s("$apply"),this.$eval(t)}catch(e){n(e)}finally{r();try{c.$digest()}catch(e){throw n(e),e}}},$on:function(t,e){var n=this.$$listeners[t];return n||(this.$$listeners[t]=n=[]),n.push(e),function(){n[P(n,e)]=null}},$emit:function(t){var e,i,o,s=[],r=this,a=!1,l={name:t,targetScope:r,stopPropagation:function(){a=!0},preventDefault:function(){l.defaultPrevented=!0},defaultPrevented:!1},u=_([l],arguments,1);do{for(e=r.$$listeners[t]||s,l.currentScope=r,i=0,o=e.length;o>i;i++)if(e[i])try{if(e[i].apply(null,u),a)return l}catch(c){n(c)}else e.splice(i,1),i--,o--;r=r.$parent}while(r);return l},$broadcast:function(t){var e,i,o,s=this,r=s,a=s,l={name:t,targetScope:s,preventDefault:function(){l.defaultPrevented=!0},defaultPrevented:!1},u=_([l],arguments,1);do{for(r=a,l.currentScope=r,e=r.$$listeners[t]||[],i=0,o=e.length;o>i;i++)if(e[i])try{e[i].apply(null,u)}catch(c){n(c)}else e.splice(i,1),i--,o--;if(!(a=r.$$childHead||r!==s&&r.$$nextSibling))for(;r!==s&&!(a=r.$$nextSibling);)r=r.$parent}while(r=a);return l}};var c=new o;return c}]}function an(){this.$get=["$window",function(t){var e={},n=c((/android (\d+)/.exec(qn(t.navigator.userAgent))||[])[1]);return{history:!(!t.history||!t.history.pushState||4>n),hashchange:"onhashchange"in t&&(!t.document.documentMode||t.document.documentMode>7),hasEvent:function(n){if("input"==n&&9==Qn)return!1;if(g(e[n])){var i=t.document.createElement("div");e[n]="on"+n in i}return e[n]},csp:!1}}]}function ln(){this.$get=f(t)}function un(t){var e,n,i,s={};return t?(o(t.split("\n"),function(t){i=t.indexOf(":"),e=qn(O(t.substr(0,i))),n=O(t.substr(i+1)),e&&(s[e]?s[e]+=", "+n:s[e]=n)}),s):s}function cn(t){var e=v(t)?t:n;return function(n){return e||(e=un(t)),n?e[qn(n)]||null:e}}function hn(t,e,n){return b(n)?n(t,e):(o(n,function(n){t=n(t,e)}),t)}function dn(t){return t>=200&&300>t}function pn(){var t=/^\s*(\[|\{[^\{])/,e=/[\}\]]\s*$/,i=/^\)\]\}',?\n/,s=this.defaults={transformResponse:[function(n){return y(n)&&(n=n.replace(i,""),t.test(n)&&e.test(n)&&(n=j(n,!0))),n}],transformRequest:[function(t){return v(t)&&!C(t)&&"[object FormData]"!==Kn.apply(t)?L(t):t}],headers:{common:{Accept:"application/json, text/plain, */*","X-Requested-With":"XMLHttpRequest"},post:{"Content-Type":"application/json;charset=utf-8"},put:{"Content-Type":"application/json;charset=utf-8"}}},a=this.responseInterceptors=[];this.$get=["$httpBackend","$browser","$cacheFactory","$rootScope","$q","$injector",function(t,e,i,l,c,h){function d(t){function n(t){var e=u({},t,{data:hn(t.data,t.headers,a)});return dn(t.status)?e:c.reject(e)}t.method=Vn(t.method);var i,r=t.transformRequest||s.transformRequest,a=t.transformResponse||s.transformResponse,l=s.headers,h=u({"X-XSRF-TOKEN":e.cookies()["XSRF-TOKEN"]},l.common,l[qn(t.method)],t.headers),d=hn(t.data,cn(h),r);return g(t.data)&&delete h["Content-Type"],i=m(t,d,h),i=i.then(n,n),o(b,function(t){i=t(i)}),i.success=function(e){return i.then(function(n){e(n.data,n.status,n.headers,t)}),i},i.error=function(e){return i.then(null,function(n){e(n.data,n.status,n.headers,t)}),i},i}function p(){o(arguments,function(t){d[t]=function(e,n){return d(u(n||{},{method:t,url:e}))}})}function f(){o(arguments,function(t){d[t]=function(e,n,i){return d(u(i||{},{method:t,url:e,data:n}))}})}function m(e,n,i){function o(t,e,n){a&&(dn(t)?a.put(f,[t,e,un(n)]):a.remove(f)),s(e,t,n),l.$apply()}function s(t,n,i){n=Math.max(n,0),(dn(n)?h.resolve:h.reject)({data:t,status:n,headers:cn(i),config:e})}function r(){var t=P(d.pendingRequests,e);-1!==t&&d.pendingRequests.splice(t,1)}var a,u,h=c.defer(),p=h.promise,f=w(e.url,e.params);if(d.pendingRequests.push(e),p.then(r,r),e.cache&&"GET"==e.method&&(a=v(e.cache)?e.cache:$),a)if(u=a.get(f)){if(u.then)return u.then(r,r),u;E(u)?s(u[1],u[0],H(u[2])):s(u,200,{})}else a.put(f,p);return u||t(e.method,f,n,o,i,e.timeout,e.withCredentials),p}function w(t,e){if(!e)return t;var i=[];return r(e,function(t,e){null!=t&&t!=n&&(v(t)&&(t=L(t)),i.push(encodeURIComponent(e)+"="+encodeURIComponent(t)))}),t+(-1==t.indexOf("?")?"?":"&")+i.join("&")}var $=i("$http"),b=[];return o(a,function(t){b.push(y(t)?h.get(t):h.invoke(t))}),d.pendingRequests=[],p("get","delete","head","jsonp"),f("post","put"),d.defaults=s,d}]}function fn(){this.$get=["$browser","$window","$document",function(t,e,n){return gn(t,Di,t.defer,e.angular.callbacks,n[0],e.location.protocol.replace(":",""))}]}function gn(t,e,n,i,s,r){function a(t,e){var n=s.createElement("script"),i=function(){s.body.removeChild(n),e&&e()};n.type="text/javascript",n.src=t,Qn?n.onreadystatechange=function(){/loaded|complete/.test(n.readyState)&&i()}:n.onload=n.onerror=i,s.body.appendChild(n)}return function(s,l,u,c,h,p,f){function g(e,n,i,o){var s=(l.match(Ei)||["",r])[1];n="file"==s?i?200:404:n,n=1223==n?204:n,e(n,i,o),t.$$completeOutstandingRequest(d)}if(t.$$incOutstandingRequestCount(),l=l||t.url(),"jsonp"==qn(s)){var m="_"+(i.counter++).toString(36);i[m]=function(t){i[m].data=t},a(l.replace("JSON_CALLBACK","angular.callbacks."+m),function(){i[m].data?g(c,200,i[m].data):g(c,-2),delete i[m]})}else{var v=new e({mozSystem:!0});v.open(s,l,!0),o(h,function(t,e){t&&v.setRequestHeader(e,t)});var y;v.onreadystatechange=function(){if(4==v.readyState){var t=v.getAllResponseHeaders(),e=["Cache-Control","Content-Language","Content-Type","Expires","Last-Modified","Pragma"];t||(t="",o(e,function(e){var n=v.getResponseHeader(e);n&&(t+=e+": "+n+"\n")})),g(c,y||v.status,v.responseText,t)}},f&&(v.withCredentials=!0),v.send(u||""),p>0&&n(function(){y=-1,v.abort()},p)}}}function mn(){this.$get=function(){return{id:"en-us",NUMBER_FORMATS:{DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{minInt:1,minFrac:0,maxFrac:3,posPre:"",posSuf:"",negPre:"-",negSuf:"",gSize:3,lgSize:3},{minInt:1,minFrac:2,maxFrac:2,posPre:"¤",posSuf:"",negPre:"(¤",negSuf:")",gSize:3,lgSize:3}],CURRENCY_SYM:"$"},DATETIME_FORMATS:{MONTH:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),SHORTMONTH:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),DAY:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),SHORTDAY:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(","),AMPMS:["AM","PM"],medium:"MMM d, y h:mm:ss a","short":"M/d/yy h:mm a",fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",mediumDate:"MMM d, y",shortDate:"M/d/yy",mediumTime:"h:mm:ss a",shortTime:"h:mm a"},pluralCat:function(t){return 1===t?"one":"other"}}}}function vn(){this.$get=["$rootScope","$browser","$q","$exceptionHandler",function(t,e,n,i){function o(o,r,a){var l,u,c=n.defer(),h=c.promise,d=m(a)&&!a;return l=e.defer(function(){try{c.resolve(o())}catch(e){c.reject(e),i(e)}d||t.$apply()},r),u=function(){delete s[h.$$timeoutId]},h.$$timeoutId=l,s[l]=c,h.then(u,u),h}var s={};return o.cancel=function(t){return t&&t.$$timeoutId in s?(s[t.$$timeoutId].reject("canceled"),e.defer.cancel(t.$$timeoutId)):!1},o}]}function yn(t){function e(e,i){return t.factory(e+n,i)}var n="Filter";this.register=e,this.$get=["$injector",function(t){return function(e){return t.get(e+n)}}],e("currency",$n),e("date",Dn),e("filter",wn),e("json",xn),e("limitTo",Pn),e("lowercase",Ai),e("number",En),e("orderBy",kn),e("uppercase",Ii)}function wn(){return function(t,e){if(!E(t))return t;var n=[];n.check=function(t){for(var e=0;n.length>e;e++)if(!n[e](t))return!1;return!0};var i=function(t,e){if("!"===e.charAt(0))return!i(t,e.substr(1));switch(typeof t){case"boolean":case"number":case"string":return(""+t).toLowerCase().indexOf(e)>-1;case"object":for(var n in t)if("$"!==n.charAt(0)&&i(t[n],e))return!0;return!1;case"array":for(var o=0;t.length>o;o++)if(i(t[o],e))return!0;return!1;default:return!1}};switch(typeof e){case"boolean":case"number":case"string":e={$:e};case"object":for(var o in e)"$"==o?function(){var t=(""+e[o]).toLowerCase();t&&n.push(function(e){return i(e,t)})}():function(){var t=o,s=(""+e[o]).toLowerCase();s&&n.push(function(e){return i(Ye(e,t),s)})}();break;case"function":n.push(e);break;default:return t}for(var s=[],r=0;t.length>r;r++){var a=t[r];n.check(a)&&s.push(a)}return s}}function $n(t){var e=t.NUMBER_FORMATS;return function(t,n){return g(n)&&(n=e.CURRENCY_SYM),bn(t,e.PATTERNS[1],e.GROUP_SEP,e.DECIMAL_SEP,2).replace(/\u00A4/g,n)}}function En(t){var e=t.NUMBER_FORMATS;return function(t,n){return bn(t,e.PATTERNS[0],e.GROUP_SEP,e.DECIMAL_SEP,n)}}function bn(t,e,n,i,o){if(isNaN(t)||!isFinite(t))return"";var s=0>t;t=Math.abs(t);var r=t+"",a="",l=[],u=!1;if(-1!==r.indexOf("e")){var c=r.match(/([\d\.]+)e(-?)(\d+)/);c&&"-"==c[2]&&c[3]>o+1?r="0":(a=r,u=!0)}if(!u){var h=(r.split(xi)[1]||"").length;g(o)&&(o=Math.min(Math.max(e.minFrac,h),e.maxFrac));var d=Math.pow(10,o);t=Math.round(t*d)/d;var p=(""+t).split(xi),f=p[0];p=p[1]||"";var m=0,v=e.lgSize,y=e.gSize;if(f.length>=v+y){m=f.length-v;for(var w=0;m>w;w++)0===(m-w)%y&&0!==w&&(a+=n),a+=f.charAt(w)}for(w=m;f.length>w;w++)0===(f.length-w)%v&&0!==w&&(a+=n),a+=f.charAt(w);for(;o>p.length;)p+="0";o&&"0"!==o&&(a+=i+p.substr(0,o))}return l.push(s?e.negPre:e.posPre),l.push(a),l.push(s?e.negSuf:e.posSuf),l.join("")}function Tn(t,e,n){var i="";for(0>t&&(i="-",t=-t),t=""+t;e>t.length;)t="0"+t;return n&&(t=t.substr(t.length-e)),i+t}function Sn(t,e,n,i){return function(o){var s=o["get"+t]();return(n>0||s>-n)&&(s+=n),0===s&&-12==n&&(s=12),Tn(s,e,i)}}function Cn(t,e){return function(n,i){var o=n["get"+t](),s=Vn(e?"SHORT"+t:t);return i[s][o]}}function On(t){var e=-1*t.getTimezoneOffset(),n=e>=0?"+":"";return n+=Tn(Math[e>0?"floor":"ceil"](e/60),2)+Tn(Math.abs(e%60),2)}function Mn(t,e){return 12>t.getHours()?e.AMPMS[0]:e.AMPMS[1]}function Dn(t){function e(t){var e;if(e=t.match(n)){var i=new Date(0),o=0,s=0;return e[9]&&(o=c(e[9]+e[10]),s=c(e[9]+e[11])),i.setUTCFullYear(c(e[1]),c(e[2])-1,c(e[3])),i.setUTCHours(c(e[4]||0)-o,c(e[5]||0)-s,c(e[6]||0),c(e[7]||0)),i}return t}var n=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(n,i){var s,r,a="",l=[];if(i=i||"mediumDate",i=t.DATETIME_FORMATS[i]||i,y(n)&&(n=Hi.test(n)?c(n):e(n)),w(n)&&(n=new Date(n)),!$(n))return n;for(;i;)r=ki.exec(i),r?(l=_(l,r,1),i=l.pop()):(l.push(i),i=null);return o(l,function(e){s=Pi[e],a+=s?s(n,t.DATETIME_FORMATS):e.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),a}}function xn(){return function(t){return L(t,!0)}}function Pn(){return function(t,e){if(!(t instanceof Array))return t;e=c(e);var n,i,o=[];if(!(t&&t instanceof Array))return o;for(e>t.length?e=t.length:-t.length>e&&(e=-t.length),e>0?(n=0,i=e):(n=t.length+e,i=t.length);i>n;n++)o.push(t[n]);return o}}function kn(t){return function(e,n,i){function o(t,e){for(var i=0;n.length>i;i++){var o=n[i](t,e);if(0!==o)return o}return 0}function s(t,e){return U(e)?function(e,n){return t(n,e)}:t}function r(t,e){var n=typeof t,i=typeof e;return n==i?("string"==n&&(t=t.toLowerCase()),"string"==n&&(e=e.toLowerCase()),t===e?0:e>t?-1:1):i>n?-1:1}if(!E(e))return e;if(!n)return e;n=E(n)?n:[n],n=D(n,function(e){var n=!1,i=e||p;return y(e)&&(("+"==e.charAt(0)||"-"==e.charAt(0))&&(n="-"==e.charAt(0),e=e.substring(1)),i=t(e)),s(function(t,e){return r(i(t),i(e))},n)});for(var a=[],l=0;e.length>l;l++)a.push(e[l]);return a.sort(s(o,i))}}function Hn(t){return b(t)&&(t={link:t}),t.restrict=t.restrict||"AC",f(t)}function An(t,e){function n(e,n){n=n?"-"+X(n,"-"):"",t.removeClass((e?Zi:zi)+n).addClass((e?zi:Zi)+n)}var i=this,s=t.parent().controller("form")||Bi,r=0,a=i.$error={};i.$name=e.name,i.$dirty=!1,i.$pristine=!0,i.$valid=!0,i.$invalid=!1,s.$addControl(i),t.addClass(Gi),n(!0),i.$addControl=function(t){t.$name&&!i.hasOwnProperty(t.$name)&&(i[t.$name]=t)},i.$removeControl=function(t){t.$name&&i[t.$name]===t&&delete i[t.$name],o(a,function(e,n){i.$setValidity(n,!0,t)})},i.$setValidity=function(t,e,o){var l=a[t];if(e)l&&(k(l,o),l.length||(r--,r||(n(e),i.$valid=!0,i.$invalid=!1),a[t]=!1,n(!0,t),s.$setValidity(t,!0,i)));else{if(r||n(e),l){if(x(l,o))return}else a[t]=l=[],r++,n(!1,t),s.$setValidity(t,!1,i);l.push(o),i.$valid=!1,i.$invalid=!0}},i.$setDirty=function(){t.removeClass(Gi).addClass(Xi),i.$dirty=!0,i.$pristine=!1,s.$setDirty()}}function In(t){return g(t)||""===t||null===t||t!==t}function _n(t,e,i,o,s,r){var a=function(){var n=O(e.val());o.$viewValue!==n&&t.$apply(function(){o.$setViewValue(n)})};if(s.hasEvent("input"))e.bind("input",a);else{var l;e.bind("keydown",function(t){var e=t.keyCode;91===e||e>15&&19>e||e>=37&&40>=e||l||(l=r.defer(function(){a(),l=null}))}),e.bind("change",a)}o.$render=function(){e.val(In(o.$viewValue)?"":o.$viewValue)};var u,h=i.ngPattern,d=function(t,e){return In(e)||t.test(e)?(o.$setValidity("pattern",!0),e):(o.$setValidity("pattern",!1),n)};if(h&&(h.match(/^\/(.*)\/$/)?(h=RegExp(h.substr(1,h.length-2)),u=function(t){return d(h,t)}):u=function(e){var n=t.$eval(h);if(!n||!n.test)throw Error("Expected "+h+" to be a RegExp but was "+n);return d(n,e)},o.$formatters.push(u),o.$parsers.push(u)),i.ngMinlength){var p=c(i.ngMinlength),f=function(t){return!In(t)&&p>t.length?(o.$setValidity("minlength",!1),n):(o.$setValidity("minlength",!0),t)};o.$parsers.push(f),o.$formatters.push(f)}if(i.ngMaxlength){var g=c(i.ngMaxlength),m=function(t){return!In(t)&&t.length>g?(o.$setValidity("maxlength",!1),n):(o.$setValidity("maxlength",!0),t)};o.$parsers.push(m),o.$formatters.push(m)}}function Nn(t,e,i,o,s,r){if(_n(t,e,i,o,s,r),o.$parsers.push(function(t){var e=In(t);return e||Vi.test(t)?(o.$setValidity("number",!0),""===t?null:e?t:parseFloat(t)):(o.$setValidity("number",!1),n)}),o.$formatters.push(function(t){return In(t)?"":""+t}),i.min){var a=parseFloat(i.min),l=function(t){return!In(t)&&a>t?(o.$setValidity("min",!1),n):(o.$setValidity("min",!0),t)};o.$parsers.push(l),o.$formatters.push(l)}if(i.max){var u=parseFloat(i.max),c=function(t){return!In(t)&&t>u?(o.$setValidity("max",!1),n):(o.$setValidity("max",!0),t)};o.$parsers.push(c),o.$formatters.push(c)}o.$formatters.push(function(t){return In(t)||w(t)?(o.$setValidity("number",!0),t):(o.$setValidity("number",!1),n)})}function Bn(t,e,i,o,s,r){_n(t,e,i,o,s,r);var a=function(t){return In(t)||Ui.test(t)?(o.$setValidity("url",!0),t):(o.$setValidity("url",!1),n)};o.$formatters.push(a),o.$parsers.push(a)}function Rn(t,e,i,o,s,r){_n(t,e,i,o,s,r);var a=function(t){return In(t)||qi.test(t)?(o.$setValidity("email",!0),t):(o.$setValidity("email",!1),n)};o.$formatters.push(a),o.$parsers.push(a)}function Ln(t,e,n,i){g(n.name)&&e.attr("name",l()),e.bind("click",function(){e[0].checked&&t.$apply(function(){i.$setViewValue(n.value)})}),i.$render=function(){var t=n.value;e[0].checked=t==i.$viewValue},n.$observe("value",i.$render)}function jn(t,e,n,i){var o=n.ngTrueValue,s=n.ngFalseValue;y(o)||(o=!0),y(s)||(s=!1),e.bind("click",function(){t.$apply(function(){i.$setViewValue(e[0].checked)})}),i.$render=function(){e[0].checked=i.$viewValue},i.$formatters.push(function(t){return t===o}),i.$parsers.push(function(t){return t?o:s})}function Un(t,e){return t="ngClass"+t,Hn(function(i,o,s){function r(t){(e===!0||i.$index%2===e)&&(u&&t!==u&&a(u),l(t)),u=t}function a(t){v(t)&&!E(t)&&(t=D(t,function(t,e){return t?e:n})),o.removeClass(E(t)?t.join(" "):t)}function l(t){v(t)&&!E(t)&&(t=D(t,function(t,e){return t?e:n})),t&&o.addClass(E(t)?t.join(" "):t)}var u=n;i.$watch(s[t],r,!0),s.$observe("class",function(){var e=i.$eval(s[t]);r(e,e)}),"ngClass"!==t&&i.$watch("$index",function(n,o){var r=n%2;r!==o%2&&(r==e?l(i.$eval(s[t])):a(i.$eval(s[t])))})})}var qn=function(t){return y(t)?t.toLowerCase():t},Vn=function(t){return y(t)?t.toUpperCase():t},Fn=function(t){return y(t)?t.replace(/[A-Z]/g,function(t){return String.fromCharCode(32|t.charCodeAt(0))}):t},Wn=function(t){return y(t)?t.replace(/[a-z]/g,function(t){return String.fromCharCode(-33&t.charCodeAt(0))}):t};"i"!=="I".toLowerCase()&&(qn=Fn,Vn=Wn);var zn,Zn,Gn,Xn,Qn=c((/msie (\d+)/.exec(qn(navigator.userAgent))||[])[1]),Yn=[].slice,Jn=[].push,Kn=Object.prototype.toString,ti=t.angular||(t.angular={}),ei=["0","0","0"];d.$inject=[],p.$inject=[],Xn=9>Qn?function(t){return t=t.nodeName?t:t[0],t.scopeName&&"HTML"!=t.scopeName?Vn(t.scopeName+":"+t.nodeName):t.nodeName}:function(t){return t.nodeName?t.nodeName:t[0].nodeName};var ni=/[A-Z]/g,ii={full:"1.0.6",major:1,minor:0,dot:6,codeName:"universal-irreversibility"},oi=oe.cache={},si=oe.expando="ng-"+(new Date).getTime(),ri=1,ai=t.document.addEventListener?function(t,e,n){t.addEventListener(e,n,!1)}:function(t,e,n){t.attachEvent("on"+e,n)},li=t.document.removeEventListener?function(t,e,n){t.removeEventListener(e,n,!1)}:function(t,e,n){t.detachEvent("on"+e,n)},ui=/([\:\-\_]+(.))/g,ci=/^moz([A-Z])/,hi=oe.prototype={ready:function(e){function n(){i||(i=!0,e())}var i=!1;this.bind("DOMContentLoaded",n),oe(t).bind("load",n)},toString:function(){var t=[];return o(this,function(e){t.push(""+e)}),"["+t.join(", ")+"]"},eq:function(t){return t>=0?zn(this[t]):zn(this[this.length+t])},length:0,push:Jn,sort:[].sort,splice:[].splice},di={};o("multiple,selected,checked,disabled,readOnly,required".split(","),function(t){di[qn(t)]=t});var pi={};o("input,select,option,textarea,button,form".split(","),function(t){pi[Vn(t)]=!0}),o({data:ce,inheritedData:me,scope:function(t){return me(t,"$scope")},controller:ge,injector:function(t){return me(t,"$injector")},removeAttr:function(t,e){t.removeAttribute(e)},hasClass:he,css:function(t,e,i){if(e=ne(e),!m(i)){var o;return 8>=Qn&&(o=t.currentStyle&&t.currentStyle[e],""===o&&(o="auto")),o=o||t.style[e],8>=Qn&&(o=""===o?n:o),o}t.style[e]=i},attr:function(t,e,i){var o=qn(e);if(di[o]){if(!m(i))return t[e]||(t.attributes.getNamedItem(e)||d).specified?o:n;i?(t[e]=!0,t.setAttribute(e,o)):(t[e]=!1,t.removeAttribute(o))}else if(m(i))t.setAttribute(e,i);else if(t.getAttribute){var s=t.getAttribute(e,2);return null===s?n:s}},prop:function(t,e,i){return m(i)?(t[e]=i,n):t[e]},text:u(9>Qn?function(t,e){if(1==t.nodeType){if(g(e))return t.innerText;t.innerText=e}else{if(g(e))return t.nodeValue;t.nodeValue=e}}:function(t,e){return g(e)?t.textContent:(t.textContent=e,n)},{$dv:""}),val:function(t,e){return g(e)?t.value:(t.value=e,n)},html:function(t,e){if(g(e))return t.innerHTML;for(var n=0,i=t.childNodes;i.length>n;n++)re(i[n]);t.innerHTML=e}},function(t,e){oe.prototype[e]=function(e,i){var o,s;if((2==t.length&&t!==he&&t!==ge?e:i)!==n){for(o=0;this.length>o;o++)t(this[o],e,i);return this}if(v(e)){for(o=0;this.length>o;o++)if(t===ce)t(this[o],e);else for(s in e)t(this[o],s,e[s]);return this}return this.length?t(this[0],e,i):t.$dv}}),o({removeData:le,dealoc:re,bind:function fi(t,e,n){var i=ue(t,"events"),s=ue(t,"handle");i||ue(t,"events",i={}),s||ue(t,"handle",s=ye(t,i)),o(e.split(" "),function(e){var o=i[e];if(!o){if("mouseenter"==e||"mouseleave"==e){var r=0;i.mouseenter=[],i.mouseleave=[],fi(t,"mouseover",function(t){r++,1==r&&s(t,"mouseenter")}),fi(t,"mouseout",function(t){r--,0==r&&s(t,"mouseleave")})}else ai(t,e,s),i[e]=[];o=i[e]}o.push(n)})},unbind:ae,replaceWith:function(t,e){var n,i=t.parentNode;re(t),o(new oe(e),function(e){n?i.insertBefore(e,n.nextSibling):i.replaceChild(e,t),n=e})},children:function(t){var e=[];return o(t.childNodes,function(t){1===t.nodeType&&e.push(t)}),e},contents:function(t){return t.childNodes||[]},append:function(t,e){o(new oe(e),function(e){1===t.nodeType&&t.appendChild(e)})},prepend:function(t,e){if(1===t.nodeType){var n=t.firstChild;o(new oe(e),function(e){n?t.insertBefore(e,n):(t.appendChild(e),n=e)})}},wrap:function(t,e){e=zn(e)[0];var n=t.parentNode;n&&n.replaceChild(e,t),e.appendChild(t)},remove:function(t){re(t);var e=t.parentNode;e&&e.removeChild(t)},after:function(t,e){var n=t,i=t.parentNode;o(new oe(e),function(t){i.insertBefore(t,n.nextSibling),n=t})},addClass:pe,removeClass:de,toggleClass:function(t,e,n){g(n)&&(n=!he(t,e)),(n?pe:de)(t,e)},parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},next:function(t){if(t.nextElementSibling)return t.nextElementSibling;for(var e=t.nextSibling;null!=e&&1!==e.nodeType;)e=e.nextSibling;return e},find:function(t,e){return t.getElementsByTagName(e)},clone:se,triggerHandler:function(t,e){var n=(ue(t,"events")||{})[e];o(n,function(e){e.call(t,null)})}},function(t,e){oe.prototype[e]=function(e,i){for(var o,s=0;this.length>s;s++)o==n?(o=t(this[s],e,i),o!==n&&(o=zn(o))):fe(o,t(this[s],e,i));return o==n?this:o}}),$e.prototype={put:function(t,e){this[we(t)]=e},get:function(t){return this[we(t)]},remove:function(t){var e=this[t=we(t)];return delete this[t],e}},Ee.prototype={push:function(t,e){var n=this[t=we(t)];n?n.push(e):this[t]=[e]},shift:function(t){var e=this[t=we(t)];return e?1==e.length?(delete this[t],e[0]):e.shift():n},peek:function(t){var e=this[we(t)];
return e?e[0]:n}};var gi=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,mi=/,/,vi=/^\s*(_?)(\S+?)\1\s*$/,yi=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,wi="Non-assignable model expression: ";xe.$inject=["$provide"];var $i=/^(x[\:\-_]|data[\:\-_])/i,Ei=/^([^:]+):\/\/(\w+:{0,1}\w*@)?(\{?[\w\.-]*\}?)(:([0-9]+))?(\/[^\?#]*)?(\?([^#]*))?(#(.*))?$/,bi=/^([^\?#]*)?(\?([^#]*))?(#(.*))?$/,Ti=bi,Si={http:80,https:443,ftp:21};Ue.prototype={$$replace:!1,absUrl:Fe("$$absUrl"),url:function(t,e){if(g(t))return this.$$url;var n=bi.exec(t);return n[1]&&this.path(decodeURIComponent(n[1])),(n[2]||n[1])&&this.search(n[3]||""),this.hash(n[5]||"",e),this},protocol:Fe("$$protocol"),host:Fe("$$host"),port:Fe("$$port"),path:We("$$path",function(t){return"/"==t.charAt(0)?t:"/"+t}),search:function(t,e){return g(t)?this.$$search:(m(e)?null===e?delete this.$$search[t]:this.$$search[t]=e:this.$$search=y(t)?V(t):t,this.$$compose(),this)},hash:We("$$hash",p),replace:function(){return this.$$replace=!0,this}},qe.prototype=h(Ue.prototype),Ve.prototype=h(qe.prototype);var Ci={"null":function(){return null},"true":function(){return!0},"false":function(){return!1},undefined:d,"+":function(t,e,i,o){return i=i(t,e),o=o(t,e),m(i)?m(o)?i+o:i:m(o)?o:n},"-":function(t,e,n,i){return n=n(t,e),i=i(t,e),(m(n)?n:0)-(m(i)?i:0)},"*":function(t,e,n,i){return n(t,e)*i(t,e)},"/":function(t,e,n,i){return n(t,e)/i(t,e)},"%":function(t,e,n,i){return n(t,e)%i(t,e)},"^":function(t,e,n,i){return n(t,e)^i(t,e)},"=":d,"==":function(t,e,n,i){return n(t,e)==i(t,e)},"!=":function(t,e,n,i){return n(t,e)!=i(t,e)},"<":function(t,e,n,i){return n(t,e)<i(t,e)},">":function(t,e,n,i){return n(t,e)>i(t,e)},"<=":function(t,e,n,i){return n(t,e)<=i(t,e)},">=":function(t,e,n,i){return n(t,e)>=i(t,e)},"&&":function(t,e,n,i){return n(t,e)&&i(t,e)},"||":function(t,e,n,i){return n(t,e)||i(t,e)},"&":function(t,e,n,i){return n(t,e)&i(t,e)},"|":function(t,e,n,i){return i(t,e)(t,e,n(t,e))},"!":function(t,e,n){return!n(t,e)}},Oi={n:"\n",f:"\f",r:"\r",t:"	",v:"","'":"'",'"':'"'},Mi={},Di=t.XMLHttpRequest||function(){try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(n){}throw Error("This browser does not support XMLHttpRequest.")};yn.$inject=["$provide"],$n.$inject=["$locale"],En.$inject=["$locale"];var xi=".",Pi={yyyy:Sn("FullYear",4),yy:Sn("FullYear",2,0,!0),y:Sn("FullYear",1),MMMM:Cn("Month"),MMM:Cn("Month",!0),MM:Sn("Month",2,1),M:Sn("Month",1,1),dd:Sn("Date",2),d:Sn("Date",1),HH:Sn("Hours",2),H:Sn("Hours",1),hh:Sn("Hours",2,-12),h:Sn("Hours",1,-12),mm:Sn("Minutes",2),m:Sn("Minutes",1),ss:Sn("Seconds",2),s:Sn("Seconds",1),EEEE:Cn("Day"),EEE:Cn("Day",!0),a:Mn,Z:On},ki=/((?:[^yMdHhmsaZE']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z))(.*)/,Hi=/^\d+$/;Dn.$inject=["$locale"];var Ai=f(qn),Ii=f(Vn);kn.$inject=["$parse"];var _i=f({restrict:"E",compile:function(t,n){return 8>=Qn&&(n.href||n.name||n.$set("href",""),t.append(e.createComment("IE fix"))),function(t,e){e.bind("click",function(t){e.attr("href")||t.preventDefault()})}}}),Ni={};o(di,function(t,e){var n=Pe("ng-"+e);Ni[n]=function(){return{priority:100,compile:function(){return function(t,i,o){t.$watch(o[n],function(t){o.$set(e,!!t)})}}}}}),o(["src","href"],function(t){var e=Pe("ng-"+t);Ni[e]=function(){return{priority:99,link:function(n,i,o){o.$observe(e,function(e){e&&(o.$set(t,e),Qn&&i.prop(t,o[t]))})}}}});var Bi={$addControl:d,$removeControl:d,$setValidity:d,$setDirty:d};An.$inject=["$element","$attrs","$scope"];var Ri=function(t){return["$timeout",function(e){var i={name:"form",restrict:"E",controller:An,compile:function(){return{pre:function(t,i,o,s){if(!o.action){var r=function(t){t.preventDefault?t.preventDefault():t.returnValue=!1};ai(i[0],"submit",r),i.bind("$destroy",function(){e(function(){li(i[0],"submit",r)},0,!1)})}var a=i.parent().controller("form"),l=o.name||o.ngForm;l&&(t[l]=s),a&&i.bind("$destroy",function(){a.$removeControl(s),l&&(t[l]=n),u(s,Bi)})}}}};return t?u(H(i),{restrict:"EAC"}):i}]},Li=Ri(),ji=Ri(!0),Ui=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,qi=/^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,4}$/,Vi=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))\s*$/,Fi={text:_n,number:Nn,url:Bn,email:Rn,radio:Ln,checkbox:jn,hidden:d,button:d,submit:d,reset:d},Wi=["$browser","$sniffer",function(t,e){return{restrict:"E",require:"?ngModel",link:function(n,i,o,s){s&&(Fi[qn(o.type)]||Fi.text)(n,i,o,s,e,t)}}}],zi="ng-valid",Zi="ng-invalid",Gi="ng-pristine",Xi="ng-dirty",Qi=["$scope","$exceptionHandler","$attrs","$element","$parse",function(t,e,n,i,s){function r(t,e){e=e?"-"+X(e,"-"):"",i.removeClass((t?Zi:zi)+e).addClass((t?zi:Zi)+e)}this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$name=n.name;var a=s(n.ngModel),l=a.assign;if(!l)throw Error(wi+n.ngModel+" ("+q(i)+")");this.$render=d;var u=i.inheritedData("$formController")||Bi,c=0,h=this.$error={};i.addClass(Gi),r(!0),this.$setValidity=function(t,e){h[t]!==!e&&(e?(h[t]&&c--,c||(r(!0),this.$valid=!0,this.$invalid=!1)):(r(!1),this.$invalid=!0,this.$valid=!1,c++),h[t]=!e,r(e,t),u.$setValidity(t,e,this))},this.$setViewValue=function(n){this.$viewValue=n,this.$pristine&&(this.$dirty=!0,this.$pristine=!1,i.removeClass(Gi).addClass(Xi),u.$setDirty()),o(this.$parsers,function(t){n=t(n)}),this.$modelValue!==n&&(this.$modelValue=n,l(t,n),o(this.$viewChangeListeners,function(t){try{t()}catch(n){e(n)}}))};var p=this;t.$watch(function(){var e=a(t);if(p.$modelValue!==e){var n=p.$formatters,i=n.length;for(p.$modelValue=e;i--;)e=n[i](e);p.$viewValue!==e&&(p.$viewValue=e,p.$render())}})}],Yi=function(){return{require:["ngModel","^?form"],controller:Qi,link:function(t,e,n,i){var o=i[0],s=i[1]||Bi;s.$addControl(o),e.bind("$destroy",function(){s.$removeControl(o)})}}},Ji=f({require:"ngModel",link:function(t,e,n,i){i.$viewChangeListeners.push(function(){t.$eval(n.ngChange)})}}),Ki=function(){return{require:"?ngModel",link:function(t,e,i,o){if(o){i.required=!0;var s=function(t){return i.required&&(In(t)||t===!1)?(o.$setValidity("required",!1),n):(o.$setValidity("required",!0),t)};o.$formatters.push(s),o.$parsers.unshift(s),i.$observe("required",function(){s(o.$viewValue)})}}}},to=function(){return{require:"ngModel",link:function(t,e,i,s){var r=/\/(.*)\//.exec(i.ngList),a=r&&RegExp(r[1])||i.ngList||",",l=function(t){var e=[];return t&&o(t.split(a),function(t){t&&e.push(O(t))}),e};s.$parsers.push(l),s.$formatters.push(function(t){return E(t)?t.join(", "):n})}}},eo=/^(true|false|\d+)$/,no=function(){return{priority:100,compile:function(t,e){return eo.test(e.ngValue)?function(t,e,n){n.$set("value",t.$eval(n.ngValue))}:function(t,e,n){t.$watch(n.ngValue,function(t){n.$set("value",t,!1)})}}}},io=Hn(function(t,e,i){e.addClass("ng-binding").data("$binding",i.ngBind),t.$watch(i.ngBind,function(t){e.text(t==n?"":t)})}),oo=["$interpolate",function(t){return function(e,n,i){var o=t(n.attr(i.$attr.ngBindTemplate));n.addClass("ng-binding").data("$binding",o),i.$observe("ngBindTemplate",function(t){n.text(t)})}}],so=[function(){return function(t,e,n){e.addClass("ng-binding").data("$binding",n.ngBindHtmlUnsafe),t.$watch(n.ngBindHtmlUnsafe,function(t){e.html(t||"")})}}],ro=Un("",!0),ao=Un("Odd",0),lo=Un("Even",1),uo=Hn({compile:function(t,e){e.$set("ngCloak",n),t.removeClass("ng-cloak")}}),co=[function(){return{scope:!0,controller:"@"}}],ho=["$sniffer",function(t){return{priority:1e3,compile:function(){t.csp=!0}}}],po={};o("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave".split(" "),function(t){var e=Pe("ng-"+t);po[e]=["$parse",function(n){return function(i,o,s){var r=n(s[e]);o.bind(qn(t),function(t){i.$apply(function(){r(i,{$event:t})})})}}]});var fo=Hn(function(t,e,n){e.bind("submit",function(){t.$apply(n.ngSubmit)})}),go=["$http","$templateCache","$anchorScroll","$compile",function(t,e,n,i){return{restrict:"ECA",terminal:!0,compile:function(o,s){var r=s.ngInclude||s.src,a=s.onload||"",l=s.autoscroll;return function(o,s){var u,c=0,h=function(){u&&(u.$destroy(),u=null),s.html("")};o.$watch(r,function(r){var d=++c;r?t.get(r,{cache:e}).success(function(t){d===c&&(u&&u.$destroy(),u=o.$new(),s.html(t),i(s.contents())(u),!m(l)||l&&!o.$eval(l)||n(),u.$emit("$includeContentLoaded"),o.$eval(a))}).error(function(){d===c&&h()}):h()})}}}}],mo=Hn({compile:function(){return{pre:function(t,e,n){t.$eval(n.ngInit)}}}}),vo=Hn({terminal:!0,priority:1e3}),yo=["$locale","$interpolate",function(t,e){var n=/{}/g;return{restrict:"EA",link:function(i,s,r){var a=r.count,l=s.attr(r.$attr.when),u=r.offset||0,c=i.$eval(l),h={},d=e.startSymbol(),p=e.endSymbol();o(c,function(t,i){h[i]=e(t.replace(n,d+a+"-"+u+p))}),i.$watch(function(){var e=parseFloat(i.$eval(a));return isNaN(e)?"":(c[e]||(e=t.pluralCat(e-u)),h[e](i,s,!0))},function(t){s.text(t)})}}}],wo=Hn({transclude:"element",priority:1e3,terminal:!0,compile:function(t,e,n){return function(t,e,i){var o,s,r,a,l=i.ngRepeat,u=l.match(/^\s*(.+)\s+in\s+(.*)\s*$/);if(!u)throw Error("Expected ngRepeat in form of '_item_ in _collection_' but got '"+l+"'.");if(o=u[1],s=u[2],u=o.match(/^(?:([\$\w]+)|\(([\$\w]+)\s*,\s*([\$\w]+)\))$/),!u)throw Error("'item' in 'item in collection' should be identifier or (key, value) but got '"+o+"'.");r=u[3]||u[1],a=u[2];var c=new Ee;t.$watch(function(t){var i,o,l,u,h,d,p,f,g=t.$eval(s),m=e,v=new Ee;if(E(g))p=g||[];else{p=[];for(h in g)g.hasOwnProperty(h)&&"$"!=h.charAt(0)&&p.push(h);p.sort()}for(l=p.length-1,i=0,o=p.length;o>i;i++)h=g===p?i:p[i],d=g[h],f=c.shift(d),f?(u=f.scope,v.push(d,f),i===f.index?m=f.element:(f.index=i,m.after(f.element),m=f.element)):u=t.$new(),u[r]=d,a&&(u[a]=h),u.$index=i,u.$first=0===i,u.$last=i===l,u.$middle=!(u.$first||u.$last),f||n(u,function(t){m.after(t),f={scope:u,element:m=t,index:i},v.push(d,f)});for(h in c)if(c.hasOwnProperty(h))for(p=c[h];p.length;)d=p.pop(),d.element.remove(),d.scope.$destroy();c=v})}}}),$o=Hn(function(t,e,n){t.$watch(n.ngShow,function(t){e.css("display",U(t)?"":"none")})}),Eo=Hn(function(t,e,n){t.$watch(n.ngHide,function(t){e.css("display",U(t)?"none":"")})}),bo=Hn(function(t,e,n){t.$watch(n.ngStyle,function(t,n){n&&t!==n&&o(n,function(t,n){e.css(n,"")}),t&&e.css(t)},!0)}),To=f({restrict:"EA",require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(t,e,n,i){var o,s,r,a=n.ngSwitch||n.on;t.$watch(a,function(a){s&&(r.$destroy(),s.remove(),s=r=null),(o=i.cases["!"+a]||i.cases["?"])&&(t.$eval(n.change),r=t.$new(),o(r,function(t){s=t,e.append(t)}))})}}),So=Hn({transclude:"element",priority:500,require:"^ngSwitch",compile:function(t,e,n){return function(t,i,o,s){s.cases["!"+e.ngSwitchWhen]=n}}}),Co=Hn({transclude:"element",priority:500,require:"^ngSwitch",compile:function(t,e,n){return function(t,e,i,o){o.cases["?"]=n}}}),Oo=Hn({controller:["$transclude","$element",function(t,e){t(function(t){e.append(t)})}]}),Mo=["$http","$templateCache","$route","$anchorScroll","$compile","$controller",function(t,e,n,i,o,s){return{restrict:"ECA",terminal:!0,link:function(t,e,r){function a(){c&&(c.$destroy(),c=null)}function l(){e.html(""),a()}function u(){var r=n.current&&n.current.locals,u=r&&r.$template;if(u){e.html(u),a();var d,p=o(e.contents()),f=n.current;c=f.scope=t.$new(),f.controller&&(r.$scope=c,d=s(f.controller,r),e.children().data("$ngControllerController",d)),p(c),c.$emit("$viewContentLoaded"),c.$eval(h),i()}else l()}var c,h=r.onload||"";t.$on("$routeChangeSuccess",u),u()}}}],Do=["$templateCache",function(t){return{restrict:"E",terminal:!0,compile:function(e,n){if("text/ng-template"==n.type){var i=n.id,o=e[0].text;t.put(i,o)}}}}],xo=f({terminal:!0}),Po=["$compile","$parse",function(t,i){var r=/^\s*(.*?)(?:\s+as\s+(.*?))?(?:\s+group\s+by\s+(.*))?\s+for\s+(?:([\$\w][\$\w\d]*)|(?:\(\s*([\$\w][\$\w\d]*)\s*,\s*([\$\w][\$\w\d]*)\s*\)))\s+in\s+(.*)$/,a={$setViewValue:d};return{restrict:"E",require:["select","?ngModel"],controller:["$element","$scope","$attrs",function(t,e,n){var i,o,s=this,r={},l=a;s.databound=n.ngModel,s.init=function(t,e,n){l=t,i=e,o=n},s.addOption=function(e){r[e]=!0,l.$viewValue==e&&(t.val(e),o.parent()&&o.remove())},s.removeOption=function(t){this.hasOption(t)&&(delete r[t],l.$viewValue==t&&this.renderUnknownOption(t))},s.renderUnknownOption=function(e){var n="? "+we(e)+" ?";o.val(n),t.prepend(o),t.val(n),o.prop("selected",!0)},s.hasOption=function(t){return r.hasOwnProperty(t)},e.$on("$destroy",function(){s.renderUnknownOption=d})}],link:function(a,l,u,c){function h(t,e,n,i){n.$render=function(){var t=n.$viewValue;i.hasOption(t)?(S.parent()&&S.remove(),e.val(t),""===t&&f.prop("selected",!0)):g(t)&&f?e.val(""):i.renderUnknownOption(t)},e.bind("change",function(){t.$apply(function(){S.parent()&&S.remove(),n.$setViewValue(e.val())})})}function d(t,e,n){var i;n.$render=function(){var t=new $e(n.$viewValue);o(e.find("option"),function(e){e.selected=m(t.get(e.value))})},t.$watch(function(){I(i,n.$viewValue)||(i=H(n.$viewValue),n.$render())}),e.bind("change",function(){t.$apply(function(){var t=[];o(e.find("option"),function(e){e.selected&&t.push(e.value)}),n.$setViewValue(t)})})}function p(e,o,a){function l(){var t,i,r,l,u,v,y,$,S,C,O,M,D,x,P={"":[]},k=[""],H=a.$modelValue,A=g(e)||[],I=d?s(A):A,_={},N=!1;for(w?N=new $e(H):(null===H||E)&&(P[""].push({selected:null===H,id:"",label:""}),N=!0),C=0;$=I.length,$>C;C++)_[h]=A[d?_[d]=I[C]:C],t=p(e,_)||"",(i=P[t])||(i=P[t]=[],k.push(t)),w?O=N.remove(f(e,_))!=n:(O=H===f(e,_),N=N||O),x=c(e,_),x=x===n?"":x,i.push({id:d?I[C]:C,label:x,selected:O});for(w||N||P[""].unshift({id:"?",label:"",selected:!0}),S=0,y=k.length;y>S;S++){for(t=k[S],i=P[t],S>=m.length?(l={element:T.clone().attr("label",t),label:i.label},u=[l],m.push(u),o.append(l.element)):(u=m[S],l=u[0],l.label!=t&&l.element.attr("label",l.label=t)),M=null,C=0,$=i.length;$>C;C++)r=i[C],(v=u[C+1])?(M=v.element,v.label!==r.label&&M.text(v.label=r.label),v.id!==r.id&&M.val(v.id=r.id),v.element.selected!==r.selected&&M.prop("selected",v.selected=r.selected)):(""===r.id&&E?D=E:(D=b.clone()).val(r.id).attr("selected",r.selected).text(r.label),u.push(v={element:D,label:r.label,id:r.id,selected:r.selected}),M?M.after(D):l.element.append(D),M=D);for(C++;u.length>C;)u.pop().element.remove()}for(;m.length>S;)m.pop()[0].element.remove()}var u;if(!(u=$.match(r)))throw Error("Expected ngOptions in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '"+$+"'.");var c=i(u[2]||u[1]),h=u[4]||u[6],d=u[5],p=i(u[3]||""),f=i(u[2]?u[1]:h),g=i(u[7]),m=[[{element:o,label:""}]];E&&(t(E)(e),E.removeClass("ng-scope"),E.remove()),o.html(""),o.bind("change",function(){e.$apply(function(){var t,i,s,r,l,u,c,p,v=g(e)||[],y={};if(w)for(s=[],u=0,p=m.length;p>u;u++)for(t=m[u],l=1,c=t.length;c>l;l++)(r=t[l].element)[0].selected&&(i=r.val(),d&&(y[d]=i),y[h]=v[i],s.push(f(e,y)));else i=o.val(),"?"==i?s=n:""==i?s=null:(y[h]=v[i],d&&(y[d]=i),s=f(e,y));a.$setViewValue(s)})}),a.$render=l,e.$watch(l)}if(c[1]){for(var f,v=c[0],y=c[1],w=u.multiple,$=u.ngOptions,E=!1,b=zn(e.createElement("option")),T=zn(e.createElement("optgroup")),S=b.clone(),C=0,O=l.children(),M=O.length;M>C;C++)if(""==O[C].value){f=E=O.eq(C);break}if(v.init(y,E,S),w&&(u.required||u.ngRequired)){var D=function(t){return y.$setValidity("required",!u.required||t&&t.length),t};y.$parsers.push(D),y.$formatters.unshift(D),u.$observe("required",function(){D(y.$viewValue)})}$?p(a,l,y):w?d(a,l,y):h(a,l,y,v)}}}}],ko=["$interpolate",function(t){var e={addOption:d,removeOption:d};return{restrict:"E",priority:100,compile:function(n,i){if(g(i.value)){var o=t(n.text(),!0);o||i.$set("value",n.text())}return function(t,n,i){var s="$selectController",r=n.parent(),a=r.data(s)||r.parent().data(s);a&&a.databound?n.prop("selected",!1):a=e,o?t.$watch(o,function(t,e){i.$set("value",t),t!==e&&a.removeOption(e),a.addOption(t)}):a.addOption(i.value),n.bind("$destroy",function(){a.removeOption(i.value)})}}}}],Ho=f({restrict:"E",terminal:!0});Q(),te(ti),zn(e).ready(function(){Z(e,G)})})(window,document),angular.element(document).find("head").append('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak{display:none;}ng\\:form{display:block;}</style>'),define("components/angular/angular",function(t){return function(){var e;return e||t.angular}}(this)),!function(t,e){function n(t,e){function n(){}n[l]=this[l];var o=this,s=new n,r=u(t),a=r?t:this,c=r?{}:t,h=function(){this.initialize?this.initialize.apply(this,arguments):(e||r&&o.apply(this,arguments),a.apply(this,arguments))};return h.methods=function(t){return i(s,t,o),h[l]=s,this},h.methods.call(h,c).prototype.constructor=h,h.extend=arguments.callee,h[l].implement=h.statics=function(t,e){return t="string"==typeof t?function(){var n={};return n[t]=e,n}():t,i(this,t,o),this},h}function i(t,e,n){for(var i in e)e.hasOwnProperty(i)&&(t[i]=u(e[i])&&u(n[l][i])&&r.test(e[i])?o(i,e[i],n):e[i])}function o(t,e,n){return function(){var i=this.supr;this.supr=n[l][t];var o=e.apply(this,arguments);return this.supr=i,o}}function s(t){return n.call(u(t)?t:a,t,1)}var r=/xyz/.test(function(){})?/\bsupr\b/:/.*/,a=function(){},l="prototype",u=function(t){return typeof t===e};if("undefined"!=typeof module&&module.exports)module.exports=s;else{var c=t.klass;s.noConflict=function(){return t.klass=c,this},t.klass=s}}(this,"function"),define("components/photoswipe/release/3.0.3/lib/klass.min",function(t){return function(){var e;return e||t.klass}}(this)),function(t){Function.prototype.bind||(Function.prototype.bind=function(t){var e=[].slice,n=e.call(arguments,1),i=this,o=function(){},s=function(){return i.apply(this instanceof o?this:t||{},n.concat(e.call(arguments)))};return o.prototype=i.prototype,s.prototype=new o,s}),t.Code===void 0&&(t.Code={}),t.Code.Util={registerNamespace:function(){var e,n,i,o,s,r=arguments,a=null;for(e=0,o=r.length;o>e;e++)for(i=r[e],i=i.split("."),a=i[0],t[a]===void 0&&(t[a]={}),a=t[a],n=1,s=i.length;s>n;++n)a[i[n]]=a[i[n]]||{},a=a[i[n]]},coalesce:function(){var t,e;for(t=0,e=arguments.length;e>t;t++)if(!this.isNothing(arguments[t]))return arguments[t];return null},extend:function(t,e,n){var i;if(this.isNothing(n)&&(n=!0),t&&e&&this.isObject(e))for(i in e)this.objectHasProperty(e,i)&&(n?t[i]=e[i]:t[i]===void 0&&(t[i]=e[i]))},clone:function(t){var e={};return this.extend(e,t),e},isObject:function(t){return t instanceof Object},isFunction:function(t){return"[object Function]"==={}.toString.call(t)},isArray:function(t){return t instanceof Array},isLikeArray:function(t){return"number"==typeof t.length},isNumber:function(t){return"number"==typeof t},isString:function(t){return"string"==typeof t},isNothing:function(t){return t===void 0||null===t?!0:!1},swapArrayElements:function(t,e,n){var i=t[e];t[e]=t[n],t[n]=i},trim:function(t){return t.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},toCamelCase:function(t){return t.replace(/(\-[a-z])/g,function(t){return t.toUpperCase().replace("-","")})},toDashedCase:function(t){return t.replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase()})},arrayIndexOf:function(t,e,n){var i,o,s,r;for(s=-1,i=0,o=e.length;o>i;i++)if(r=e[i],this.isNothing(n)){if(r===t){s=i;break}}else if(this.objectHasProperty(r,n)&&r[n]===t){s=i;break}return s},objectHasProperty:function(t,e){return t.hasOwnProperty?t.hasOwnProperty(e):t[e]!==void 0}}}(window),function(t,e){e.Browser={ua:null,version:null,safari:null,webkit:null,opera:null,msie:null,chrome:null,mozilla:null,android:null,blackberry:null,iPad:null,iPhone:null,iPod:null,iOS:null,is3dSupported:null,isCSSTransformSupported:null,isTouchSupported:null,isGestureSupported:null,_detect:function(){this.ua=t.navigator.userAgent,this.version=this.ua.match(/.+(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[],this.safari=/Safari/gi.test(t.navigator.appVersion),this.webkit=/webkit/i.test(this.ua),this.opera=/opera/i.test(this.ua),this.msie=/msie/i.test(this.ua)&&!this.opera,this.chrome=/Chrome/i.test(this.ua),this.firefox=/Firefox/i.test(this.ua),this.fennec=/Fennec/i.test(this.ua),this.mozilla=/mozilla/i.test(this.ua)&&!/(compatible|webkit)/.test(this.ua),this.android=/android/i.test(this.ua),this.blackberry=/blackberry/i.test(this.ua),this.iOS=/iphone|ipod|ipad/gi.test(t.navigator.platform),this.iPad=/ipad/gi.test(t.navigator.platform),this.iPhone=/iphone/gi.test(t.navigator.platform),this.iPod=/ipod/gi.test(t.navigator.platform);var n=document.createElement("div");this.is3dSupported=!e.isNothing(n.style.WebkitPerspective),this.isCSSTransformSupported=!e.isNothing(n.style.WebkitTransform)||!e.isNothing(n.style.MozTransform)||!e.isNothing(n.style.transformProperty),this.isTouchSupported=this.isEventSupported("touchstart"),this.isGestureSupported=this.isEventSupported("gesturestart")},_eventTagNames:{select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"},isEventSupported:function(t){var n,i=document.createElement(this._eventTagNames[t]||"div"),t="on"+t;return n=e.objectHasProperty(i,t),n||(i.setAttribute(t,"return;"),n="function"==typeof i[t]),n},isLandscape:function(){return e.DOM.windowWidth()>e.DOM.windowHeight()}},e.Browser._detect()}(window,window.Code.Util),function(t,e){e.extend(e,{Events:{add:function(t,e,n){this._checkHandlersProperty(t),"mousewheel"===e&&(e=this._normaliseMouseWheelType()),t.__eventHandlers[e]===void 0&&(t.__eventHandlers[e]=[]),t.__eventHandlers[e].push(n),this._isBrowserObject(t)&&t.addEventListener(e,n,!1)},remove:function(t,n,i){if(this._checkHandlersProperty(t),"mousewheel"===n&&(n=this._normaliseMouseWheelType()),t.__eventHandlers[n]instanceof Array){var o,s,r=t.__eventHandlers[n];if(e.isNothing(i)){if(this._isBrowserObject(t))for(o=0,s=r.length;s>o;o++)t.removeEventListener(n,r[o],!1);t.__eventHandlers[n]=[]}else{for(o=0,s=r.length;s>o;o++)if(r[o]===i){r.splice(o,1);break}this._isBrowserObject(t)&&t.removeEventListener(n,i,!1)}}},fire:function(n,i){var o,s,r,a,l=Array.prototype.slice.call(arguments).splice(2);if("mousewheel"===i&&(i=this._normaliseMouseWheelType()),this._isBrowserObject(n)){if("string"!=typeof i)throw"type must be a string for DOM elements";if(r=this._NATIVE_EVENTS[i],o=document.createEvent(r?"HTMLEvents":"UIEvents"),o[r?"initEvent":"initUIEvent"](i,!0,!0,t,1),1>l.length)return n.dispatchEvent(o),void 0}if(this._checkHandlersProperty(n),o="string"==typeof i?{type:i}:i,o.target||(o.target=n),!o.type)throw Error("Event object missing 'type' property.");if(n.__eventHandlers[o.type]instanceof Array)for(r=n.__eventHandlers[o.type],l.unshift(o),o=0,s=r.length;s>o;o++)a=r[o],e.isNothing(a)||a.apply(n,l)},getMousePosition:function(t){var e={x:0,y:0};return t.pageX?e.x=t.pageX:t.clientX&&(e.x=t.clientX+(document.documentElement.scrollLeft||document.body.scrollLeft)),t.pageY?e.y=t.pageY:t.clientY&&(e.y=t.clientY+(document.documentElement.scrollTop||document.body.scrollTop)),e},getTouchEvent:function(t){return t},getWheelDelta:function(t){var n=0;return e.isNothing(t.wheelDelta)?e.isNothing(t.detail)||(n=-t.detail/3):n=t.wheelDelta/120,n},domReady:function(t){document.addEventListener("DOMContentLoaded",t,!1)},_checkHandlersProperty:function(t){e.isNothing(t.__eventHandlers)&&e.extend(t,{__eventHandlers:{}})},_isBrowserObject:function(e){return e===t||e===t.document?!0:this._isElement(e)||this._isNode(e)},_isElement:function(e){return"object"==typeof t.HTMLElement?e instanceof t.HTMLElement:"object"==typeof e&&1===e.nodeType&&"string"==typeof e.nodeName},_isNode:function(e){return"object"==typeof t.Node?e instanceof t.Node:"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName},_normaliseMouseWheelType:function(){return e.Browser.isEventSupported("mousewheel")?"mousewheel":"DOMMouseScroll"},_NATIVE_EVENTS:{click:1,dblclick:1,mouseup:1,mousedown:1,contextmenu:1,mousewheel:1,DOMMouseScroll:1,mouseover:1,mouseout:1,mousemove:1,selectstart:1,selectend:1,keydown:1,keypress:1,keyup:1,orientationchange:1,touchstart:1,touchmove:1,touchend:1,touchcancel:1,gesturestart:1,gesturechange:1,gestureend:1,focus:1,blur:1,change:1,reset:1,select:1,submit:1,load:1,unload:1,beforeunload:1,resize:1,move:1,DOMContentLoaded:1,readystatechange:1,error:1,abort:1,scroll:1}}})}(window,window.Code.Util),function(t,e){e.extend(e,{DOM:{setData:function(t,n,i){if(e.isLikeArray(t)){var o,s;for(o=0,s=t.length;s>o;o++)e.DOM._setData(t[o],n,i)}else e.DOM._setData(t,n,i)},_setData:function(t,n,i){e.DOM.setAttribute(t,"data-"+n,i)},getData:function(t,n,i){return e.DOM.getAttribute(t,"data-"+n,i)},removeData:function(t,n){if(e.isLikeArray(t)){var i,o;for(i=0,o=t.length;o>i;i++)e.DOM._removeData(t[i],n)}else e.DOM._removeData(t,n)},_removeData:function(t,n){e.DOM.removeAttribute(t,"data-"+n)},isChildOf:function(t,e){if(e===t)return!1;for(;t&&t!==e;)t=t.parentNode;return t===e},find:function(n,i){e.isNothing(i)&&(i=t.document);var o,s,r=i.querySelectorAll(n),a=[];for(o=0,s=r.length;s>o;o++)a.push(r[o]);return a},createElement:function(t,n,i){var o,t=document.createElement(t);for(o in n)e.objectHasProperty(n,o)&&t.setAttribute(o,n[o]);return t.innerHTML=i||"",t},appendChild:function(t,e){e.appendChild(t)},insertBefore:function(t,e,n){n.insertBefore(t,e)},appendText:function(t,n){e.DOM.appendChild(document.createTextNode(t),n)},appendToBody:function(t){this.appendChild(t,document.body)},removeChild:function(t,e){e.removeChild(t)},removeChildren:function(t){if(t.hasChildNodes())for(;t.childNodes.length>=1;)t.removeChild(t.childNodes[t.childNodes.length-1])},hasAttribute:function(t,n){return!e.isNothing(t.getAttribute(n))},getAttribute:function(t,n,i){return t=t.getAttribute(n),e.isNothing(t)&&!e.isNothing(i)&&(t=i),t},setAttribute:function(t,n,i){if(e.isLikeArray(t)){var o,s;for(o=0,s=t.length;s>o;o++)e.DOM._setAttribute(t[o],n,i)}else e.DOM._setAttribute(t,n,i)},_setAttribute:function(t,e,n){t.setAttribute(e,n)},removeAttribute:function(t,n){if(e.isLikeArray(t)){var i,o;for(i=0,o=t.length;o>i;i++)e.DOM._removeAttribute(t[i],n)}else e.DOM._removeAttribute(t,n)},_removeAttribute:function(t,e){this.hasAttribute(t,e)&&t.removeAttribute(e)},addClass:function(t,n){if(e.isLikeArray(t)){var i,o;for(i=0,o=t.length;o>i;i++)e.DOM._addClass(t[i],n)}else e.DOM._addClass(t,n)},_addClass:function(t,n){var i=e.DOM.getAttribute(t,"class","");RegExp("(?:^|\\s+)"+n+"(?:\\s+|$)").test(i)||(""!==i&&(i+=" "),i+=n,e.DOM.setAttribute(t,"class",i))},removeClass:function(t,n){if(e.isLikeArray(t)){var i,o;for(i=0,o=t.length;o>i;i++)e.DOM._removeClass(t[i],n)}else e.DOM._removeClass(t,n)},_removeClass:function(t,n){var i,o,s=e.DOM.getAttribute(t,"class",""),s=e.trim(s).split(" "),r="";for(i=0,o=s.length;o>i;i++)s[i]!==n&&(""!==r&&(r+=" "),r+=s[i]);""===r?e.DOM.removeAttribute(t,"class"):e.DOM.setAttribute(t,"class",r)},hasClass:function(t,n){return RegExp("(?:^|\\s+)"+n+"(?:\\s+|$)").test(e.DOM.getAttribute(t,"class",""))},setStyle:function(t,n,i){if(e.isLikeArray(t)){var o,s;for(o=0,s=t.length;s>o;o++)e.DOM._setStyle(t[o],n,i)}else e.DOM._setStyle(t,n,i)},_setStyle:function(t,n,i){var o;if(e.isObject(n))for(o in n)e.objectHasProperty(n,o)&&("width"===o?e.DOM.width(t,n[o]):"height"===o?e.DOM.height(t,n[o]):t.style[o]=n[o]);else t.style[n]=i},getStyle:function(e,n){var i=t.getComputedStyle(e,"").getPropertyValue(n);return""===i&&(i=e.style[n]),i},hide:function(t){if(e.isLikeArray(t)){var n,i;for(n=0,i=t.length;i>n;n++)e.DOM._hide(t[n])}else e.DOM._hide(t)},_hide:function(t){e.DOM.setData(t,"ccl-disp",e.DOM.getStyle(t,"display")),e.DOM.setStyle(t,"display","none")},show:function(t){if(e.isLikeArray(t)){var n,i;for(n=0,i=t.length;i>n;n++)e.DOM._show(t[n])}else e.DOM._show(t)},_show:function(t){if("none"===e.DOM.getStyle(t,"display")){var n=e.DOM.getData(t,"ccl-disp","block");("none"===n||""===n)&&(n="block"),e.DOM.setStyle(t,"display",n)}},width:function(t,n){return e.isNothing(n)||(e.isNumber(n)&&(n+="px"),t.style.width=n),this._getDimension(t,"width")},outerWidth:function(t){var n=e.DOM.width(t);return n+=parseInt(e.DOM.getStyle(t,"padding-left"),10)+parseInt(e.DOM.getStyle(t,"padding-right"),10),n+=parseInt(e.DOM.getStyle(t,"margin-left"),10)+parseInt(e.DOM.getStyle(t,"margin-right"),10),n+=parseInt(e.DOM.getStyle(t,"border-left-width"),10)+parseInt(e.DOM.getStyle(t,"border-right-width"),10)},height:function(t,n){return e.isNothing(n)||(e.isNumber(n)&&(n+="px"),t.style.height=n),this._getDimension(t,"height")},_getDimension:function(e,n){var i,o=t.parseInt(t.getComputedStyle(e,"").getPropertyValue(n));return isNaN(o)&&(i={display:e.style.display,left:e.style.left},e.style.display="block",e.style.left="-1000000px",o=t.parseInt(t.getComputedStyle(e,"").getPropertyValue(n)),e.style.display=i.display,e.style.left=i.left),o},outerHeight:function(t){var n=e.DOM.height(t);return n+=parseInt(e.DOM.getStyle(t,"padding-top"),10)+parseInt(e.DOM.getStyle(t,"padding-bottom"),10),n+=parseInt(e.DOM.getStyle(t,"margin-top"),10)+parseInt(e.DOM.getStyle(t,"margin-bottom"),10),n+=parseInt(e.DOM.getStyle(t,"border-top-width"),10)+parseInt(e.DOM.getStyle(t,"border-bottom-width"),10)},documentWidth:function(){return e.DOM.width(document.documentElement)},documentHeight:function(){return e.DOM.height(document.documentElement)},documentOuterWidth:function(){return e.DOM.width(document.documentElement)},documentOuterHeight:function(){return e.DOM.outerHeight(document.documentElement)},bodyWidth:function(){return e.DOM.width(document.body)},bodyHeight:function(){return e.DOM.height(document.body)},bodyOuterWidth:function(){return e.DOM.outerWidth(document.body)},bodyOuterHeight:function(){return e.DOM.outerHeight(document.body)},windowWidth:function(){return t.innerWidth},windowHeight:function(){return t.innerHeight},windowScrollLeft:function(){return t.pageXOffset},windowScrollTop:function(){return t.pageYOffset}}})}(window,window.Code.Util),function(t,e){e.extend(e,{Animation:{_applyTransitionDelay:50,_transitionEndLabel:void 0!==t.document.documentElement.style.webkitTransition?"webkitTransitionEnd":"transitionend",_transitionEndHandler:null,_transitionPrefix:void 0!==t.document.documentElement.style.webkitTransition?"webkitTransition":void 0!==t.document.documentElement.style.MozTransition?"MozTransition":"transition",_transformLabel:void 0!==t.document.documentElement.style.webkitTransform?"webkitTransform":void 0!==t.document.documentElement.style.MozTransition?"MozTransform":"transform",_getTransitionEndHandler:function(){return e.isNothing(this._transitionEndHandler)&&(this._transitionEndHandler=this._onTransitionEnd.bind(this)),this._transitionEndHandler},stop:function(n){if(e.Browser.isCSSTransformSupported){var i={};e.Events.remove(n,this._transitionEndLabel,this._getTransitionEndHandler()),e.isNothing(n.callbackLabel)&&delete n.callbackLabel,i[this._transitionPrefix+"Property"]="",i[this._transitionPrefix+"Duration"]="",i[this._transitionPrefix+"TimingFunction"]="",i[this._transitionPrefix+"Delay"]="",i[this._transformLabel]="",e.DOM.setStyle(n,i)}else e.isNothing(t.jQuery)||t.jQuery(n).stop(!0,!0)},fadeIn:function(n,i,o,s,r){return r=e.coalesce(r,1),0>=r&&(r=1),0>=i&&(e.DOM.setStyle(n,"opacity",r),!e.isNothing(o))?(o(n),void 0):(e.DOM.getStyle(n,"opacity")>=1&&e.DOM.setStyle(n,"opacity",0),e.Browser.isCSSTransformSupported?this._applyTransition(n,"opacity",r,i,o,s):e.isNothing(t.jQuery)||t.jQuery(n).fadeTo(i,r,o),void 0)},fadeTo:function(t,e,n,i,o){this.fadeIn(t,n,i,o,e)},fadeOut:function(n,i,o,s){return 0>=i&&(e.DOM.setStyle(n,"opacity",0),!e.isNothing(o))?(o(n),void 0):(e.Browser.isCSSTransformSupported?this._applyTransition(n,"opacity",0,i,o,s):t.jQuery(n).fadeTo(i,0,o),void 0)},slideBy:function(n,i,o,s,r,a){var l={},i=e.coalesce(i,0),o=e.coalesce(o,0),a=e.coalesce(a,"ease-out");l[this._transitionPrefix+"Property"]="all",l[this._transitionPrefix+"Delay"]="0",0===s?(l[this._transitionPrefix+"Duration"]="",l[this._transitionPrefix+"TimingFunction"]=""):(l[this._transitionPrefix+"Duration"]=s+"ms",l[this._transitionPrefix+"TimingFunction"]=e.coalesce(a,"ease-out"),e.Events.add(n,this._transitionEndLabel,this._getTransitionEndHandler())),l[this._transformLabel]=e.Browser.is3dSupported?"translate3d("+i+"px, "+o+"px, 0px)":"translate("+i+"px, "+o+"px)",e.isNothing(r)||(n.cclallcallback=r),e.DOM.setStyle(n,l),0===s&&t.setTimeout(function(){this._leaveTransforms(n)
}.bind(this),this._applyTransitionDelay)},resetTranslate:function(t){var n={};n[this._transformLabel]=n[this._transformLabel]=e.Browser.is3dSupported?"translate3d(0px, 0px, 0px)":"translate(0px, 0px)",e.DOM.setStyle(t,n)},_applyTransition:function(n,i,o,s,r,a){var l={},a=e.coalesce(a,"ease-in");l[this._transitionPrefix+"Property"]=i,l[this._transitionPrefix+"Duration"]=s+"ms",l[this._transitionPrefix+"TimingFunction"]=a,l[this._transitionPrefix+"Delay"]="0",e.Events.add(n,this._transitionEndLabel,this._getTransitionEndHandler()),e.DOM.setStyle(n,l),e.isNothing(r)||(n["ccl"+i+"callback"]=r),t.setTimeout(function(){e.DOM.setStyle(n,i,o)},this._applyTransitionDelay)},_onTransitionEnd:function(t){e.Events.remove(t.currentTarget,this._transitionEndLabel,this._getTransitionEndHandler()),this._leaveTransforms(t.currentTarget)},_leaveTransforms:function(n){var i,o,s,r,a=n.style[this._transitionPrefix+"Property"],l=""!==a?"ccl"+a+"callback":"cclallcallback",a=e.coalesce(n.style.webkitTransform,n.style.MozTransform,n.style.transform),u=t.parseInt(e.DOM.getStyle(n,"left"),0),c=t.parseInt(e.DOM.getStyle(n,"top"),0),h={};""!==a&&(a=e.Browser.is3dSupported?a.match(/translate3d\((.*?)\)/):a.match(/translate\((.*?)\)/),e.isNothing(a)||(o=a[1].split(", "),s=t.parseInt(o[0],0),r=t.parseInt(o[1],0))),h[this._transitionPrefix+"Property"]="",h[this._transitionPrefix+"Duration"]="",h[this._transitionPrefix+"TimingFunction"]="",h[this._transitionPrefix+"Delay"]="",e.DOM.setStyle(n,h),t.setTimeout(function(){e.isNothing(o)||(h={},h[this._transformLabel]="",h.left=u+s+"px",h.top=c+r+"px",e.DOM.setStyle(n,h)),e.isNothing(n[l])||(i=n[l],delete n[l],i(n))}.bind(this),this._applyTransitionDelay)}}})}(window,window.Code.Util),function(t,e,n){n.registerNamespace("Code.Util.TouchElement"),n.TouchElement.EventTypes={onTouch:"CodeUtilTouchElementOnTouch"},n.TouchElement.ActionTypes={touchStart:"touchStart",touchMove:"touchMove",touchEnd:"touchEnd",touchMoveEnd:"touchMoveEnd",tap:"tap",doubleTap:"doubleTap",swipeLeft:"swipeLeft",swipeRight:"swipeRight",swipeUp:"swipeUp",swipeDown:"swipeDown",gestureStart:"gestureStart",gestureChange:"gestureChange",gestureEnd:"gestureEnd"}}(window,window.klass,window.Code.Util),function(t,e,n){n.registerNamespace("Code.Util.TouchElement"),n.TouchElement.TouchElementClass=e({el:null,captureSettings:null,touchStartPoint:null,touchEndPoint:null,touchStartTime:null,doubleTapTimeout:null,touchStartHandler:null,touchMoveHandler:null,touchEndHandler:null,mouseDownHandler:null,mouseMoveHandler:null,mouseUpHandler:null,mouseOutHandler:null,gestureStartHandler:null,gestureChangeHandler:null,gestureEndHandler:null,swipeThreshold:null,swipeTimeThreshold:null,doubleTapSpeed:null,dispose:function(){var t;this.removeEventHandlers();for(t in this)n.objectHasProperty(this,t)&&(this[t]=null)},initialize:function(t,e){this.el=t,this.captureSettings={swipe:!1,move:!1,gesture:!1,doubleTap:!1,preventDefaultTouchEvents:!0},n.extend(this.captureSettings,e),this.swipeThreshold=50,this.doubleTapSpeed=this.swipeTimeThreshold=250,this.touchStartPoint={x:0,y:0},this.touchEndPoint={x:0,y:0}},addEventHandlers:function(){n.isNothing(this.touchStartHandler)&&(this.touchStartHandler=this.onTouchStart.bind(this),this.touchMoveHandler=this.onTouchMove.bind(this),this.touchEndHandler=this.onTouchEnd.bind(this),this.mouseDownHandler=this.onMouseDown.bind(this),this.mouseMoveHandler=this.onMouseMove.bind(this),this.mouseUpHandler=this.onMouseUp.bind(this),this.mouseOutHandler=this.onMouseOut.bind(this),this.gestureStartHandler=this.onGestureStart.bind(this),this.gestureChangeHandler=this.onGestureChange.bind(this),this.gestureEndHandler=this.onGestureEnd.bind(this)),n.Events.add(this.el,"touchstart",this.touchStartHandler),this.captureSettings.move&&n.Events.add(this.el,"touchmove",this.touchMoveHandler),n.Events.add(this.el,"touchend",this.touchEndHandler),n.Events.add(this.el,"mousedown",this.mouseDownHandler),n.Browser.isGestureSupported&&this.captureSettings.gesture&&(n.Events.add(this.el,"gesturestart",this.gestureStartHandler),n.Events.add(this.el,"gesturechange",this.gestureChangeHandler),n.Events.add(this.el,"gestureend",this.gestureEndHandler))},removeEventHandlers:function(){n.Events.remove(this.el,"touchstart",this.touchStartHandler),this.captureSettings.move&&n.Events.remove(this.el,"touchmove",this.touchMoveHandler),n.Events.remove(this.el,"touchend",this.touchEndHandler),n.Events.remove(this.el,"mousedown",this.mouseDownHandler),n.Browser.isGestureSupported&&this.captureSettings.gesture&&(n.Events.remove(this.el,"gesturestart",this.gestureStartHandler),n.Events.remove(this.el,"gesturechange",this.gestureChangeHandler),n.Events.remove(this.el,"gestureend",this.gestureEndHandler))},getTouchPoint:function(t){return{x:t[0].pageX,y:t[0].pageY}},fireTouchEvent:function(e){var i,o=0,s=0,r=0,o=this.touchEndPoint.x-this.touchStartPoint.x,s=this.touchEndPoint.y-this.touchStartPoint.y,r=Math.sqrt(o*o+s*s);if(this.captureSettings.swipe&&(i=new Date,i-=this.touchStartTime,this.swipeTimeThreshold>=i)){if(t.Math.abs(o)>=this.swipeThreshold)return n.Events.fire(this,{type:n.TouchElement.EventTypes.onTouch,target:this,point:this.touchEndPoint,action:0>o?n.TouchElement.ActionTypes.swipeLeft:n.TouchElement.ActionTypes.swipeRight,targetEl:e.target,currentTargetEl:e.currentTarget}),void 0;if(t.Math.abs(s)>=this.swipeThreshold)return n.Events.fire(this,{type:n.TouchElement.EventTypes.onTouch,target:this,point:this.touchEndPoint,action:0>s?n.TouchElement.ActionTypes.swipeUp:n.TouchElement.ActionTypes.swipeDown,targetEl:e.target,currentTargetEl:e.currentTarget}),void 0}r>1?n.Events.fire(this,{type:n.TouchElement.EventTypes.onTouch,target:this,action:n.TouchElement.ActionTypes.touchMoveEnd,point:this.touchEndPoint,targetEl:e.target,currentTargetEl:e.currentTarget}):this.captureSettings.doubleTap?n.isNothing(this.doubleTapTimeout)?this.doubleTapTimeout=t.setTimeout(function(){this.doubleTapTimeout=null,n.Events.fire(this,{type:n.TouchElement.EventTypes.onTouch,target:this,point:this.touchEndPoint,action:n.TouchElement.ActionTypes.tap,targetEl:e.target,currentTargetEl:e.currentTarget})}.bind(this),this.doubleTapSpeed):(t.clearTimeout(this.doubleTapTimeout),this.doubleTapTimeout=null,n.Events.fire(this,{type:n.TouchElement.EventTypes.onTouch,target:this,point:this.touchEndPoint,action:n.TouchElement.ActionTypes.doubleTap,targetEl:e.target,currentTargetEl:e.currentTarget})):n.Events.fire(this,{type:n.TouchElement.EventTypes.onTouch,target:this,point:this.touchEndPoint,action:n.TouchElement.ActionTypes.tap,targetEl:e.target,currentTargetEl:e.currentTarget})},onTouchStart:function(t){this.captureSettings.preventDefaultTouchEvents&&t.preventDefault(),n.Events.remove(this.el,"mousedown",this.mouseDownHandler);var e=n.Events.getTouchEvent(t).touches;e.length>1&&this.captureSettings.gesture?this.isGesture=!0:(this.touchStartTime=new Date,this.isGesture=!1,this.touchStartPoint=this.getTouchPoint(e),n.Events.fire(this,{type:n.TouchElement.EventTypes.onTouch,target:this,action:n.TouchElement.ActionTypes.touchStart,point:this.touchStartPoint,targetEl:t.target,currentTargetEl:t.currentTarget}))},onTouchMove:function(t){if(this.captureSettings.preventDefaultTouchEvents&&t.preventDefault(),!this.isGesture||!this.captureSettings.gesture){var e=n.Events.getTouchEvent(t).touches;n.Events.fire(this,{type:n.TouchElement.EventTypes.onTouch,target:this,action:n.TouchElement.ActionTypes.touchMove,point:this.getTouchPoint(e),targetEl:t.target,currentTargetEl:t.currentTarget})}},onTouchEnd:function(t){if(!this.isGesture||!this.captureSettings.gesture){this.captureSettings.preventDefaultTouchEvents&&t.preventDefault();var e=n.Events.getTouchEvent(t);this.touchEndPoint=this.getTouchPoint(n.isNothing(e.changedTouches)?e.touches:e.changedTouches),n.Events.fire(this,{type:n.TouchElement.EventTypes.onTouch,target:this,action:n.TouchElement.ActionTypes.touchEnd,point:this.touchEndPoint,targetEl:t.target,currentTargetEl:t.currentTarget}),this.fireTouchEvent(t)}},onMouseDown:function(t){t.preventDefault(),n.Events.remove(this.el,"touchstart",this.mouseDownHandler),n.Events.remove(this.el,"touchmove",this.touchMoveHandler),n.Events.remove(this.el,"touchend",this.touchEndHandler),this.captureSettings.move&&n.Events.add(this.el,"mousemove",this.mouseMoveHandler),n.Events.add(this.el,"mouseup",this.mouseUpHandler),n.Events.add(this.el,"mouseout",this.mouseOutHandler),this.touchStartTime=new Date,this.isGesture=!1,this.touchStartPoint=n.Events.getMousePosition(t),n.Events.fire(this,{type:n.TouchElement.EventTypes.onTouch,target:this,action:n.TouchElement.ActionTypes.touchStart,point:this.touchStartPoint,targetEl:t.target,currentTargetEl:t.currentTarget})},onMouseMove:function(t){t.preventDefault(),n.Events.fire(this,{type:n.TouchElement.EventTypes.onTouch,target:this,action:n.TouchElement.ActionTypes.touchMove,point:n.Events.getMousePosition(t),targetEl:t.target,currentTargetEl:t.currentTarget})},onMouseUp:function(t){t.preventDefault(),this.captureSettings.move&&n.Events.remove(this.el,"mousemove",this.mouseMoveHandler),n.Events.remove(this.el,"mouseup",this.mouseUpHandler),n.Events.remove(this.el,"mouseout",this.mouseOutHandler),this.touchEndPoint=n.Events.getMousePosition(t),n.Events.fire(this,{type:n.TouchElement.EventTypes.onTouch,target:this,action:n.TouchElement.ActionTypes.touchEnd,point:this.touchEndPoint,targetEl:t.target,currentTargetEl:t.currentTarget}),this.fireTouchEvent(t)},onMouseOut:function(t){var e=t.relatedTarget;this.el===e||n.DOM.isChildOf(e,this.el)||(t.preventDefault(),this.captureSettings.move&&n.Events.remove(this.el,"mousemove",this.mouseMoveHandler),n.Events.remove(this.el,"mouseup",this.mouseUpHandler),n.Events.remove(this.el,"mouseout",this.mouseOutHandler),this.touchEndPoint=n.Events.getMousePosition(t),n.Events.fire(this,{type:n.TouchElement.EventTypes.onTouch,target:this,action:n.TouchElement.ActionTypes.touchEnd,point:this.touchEndPoint,targetEl:t.target,currentTargetEl:t.currentTarget}),this.fireTouchEvent(t))},onGestureStart:function(t){t.preventDefault();var e=n.Events.getTouchEvent(t);n.Events.fire(this,{type:n.TouchElement.EventTypes.onTouch,target:this,action:n.TouchElement.ActionTypes.gestureStart,scale:e.scale,rotation:e.rotation,targetEl:t.target,currentTargetEl:t.currentTarget})},onGestureChange:function(t){t.preventDefault();var e=n.Events.getTouchEvent(t);n.Events.fire(this,{type:n.TouchElement.EventTypes.onTouch,target:this,action:n.TouchElement.ActionTypes.gestureChange,scale:e.scale,rotation:e.rotation,targetEl:t.target,currentTargetEl:t.currentTarget})},onGestureEnd:function(t){t.preventDefault();var e=n.Events.getTouchEvent(t);n.Events.fire(this,{type:n.TouchElement.EventTypes.onTouch,target:this,action:n.TouchElement.ActionTypes.gestureEnd,scale:e.scale,rotation:e.rotation,targetEl:t.target,currentTargetEl:t.currentTarget})}})}(window,window.klass,window.Code.Util),function(t,e,n){n.registerNamespace("Code.PhotoSwipe.Image"),t.Code.PhotoSwipe.Image.EventTypes={onLoad:"onLoad",onError:"onError"}}(window,window.klass,window.Code.Util),function(t,e,n){n.registerNamespace("Code.PhotoSwipe.Image");var i=t.Code.PhotoSwipe;i.Image.ImageClass=e({refObj:null,imageEl:null,src:null,caption:null,metaData:null,imageLoadHandler:null,imageErrorHandler:null,dispose:function(){var t;this.shrinkImage();for(t in this)n.objectHasProperty(this,t)&&(this[t]=null)},initialize:function(e,n,i,o){this.refObj=e,this.src=this.originalSrc=n,this.caption=i,this.metaData=o,this.imageEl=new t.Image,this.imageLoadHandler=this.onImageLoad.bind(this),this.imageErrorHandler=this.onImageError.bind(this)},load:function(){this.imageEl.originalSrc=n.coalesce(this.imageEl.originalSrc,""),this.imageEl.originalSrc===this.src?this.imageEl.isError?n.Events.fire(this,{type:i.Image.EventTypes.onError,target:this}):n.Events.fire(this,{type:i.Image.EventTypes.onLoad,target:this}):(this.imageEl.isError=!1,this.imageEl.isLoading=!0,this.imageEl.naturalWidth=null,this.imageEl.naturalHeight=null,this.imageEl.isLandscape=!1,this.imageEl.onload=this.imageLoadHandler,this.imageEl.onerror=this.imageErrorHandler,this.imageEl.onabort=this.imageErrorHandler,this.imageEl.originalSrc=this.src,this.imageEl.src=this.src)},shrinkImage:function(){!n.isNothing(this.imageEl)&&this.imageEl.src.indexOf(this.src)>-1&&(this.imageEl.src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=",n.isNothing(this.imageEl.parentNode)||n.DOM.removeChild(this.imageEl,this.imageEl.parentNode))},onImageLoad:function(){this.imageEl.onload=null,this.imageEl.naturalWidth=n.coalesce(this.imageEl.naturalWidth,this.imageEl.width),this.imageEl.naturalHeight=n.coalesce(this.imageEl.naturalHeight,this.imageEl.height),this.imageEl.isLandscape=this.imageEl.naturalWidth>this.imageEl.naturalHeight,this.imageEl.isLoading=!1,n.Events.fire(this,{type:i.Image.EventTypes.onLoad,target:this})},onImageError:function(){this.imageEl.onload=null,this.imageEl.onerror=null,this.imageEl.onabort=null,this.imageEl.isLoading=!1,this.imageEl.isError=!0,n.Events.fire(this,{type:i.Image.EventTypes.onError,target:this})}})}(window,window.klass,window.Code.Util),function(t,e,n){n.registerNamespace("Code.PhotoSwipe.Cache"),t=t.Code.PhotoSwipe,t.Cache.Mode={normal:"normal",aggressive:"aggressive"},t.Cache.Functions={getImageSource:function(t){return t.href},getImageCaption:function(t){if("IMG"===t.nodeName)return n.DOM.getAttribute(t,"alt");var e,i,o;for(e=0,i=t.childNodes.length;i>e;e++)if(o=t.childNodes[e],"IMG"===t.childNodes[e].nodeName)return n.DOM.getAttribute(o,"alt")},getImageMetaData:function(){return{}}}}(window,window.klass,window.Code.Util),function(t,e,n){n.registerNamespace("Code.PhotoSwipe.Cache");var i=t.Code.PhotoSwipe;i.Cache.CacheClass=e({images:null,settings:null,dispose:function(){var t,e,i;if(!n.isNothing(this.images)){for(e=0,i=this.images.length;i>e;e++)this.images[e].dispose();this.images.length=0}for(t in this)n.objectHasProperty(this,t)&&(this[t]=null)},initialize:function(t,e){var n,o,s,r,a,l;for(this.settings=e,this.images=[],n=0,o=t.length;o>n;n++)s=t[n],r=this.settings.getImageSource(s),a=this.settings.getImageCaption(s),l=this.settings.getImageMetaData(s),this.images.push(new i.Image.ImageClass(s,r,a,l))},getImages:function(t){var e,o,s,r=[];for(e=0,o=t.length;o>e;e++)s=this.images[t[e]],this.settings.cacheMode===i.Cache.Mode.aggressive&&(s.cacheDoNotShrink=!0),r.push(s);if(this.settings.cacheMode===i.Cache.Mode.aggressive)for(e=0,o=this.images.length;o>e;e++)s=this.images[e],n.objectHasProperty(s,"cacheDoNotShrink")?delete s.cacheDoNotShrink:s.shrinkImage();return r}})}(window,window.klass,window.Code.Util,window.Code.PhotoSwipe.Image),function(t,e,n){n.registerNamespace("Code.PhotoSwipe.DocumentOverlay"),t.Code.PhotoSwipe.DocumentOverlay.CssClasses={documentOverlay:"ps-document-overlay"}}(window,window.klass,window.Code.Util),function(t,e,n){n.registerNamespace("Code.PhotoSwipe.DocumentOverlay");var i=t.Code.PhotoSwipe;i.DocumentOverlay.DocumentOverlayClass=e({el:null,settings:null,initialBodyHeight:null,dispose:function(){var t;n.Animation.stop(this.el),n.DOM.removeChild(this.el,this.el.parentNode);for(t in this)n.objectHasProperty(this,t)&&(this[t]=null)},initialize:function(e){this.settings=e,this.el=n.DOM.createElement("div",{"class":i.DocumentOverlay.CssClasses.documentOverlay},""),n.DOM.setStyle(this.el,{display:"block",position:"absolute",left:0,top:0,zIndex:this.settings.zIndex}),n.DOM.hide(this.el),this.settings.target===t?n.DOM.appendToBody(this.el):n.DOM.appendChild(this.el,this.settings.target),n.Animation.resetTranslate(this.el),this.initialBodyHeight=n.DOM.bodyOuterHeight()},resetPosition:function(){var e,i,o;this.settings.target===t?(e=n.DOM.windowWidth(),i=2*n.DOM.bodyOuterHeight(),o=this.settings.jQueryMobile?n.DOM.windowScrollTop()+"px":"0px",1>i&&(i=this.initialBodyHeight),n.DOM.windowHeight()>i&&(i=n.DOM.windowHeight())):(e=n.DOM.width(this.settings.target),i=n.DOM.height(this.settings.target),o="0px"),n.DOM.setStyle(this.el,{width:e,height:i,top:o})},fadeIn:function(t,e){this.resetPosition(),n.DOM.setStyle(this.el,"opacity",0),n.DOM.show(this.el),n.Animation.fadeIn(this.el,t,e)}})}(window,window.klass,window.Code.Util),function(t,e,n){n.registerNamespace("Code.PhotoSwipe.Carousel"),t=t.Code.PhotoSwipe,t.Carousel.EventTypes={onSlideByEnd:"PhotoSwipeCarouselOnSlideByEnd",onSlideshowStart:"PhotoSwipeCarouselOnSlideshowStart",onSlideshowStop:"PhotoSwipeCarouselOnSlideshowStop"},t.Carousel.CssClasses={carousel:"ps-carousel",content:"ps-carousel-content",item:"ps-carousel-item",itemLoading:"ps-carousel-item-loading",itemError:"ps-carousel-item-error"},t.Carousel.SlideByAction={previous:"previous",current:"current",next:"next"}}(window,window.klass,window.Code.Util),function(t,e,n){n.registerNamespace("Code.PhotoSwipe.Carousel");var i=t.Code.PhotoSwipe;i.Carousel.CarouselClass=e({el:null,contentEl:null,settings:null,cache:null,slideByEndHandler:null,currentCacheIndex:null,isSliding:null,isSlideshowActive:null,lastSlideByAction:null,touchStartPoint:null,touchStartPosition:null,imageLoadHandler:null,imageErrorHandler:null,slideshowTimeout:null,dispose:function(){var t,e,o;for(e=0,o=this.cache.images.length;o>e;e++)n.Events.remove(this.cache.images[e],i.Image.EventTypes.onLoad,this.imageLoadHandler),n.Events.remove(this.cache.images[e],i.Image.EventTypes.onError,this.imageErrorHandler);this.stopSlideshow(),n.Animation.stop(this.el),n.DOM.removeChild(this.el,this.el.parentNode);for(t in this)n.objectHasProperty(this,t)&&(this[t]=null)},initialize:function(e,o){var s,r,a;for(this.cache=e,this.settings=o,this.slideByEndHandler=this.onSlideByEnd.bind(this),this.imageLoadHandler=this.onImageLoad.bind(this),this.imageErrorHandler=this.onImageError.bind(this),this.currentCacheIndex=0,this.isSlideshowActive=this.isSliding=!1,3>this.cache.images.length&&(this.settings.loop=!1),this.el=n.DOM.createElement("div",{"class":i.Carousel.CssClasses.carousel},""),n.DOM.setStyle(this.el,{display:"block",position:"absolute",left:0,top:0,overflow:"hidden",zIndex:this.settings.zIndex}),n.DOM.hide(this.el),this.contentEl=n.DOM.createElement("div",{"class":i.Carousel.CssClasses.content},""),n.DOM.setStyle(this.contentEl,{display:"block",position:"absolute",left:0,top:0}),n.DOM.appendChild(this.contentEl,this.el),r=3>e.images.length?e.images.length:3,s=0;r>s;s++)a=n.DOM.createElement("div",{"class":i.Carousel.CssClasses.item+" "+i.Carousel.CssClasses.item+"-"+s},""),n.DOM.setAttribute(a,"style","float: left;"),n.DOM.setStyle(a,{display:"block",position:"relative",left:0,top:0,overflow:"hidden"}),this.settings.margin>0&&n.DOM.setStyle(a,{marginRight:this.settings.margin+"px"}),n.DOM.appendChild(a,this.contentEl);this.settings.target===t?n.DOM.appendToBody(this.el):n.DOM.appendChild(this.el,this.settings.target)},resetPosition:function(){var e,o,s,r,a,l;for(this.settings.target===t?(e=n.DOM.windowWidth(),o=n.DOM.windowHeight(),s=n.DOM.windowScrollTop()+"px"):(e=n.DOM.width(this.settings.target),o=n.DOM.height(this.settings.target),s="0px"),r=this.settings.margin>0?e+this.settings.margin:e,a=n.DOM.find("."+i.Carousel.CssClasses.item,this.contentEl),r*=a.length,n.DOM.setStyle(this.el,{top:s,width:e,height:o}),n.DOM.setStyle(this.contentEl,{width:r,height:o}),s=0,r=a.length;r>s;s++)l=a[s],n.DOM.setStyle(l,{width:e,height:o}),l=n.DOM.find("img",l)[0],n.isNothing(l)||this.resetImagePosition(l);this.setContentLeftPosition()},resetImagePosition:function(t){if(!n.isNothing(t)){n.DOM.getAttribute(t,"src");var e,i,o,s=n.DOM.width(this.el),r=n.DOM.height(this.el);"fitNoUpscale"===this.settings.imageScaleMethod?(i=t.naturalWidth,o=t.naturalHeight,i>s&&(e=s/i,i=Math.round(i*e),o=Math.round(o*e)),o>r&&(e=r/o,o=Math.round(o*e),i=Math.round(i*e))):(e=t.isLandscape?s/t.naturalWidth:r/t.naturalHeight,i=Math.round(t.naturalWidth*e),o=Math.round(t.naturalHeight*e),"zoom"===this.settings.imageScaleMethod?(e=1,r>o?e=r/o:s>i&&(e=s/i),1!==e&&(i=Math.round(i*e),o=Math.round(o*e))):"fit"===this.settings.imageScaleMethod&&(e=1,i>s?e=s/i:o>r&&(e=r/o),1!==e&&(i=Math.round(i*e),o=Math.round(o*e)))),n.DOM.setStyle(t,{position:"absolute",width:i,height:o,top:Math.round((r-o)/2)+"px",left:Math.round((s-i)/2)+"px",display:"block"})}},setContentLeftPosition:function(){var e,i,o;e=this.settings.target===t?n.DOM.windowWidth():n.DOM.width(this.settings.target),i=this.getItemEls(),o=0,this.settings.loop?o=-1*(e+this.settings.margin):this.currentCacheIndex===this.cache.images.length-1?o=-1*(i.length-1)*(e+this.settings.margin):this.currentCacheIndex>0&&(o=-1*(e+this.settings.margin)),n.DOM.setStyle(this.contentEl,{left:o+"px"})},show:function(t){this.currentCacheIndex=t,this.resetPosition(),this.setImages(!1),n.DOM.show(this.el),n.Animation.resetTranslate(this.contentEl);var e,o,t=this.getItemEls();for(e=0,o=t.length;o>e;e++)n.Animation.resetTranslate(t[e]);n.Events.fire(this,{type:i.Carousel.EventTypes.onSlideByEnd,target:this,action:i.Carousel.SlideByAction.current,cacheIndex:this.currentCacheIndex})},setImages:function(t){var e,n=this.getItemEls();e=this.currentCacheIndex+1;var i=this.currentCacheIndex-1;this.settings.loop?(e>this.cache.images.length-1&&(e=0),0>i&&(i=this.cache.images.length-1),e=this.cache.getImages([i,this.currentCacheIndex,e]),t||this.addCacheImageToItemEl(e[1],n[1]),this.addCacheImageToItemEl(e[2],n[2]),this.addCacheImageToItemEl(e[0],n[0])):1===n.length?t||(e=this.cache.getImages([this.currentCacheIndex]),this.addCacheImageToItemEl(e[0],n[0])):2===n.length?0===this.currentCacheIndex?(e=this.cache.getImages([this.currentCacheIndex,this.currentCacheIndex+1]),t||this.addCacheImageToItemEl(e[0],n[0]),this.addCacheImageToItemEl(e[1],n[1])):(e=this.cache.getImages([this.currentCacheIndex-1,this.currentCacheIndex]),t||this.addCacheImageToItemEl(e[1],n[1]),this.addCacheImageToItemEl(e[0],n[0])):0===this.currentCacheIndex?(e=this.cache.getImages([this.currentCacheIndex,this.currentCacheIndex+1,this.currentCacheIndex+2]),t||this.addCacheImageToItemEl(e[0],n[0]),this.addCacheImageToItemEl(e[1],n[1]),this.addCacheImageToItemEl(e[2],n[2])):(this.currentCacheIndex===this.cache.images.length-1?(e=this.cache.getImages([this.currentCacheIndex-2,this.currentCacheIndex-1,this.currentCacheIndex]),t||this.addCacheImageToItemEl(e[2],n[2]),this.addCacheImageToItemEl(e[1],n[1])):(e=this.cache.getImages([this.currentCacheIndex-1,this.currentCacheIndex,this.currentCacheIndex+1]),t||this.addCacheImageToItemEl(e[1],n[1]),this.addCacheImageToItemEl(e[2],n[2])),this.addCacheImageToItemEl(e[0],n[0]))},addCacheImageToItemEl:function(t,e){n.DOM.removeClass(e,i.Carousel.CssClasses.itemError),n.DOM.addClass(e,i.Carousel.CssClasses.itemLoading),n.DOM.removeChildren(e),n.DOM.setStyle(t.imageEl,{display:"none"}),n.DOM.appendChild(t.imageEl,e),n.Animation.resetTranslate(t.imageEl),n.Events.add(t,i.Image.EventTypes.onLoad,this.imageLoadHandler),n.Events.add(t,i.Image.EventTypes.onError,this.imageErrorHandler),t.load()},slideCarousel:function(e,o,s){if(!this.isSliding){var r,a;if(r=this.settings.target===t?n.DOM.windowWidth()+this.settings.margin:n.DOM.width(this.settings.target)+this.settings.margin,s=n.coalesce(s,this.settings.slideSpeed),!(1>t.Math.abs(a))){switch(o){case n.TouchElement.ActionTypes.swipeLeft:e=-1*r;break;case n.TouchElement.ActionTypes.swipeRight:e=r;break;default:a=e.x-this.touchStartPoint.x,e=t.Math.abs(a)>r/2?a>0?r:-1*r:0}this.lastSlideByAction=0>e?i.Carousel.SlideByAction.next:e>0?i.Carousel.SlideByAction.previous:i.Carousel.SlideByAction.current,!this.settings.loop&&(this.lastSlideByAction===i.Carousel.SlideByAction.previous&&0===this.currentCacheIndex||this.lastSlideByAction===i.Carousel.SlideByAction.next&&this.currentCacheIndex===this.cache.images.length-1)&&(e=0,this.lastSlideByAction=i.Carousel.SlideByAction.current),this.isSliding=!0,this.doSlideCarousel(e,s)}}},moveCarousel:function(t){this.isSliding||this.settings.enableDrag&&this.doMoveCarousel(t.x-this.touchStartPoint.x)},getItemEls:function(){return n.DOM.find("."+i.Carousel.CssClasses.item,this.contentEl)},previous:function(){this.stopSlideshow(),this.slideCarousel({x:0,y:0},n.TouchElement.ActionTypes.swipeRight,this.settings.nextPreviousSlideSpeed)},next:function(){this.stopSlideshow(),this.slideCarousel({x:0,y:0},n.TouchElement.ActionTypes.swipeLeft,this.settings.nextPreviousSlideSpeed)},slideshowNext:function(){this.slideCarousel({x:0,y:0},n.TouchElement.ActionTypes.swipeLeft)},startSlideshow:function(){this.stopSlideshow(),this.isSlideshowActive=!0,this.slideshowTimeout=t.setTimeout(this.slideshowNext.bind(this),this.settings.slideshowDelay),n.Events.fire(this,{type:i.Carousel.EventTypes.onSlideshowStart,target:this})},stopSlideshow:function(){n.isNothing(this.slideshowTimeout)||(t.clearTimeout(this.slideshowTimeout),this.slideshowTimeout=null,this.isSlideshowActive=!1,n.Events.fire(this,{type:i.Carousel.EventTypes.onSlideshowStop,target:this}))},onSlideByEnd:function(){if(!n.isNothing(this.isSliding)){var t=this.getItemEls();this.isSliding=!1,this.lastSlideByAction===i.Carousel.SlideByAction.next?this.currentCacheIndex+=1:this.lastSlideByAction===i.Carousel.SlideByAction.previous&&(this.currentCacheIndex-=1),this.settings.loop?(this.lastSlideByAction===i.Carousel.SlideByAction.next?n.DOM.appendChild(t[0],this.contentEl):this.lastSlideByAction===i.Carousel.SlideByAction.previous&&n.DOM.insertBefore(t[t.length-1],t[0],this.contentEl),0>this.currentCacheIndex?this.currentCacheIndex=this.cache.images.length-1:this.currentCacheIndex===this.cache.images.length&&(this.currentCacheIndex=0)):this.cache.images.length>3&&(this.currentCacheIndex>1&&this.currentCacheIndex<this.cache.images.length-2?this.lastSlideByAction===i.Carousel.SlideByAction.next?n.DOM.appendChild(t[0],this.contentEl):this.lastSlideByAction===i.Carousel.SlideByAction.previous&&n.DOM.insertBefore(t[t.length-1],t[0],this.contentEl):1===this.currentCacheIndex?this.lastSlideByAction===i.Carousel.SlideByAction.previous&&n.DOM.insertBefore(t[t.length-1],t[0],this.contentEl):this.currentCacheIndex===this.cache.images.length-2&&this.lastSlideByAction===i.Carousel.SlideByAction.next&&n.DOM.appendChild(t[0],this.contentEl)),this.lastSlideByAction!==i.Carousel.SlideByAction.current&&(this.setContentLeftPosition(),this.setImages(!0)),n.Events.fire(this,{type:i.Carousel.EventTypes.onSlideByEnd,target:this,action:this.lastSlideByAction,cacheIndex:this.currentCacheIndex}),this.isSlideshowActive&&(this.lastSlideByAction!==i.Carousel.SlideByAction.current?this.startSlideshow():this.stopSlideshow())}},onTouch:function(e,i){switch(this.stopSlideshow(),e){case n.TouchElement.ActionTypes.touchStart:this.touchStartPoint=i,this.touchStartPosition={x:t.parseInt(n.DOM.getStyle(this.contentEl,"left"),0),y:t.parseInt(n.DOM.getStyle(this.contentEl,"top"),0)};break;case n.TouchElement.ActionTypes.touchMove:this.moveCarousel(i);break;case n.TouchElement.ActionTypes.touchMoveEnd:case n.TouchElement.ActionTypes.swipeLeft:case n.TouchElement.ActionTypes.swipeRight:this.slideCarousel(i,e)}},onImageLoad:function(t){t=t.target,n.isNothing(t.imageEl.parentNode)||(n.DOM.removeClass(t.imageEl.parentNode,i.Carousel.CssClasses.itemLoading),this.resetImagePosition(t.imageEl)),n.Events.remove(t,i.Image.EventTypes.onLoad,this.imageLoadHandler),n.Events.remove(t,i.Image.EventTypes.onError,this.imageErrorHandler)},onImageError:function(t){t=t.target,n.isNothing(t.imageEl.parentNode)||(n.DOM.removeClass(t.imageEl.parentNode,i.Carousel.CssClasses.itemLoading),n.DOM.addClass(t.imageEl.parentNode,i.Carousel.CssClasses.itemError)),n.Events.remove(t,i.Image.EventTypes.onLoad,this.imageLoadHandler),n.Events.remove(t,i.Image.EventTypes.onError,this.imageErrorHandler)}})}(window,window.klass,window.Code.Util),function(t,e,n){n.registerNamespace("Code.PhotoSwipe.Carousel"),e=t.Code.PhotoSwipe,e.Carousel.CarouselClass=e.Carousel.CarouselClass.extend({getStartingPos:function(){var e=this.touchStartPosition;return n.isNothing(e)&&(e={x:t.parseInt(n.DOM.getStyle(this.contentEl,"left"),0),y:t.parseInt(n.DOM.getStyle(this.contentEl,"top"),0)}),e},doMoveCarousel:function(e){var i;n.Browser.isCSSTransformSupported?(i={},i[n.Animation._transitionPrefix+"Property"]="all",i[n.Animation._transitionPrefix+"Duration"]="",i[n.Animation._transitionPrefix+"TimingFunction"]="",i[n.Animation._transitionPrefix+"Delay"]="0",i[n.Animation._transformLabel]=n.Browser.is3dSupported?"translate3d("+e+"px, 0px, 0px)":"translate("+e+"px, 0px)",n.DOM.setStyle(this.contentEl,i)):n.isNothing(t.jQuery)||t.jQuery(this.contentEl).stop().css("left",this.getStartingPos().x+e+"px")},doSlideCarousel:function(e,i){var o;0>=i?this.slideByEndHandler():n.Browser.isCSSTransformSupported?(o=n.coalesce(this.contentEl.style.webkitTransform,this.contentEl.style.MozTransform,this.contentEl.style.transform,""),0===o.indexOf("translate3d("+e)?this.slideByEndHandler():0===o.indexOf("translate("+e)?this.slideByEndHandler():n.Animation.slideBy(this.contentEl,e,0,i,this.slideByEndHandler,this.settings.slideTimingFunction)):n.isNothing(t.jQuery)||(o={left:this.getStartingPos().x+e+"px"},"ease-out"===this.settings.animationTimingFunction&&(this.settings.animationTimingFunction="easeOutQuad"),n.isNothing(t.jQuery.easing[this.settings.animationTimingFunction])&&(this.settings.animationTimingFunction="linear"),t.jQuery(this.contentEl).animate(o,this.settings.slideSpeed,this.settings.animationTimingFunction,this.slideByEndHandler))}})}(window,window.klass,window.Code.Util,window.Code.PhotoSwipe.TouchElement),function(t,e,n){n.registerNamespace("Code.PhotoSwipe.Toolbar");var i=t.Code.PhotoSwipe;i.Toolbar.CssClasses={toolbar:"ps-toolbar",toolbarContent:"ps-toolbar-content",toolbarTop:"ps-toolbar-top",caption:"ps-caption",captionBottom:"ps-caption-bottom",captionContent:"ps-caption-content",close:"ps-toolbar-close",play:"ps-toolbar-play",previous:"ps-toolbar-previous",previousDisabled:"ps-toolbar-previous-disabled",next:"ps-toolbar-next",nextDisabled:"ps-toolbar-next-disabled"},i.Toolbar.ToolbarAction={close:"close",play:"play",next:"next",previous:"previous",none:"none"},i.Toolbar.EventTypes={onTap:"PhotoSwipeToolbarOnClick",onBeforeShow:"PhotoSwipeToolbarOnBeforeShow",onShow:"PhotoSwipeToolbarOnShow",onBeforeHide:"PhotoSwipeToolbarOnBeforeHide",onHide:"PhotoSwipeToolbarOnHide"},i.Toolbar.getToolbar=function(){return'<div class="'+i.Toolbar.CssClasses.close+'"><div class="'+i.Toolbar.CssClasses.toolbarContent+'"></div></div><div class="'+i.Toolbar.CssClasses.play+'"><div class="'+i.Toolbar.CssClasses.toolbarContent+'"></div></div><div class="'+i.Toolbar.CssClasses.previous+'"><div class="'+i.Toolbar.CssClasses.toolbarContent+'"></div></div><div class="'+i.Toolbar.CssClasses.next+'"><div class="'+i.Toolbar.CssClasses.toolbarContent+'"></div></div>'}}(window,window.klass,window.Code.Util),function(t,e,n){n.registerNamespace("Code.PhotoSwipe.Toolbar");var i=t.Code.PhotoSwipe;i.Toolbar.ToolbarClass=e({toolbarEl:null,closeEl:null,playEl:null,previousEl:null,nextEl:null,captionEl:null,captionContentEl:null,currentCaption:null,settings:null,cache:null,timeout:null,isVisible:null,fadeOutHandler:null,touchStartHandler:null,touchMoveHandler:null,clickHandler:null,dispose:function(){var t;this.clearTimeout(),this.removeEventHandlers(),n.Animation.stop(this.toolbarEl),n.Animation.stop(this.captionEl),n.DOM.removeChild(this.toolbarEl,this.toolbarEl.parentNode),n.DOM.removeChild(this.captionEl,this.captionEl.parentNode);for(t in this)n.objectHasProperty(this,t)&&(this[t]=null)},initialize:function(e,o){var s;this.settings=o,this.cache=e,this.isVisible=!1,this.fadeOutHandler=this.onFadeOut.bind(this),this.touchStartHandler=this.onTouchStart.bind(this),this.touchMoveHandler=this.onTouchMove.bind(this),this.clickHandler=this.onClick.bind(this),s=i.Toolbar.CssClasses.toolbar,this.settings.captionAndToolbarFlipPosition&&(s=s+" "+i.Toolbar.CssClasses.toolbarTop),this.toolbarEl=n.DOM.createElement("div",{"class":s},this.settings.getToolbar()),n.DOM.setStyle(this.toolbarEl,{left:0,position:"absolute",overflow:"hidden",zIndex:this.settings.zIndex}),this.settings.target===t?n.DOM.appendToBody(this.toolbarEl):n.DOM.appendChild(this.toolbarEl,this.settings.target),n.DOM.hide(this.toolbarEl),this.closeEl=n.DOM.find("."+i.Toolbar.CssClasses.close,this.toolbarEl)[0],this.settings.preventHide&&!n.isNothing(this.closeEl)&&n.DOM.hide(this.closeEl),this.playEl=n.DOM.find("."+i.Toolbar.CssClasses.play,this.toolbarEl)[0],this.settings.preventSlideshow&&!n.isNothing(this.playEl)&&n.DOM.hide(this.playEl),this.nextEl=n.DOM.find("."+i.Toolbar.CssClasses.next,this.toolbarEl)[0],this.previousEl=n.DOM.find("."+i.Toolbar.CssClasses.previous,this.toolbarEl)[0],s=i.Toolbar.CssClasses.caption,this.settings.captionAndToolbarFlipPosition&&(s=s+" "+i.Toolbar.CssClasses.captionBottom),this.captionEl=n.DOM.createElement("div",{"class":s},""),n.DOM.setStyle(this.captionEl,{left:0,position:"absolute",overflow:"hidden",zIndex:this.settings.zIndex}),this.settings.target===t?n.DOM.appendToBody(this.captionEl):n.DOM.appendChild(this.captionEl,this.settings.target),n.DOM.hide(this.captionEl),this.captionContentEl=n.DOM.createElement("div",{"class":i.Toolbar.CssClasses.captionContent},""),n.DOM.appendChild(this.captionContentEl,this.captionEl),this.addEventHandlers()
},resetPosition:function(){var e,i,o;this.settings.target===t?(this.settings.captionAndToolbarFlipPosition?(i=n.DOM.windowScrollTop(),o=n.DOM.windowScrollTop()+n.DOM.windowHeight()-n.DOM.height(this.captionEl)):(i=n.DOM.windowScrollTop()+n.DOM.windowHeight()-n.DOM.height(this.toolbarEl),o=n.DOM.windowScrollTop()),e=n.DOM.windowWidth()):(this.settings.captionAndToolbarFlipPosition?(i="0",o=n.DOM.height(this.settings.target)-n.DOM.height(this.captionEl)):(i=n.DOM.height(this.settings.target)-n.DOM.height(this.toolbarEl),o=0),e=n.DOM.width(this.settings.target)),n.DOM.setStyle(this.toolbarEl,{top:i+"px",width:e}),n.DOM.setStyle(this.captionEl,{top:o+"px",width:e})},toggleVisibility:function(t){this.isVisible?this.fadeOut():this.show(t)},show:function(t){n.Animation.stop(this.toolbarEl),n.Animation.stop(this.captionEl),this.resetPosition(),this.setToolbarStatus(t),n.Events.fire(this,{type:i.Toolbar.EventTypes.onBeforeShow,target:this}),this.showToolbar(),this.setCaption(t),this.showCaption(),this.isVisible=!0,this.setTimeout(),n.Events.fire(this,{type:i.Toolbar.EventTypes.onShow,target:this})},setTimeout:function(){this.settings.captionAndToolbarAutoHideDelay>0&&(this.clearTimeout(),this.timeout=t.setTimeout(this.fadeOut.bind(this),this.settings.captionAndToolbarAutoHideDelay))},clearTimeout:function(){n.isNothing(this.timeout)||(t.clearTimeout(this.timeout),this.timeout=null)},fadeOut:function(){this.clearTimeout(),n.Events.fire(this,{type:i.Toolbar.EventTypes.onBeforeHide,target:this}),n.Animation.fadeOut(this.toolbarEl,this.settings.fadeOutSpeed),n.Animation.fadeOut(this.captionEl,this.settings.fadeOutSpeed,this.fadeOutHandler),this.isVisible=!1},addEventHandlers:function(){n.Browser.isTouchSupported&&(n.Browser.blackberry||n.Events.add(this.toolbarEl,"touchstart",this.touchStartHandler),n.Events.add(this.toolbarEl,"touchmove",this.touchMoveHandler),n.Events.add(this.captionEl,"touchmove",this.touchMoveHandler)),n.Events.add(this.toolbarEl,"click",this.clickHandler)},removeEventHandlers:function(){n.Browser.isTouchSupported&&(n.Browser.blackberry||n.Events.remove(this.toolbarEl,"touchstart",this.touchStartHandler),n.Events.remove(this.toolbarEl,"touchmove",this.touchMoveHandler),n.Events.remove(this.captionEl,"touchmove",this.touchMoveHandler)),n.Events.remove(this.toolbarEl,"click",this.clickHandler)},handleTap:function(t){this.clearTimeout();var e;t.target===this.nextEl||n.DOM.isChildOf(t.target,this.nextEl)?e=i.Toolbar.ToolbarAction.next:t.target===this.previousEl||n.DOM.isChildOf(t.target,this.previousEl)?e=i.Toolbar.ToolbarAction.previous:t.target===this.closeEl||n.DOM.isChildOf(t.target,this.closeEl)?e=i.Toolbar.ToolbarAction.close:(t.target===this.playEl||n.DOM.isChildOf(t.target,this.playEl))&&(e=i.Toolbar.ToolbarAction.play),this.setTimeout(),n.isNothing(e)&&(e=i.Toolbar.ToolbarAction.none),n.Events.fire(this,{type:i.Toolbar.EventTypes.onTap,target:this,action:e,tapTarget:t.target})},setCaption:function(t){n.DOM.removeChildren(this.captionContentEl),this.currentCaption=n.coalesce(this.cache.images[t].caption," "),n.isObject(this.currentCaption)?n.DOM.appendChild(this.currentCaption,this.captionContentEl):(""===this.currentCaption&&(this.currentCaption=" "),n.DOM.appendText(this.currentCaption,this.captionContentEl)),this.currentCaption=" "===this.currentCaption?"":this.currentCaption,this.resetPosition()},showToolbar:function(){n.DOM.setStyle(this.toolbarEl,{opacity:this.settings.captionAndToolbarOpacity}),n.DOM.show(this.toolbarEl)},showCaption:function(){(""===this.currentCaption||1>this.captionContentEl.childNodes.length)&&!this.settings.captionAndToolbarShowEmptyCaptions?n.DOM.hide(this.captionEl):(n.DOM.setStyle(this.captionEl,{opacity:this.settings.captionAndToolbarOpacity}),n.DOM.show(this.captionEl))},setToolbarStatus:function(t){this.settings.loop||(t>0&&this.cache.images.length-1>t?(n.DOM.removeClass(this.previousEl,i.Toolbar.CssClasses.previousDisabled),n.DOM.removeClass(this.nextEl,i.Toolbar.CssClasses.nextDisabled)):(0===t&&(n.isNothing(this.previousEl)||n.DOM.addClass(this.previousEl,i.Toolbar.CssClasses.previousDisabled)),t===this.cache.images.length-1&&(n.isNothing(this.nextEl)||n.DOM.addClass(this.nextEl,i.Toolbar.CssClasses.nextDisabled))))},onFadeOut:function(){n.DOM.hide(this.toolbarEl),n.DOM.hide(this.captionEl),n.Events.fire(this,{type:i.Toolbar.EventTypes.onHide,target:this})},onTouchStart:function(t){t.preventDefault(),n.Events.remove(this.toolbarEl,"click",this.clickHandler),this.handleTap(t)},onTouchMove:function(t){t.preventDefault()},onClick:function(t){t.preventDefault(),this.handleTap(t)}})}(window,window.klass,window.Code.Util),function(t,e,n){n.registerNamespace("Code.PhotoSwipe.UILayer"),t.Code.PhotoSwipe.UILayer.CssClasses={uiLayer:"ps-uilayer"}}(window,window.klass,window.Code.Util),function(t,e,n){n.registerNamespace("Code.PhotoSwipe.UILayer");var i=t.Code.PhotoSwipe;i.UILayer.UILayerClass=n.TouchElement.TouchElementClass.extend({el:null,settings:null,dispose:function(){var t;this.removeEventHandlers(),n.DOM.removeChild(this.el,this.el.parentNode);for(t in this)n.objectHasProperty(this,t)&&(this[t]=null)},initialize:function(e){this.settings=e,this.el=n.DOM.createElement("div",{"class":i.UILayer.CssClasses.uiLayer},""),n.DOM.setStyle(this.el,{display:"block",position:"absolute",left:0,top:0,overflow:"hidden",zIndex:this.settings.zIndex,opacity:0}),n.DOM.hide(this.el),this.settings.target===t?n.DOM.appendToBody(this.el):n.DOM.appendChild(this.el,this.settings.target),this.supr(this.el,{swipe:!0,move:!0,gesture:n.Browser.iOS,doubleTap:!0,preventDefaultTouchEvents:this.settings.preventDefaultTouchEvents})},resetPosition:function(){this.settings.target===t?n.DOM.setStyle(this.el,{top:n.DOM.windowScrollTop()+"px",width:n.DOM.windowWidth(),height:n.DOM.windowHeight()}):n.DOM.setStyle(this.el,{top:"0px",width:n.DOM.width(this.settings.target),height:n.DOM.height(this.settings.target)})},show:function(){this.resetPosition(),n.DOM.show(this.el),this.addEventHandlers()},addEventHandlers:function(){this.supr()},removeEventHandlers:function(){this.supr()}})}(window,window.klass,window.Code.Util),function(t,e,n){n.registerNamespace("Code.PhotoSwipe.ZoomPanRotate"),t=t.Code.PhotoSwipe,t.ZoomPanRotate.CssClasses={zoomPanRotate:"ps-zoom-pan-rotate"},t.ZoomPanRotate.EventTypes={onTransform:"PhotoSwipeZoomPanRotateOnTransform"}}(window,window.klass,window.Code.Util),function(t,e,n){n.registerNamespace("Code.PhotoSwipe.ZoomPanRotate");var i=t.Code.PhotoSwipe;i.ZoomPanRotate.ZoomPanRotateClass=e({el:null,settings:null,containerEl:null,imageEl:null,transformSettings:null,panStartingPoint:null,transformEl:null,dispose:function(){var t;n.DOM.removeChild(this.el,this.el.parentNode);for(t in this)n.objectHasProperty(this,t)&&(this[t]=null)},initialize:function(e,o,s){var r,a,l;this.settings=e,this.settings.target===t?(e=document.body,r=n.DOM.windowWidth(),a=n.DOM.windowHeight(),l=n.DOM.windowScrollTop()+"px"):(e=this.settings.target,r=n.DOM.width(e),a=n.DOM.height(e),l="0px"),this.imageEl=o.imageEl.cloneNode(!1),n.DOM.setStyle(this.imageEl,{zIndex:1}),this.transformSettings={startingScale:1,scale:1,startingRotation:0,rotation:0,startingTranslateX:0,startingTranslateY:0,translateX:0,translateY:0},this.el=n.DOM.createElement("div",{"class":i.ZoomPanRotate.CssClasses.zoomPanRotate},""),n.DOM.setStyle(this.el,{left:0,top:l,position:"absolute",width:r,height:a,zIndex:this.settings.zIndex,display:"block"}),n.DOM.insertBefore(this.el,s.el,e),n.Browser.iOS?(this.containerEl=n.DOM.createElement("div"),n.DOM.setStyle(this.containerEl,{left:0,top:0,width:r,height:a,position:"absolute",zIndex:1}),n.DOM.appendChild(this.imageEl,this.containerEl),n.DOM.appendChild(this.containerEl,this.el),n.Animation.resetTranslate(this.containerEl),n.Animation.resetTranslate(this.imageEl),this.transformEl=this.containerEl):(n.DOM.appendChild(this.imageEl,this.el),this.transformEl=this.imageEl)},setStartingTranslateFromCurrentTransform:function(){var e=n.coalesce(this.transformEl.style.webkitTransform,this.transformEl.style.MozTransform,this.transformEl.style.transform);n.isNothing(e)||(e=e.match(/translate\((.*?)\)/),n.isNothing(e))||(e=e[1].split(", "),this.transformSettings.startingTranslateX=t.parseInt(e[0],10),this.transformSettings.startingTranslateY=t.parseInt(e[1],10))},getScale:function(t){return t*=this.transformSettings.startingScale,0!==this.settings.minUserZoom&&this.settings.minUserZoom>t?t=this.settings.minUserZoom:0!==this.settings.maxUserZoom&&t>this.settings.maxUserZoom&&(t=this.settings.maxUserZoom),t},setStartingScaleAndRotation:function(t,e){this.transformSettings.startingScale=this.getScale(t),this.transformSettings.startingRotation=(this.transformSettings.startingRotation+e)%360},zoomRotate:function(t,e){this.transformSettings.scale=this.getScale(t),this.transformSettings.rotation=this.transformSettings.startingRotation+e,this.applyTransform()},panStart:function(t){this.setStartingTranslateFromCurrentTransform(),this.panStartingPoint={x:t.x,y:t.y}},pan:function(t){var e=(t.y-this.panStartingPoint.y)/this.transformSettings.scale;this.transformSettings.translateX=this.transformSettings.startingTranslateX+(t.x-this.panStartingPoint.x)/this.transformSettings.scale,this.transformSettings.translateY=this.transformSettings.startingTranslateY+e,this.applyTransform()},zoomAndPanToPoint:function(e,i){if(this.settings.target===t){this.panStart({x:n.DOM.windowWidth()/2,y:n.DOM.windowHeight()/2});var o=(i.y-this.panStartingPoint.y)/this.transformSettings.scale;this.transformSettings.translateX=-1*(this.transformSettings.startingTranslateX+(i.x-this.panStartingPoint.x)/this.transformSettings.scale),this.transformSettings.translateY=-1*(this.transformSettings.startingTranslateY+o)}this.setStartingScaleAndRotation(e,0),this.transformSettings.scale=this.transformSettings.startingScale,this.transformSettings.rotation=0,this.applyTransform()},applyTransform:function(){var e=this.transformSettings.rotation%360,o=t.parseInt(this.transformSettings.translateX,10),s=t.parseInt(this.transformSettings.translateY,10),r="scale("+this.transformSettings.scale+") rotate("+e+"deg) translate("+o+"px, "+s+"px)";n.DOM.setStyle(this.transformEl,{webkitTransform:r,MozTransform:r,msTransform:r,transform:r}),n.Events.fire(this,{target:this,type:i.ZoomPanRotate.EventTypes.onTransform,scale:this.transformSettings.scale,rotation:this.transformSettings.rotation,rotationDegs:e,translateX:o,translateY:s})}})}(window,window.klass,window.Code.Util),function(t,e){e.registerNamespace("Code.PhotoSwipe");var n=t.Code.PhotoSwipe;n.CssClasses={buildingBody:"ps-building",activeBody:"ps-active"},n.EventTypes={onBeforeShow:"PhotoSwipeOnBeforeShow",onShow:"PhotoSwipeOnShow",onBeforeHide:"PhotoSwipeOnBeforeHide",onHide:"PhotoSwipeOnHide",onDisplayImage:"PhotoSwipeOnDisplayImage",onResetPosition:"PhotoSwipeOnResetPosition",onSlideshowStart:"PhotoSwipeOnSlideshowStart",onSlideshowStop:"PhotoSwipeOnSlideshowStop",onTouch:"PhotoSwipeOnTouch",onBeforeCaptionAndToolbarShow:"PhotoSwipeOnBeforeCaptionAndToolbarShow",onCaptionAndToolbarShow:"PhotoSwipeOnCaptionAndToolbarShow",onBeforeCaptionAndToolbarHide:"PhotoSwipeOnBeforeCaptionAndToolbarHide",onCaptionAndToolbarHide:"PhotoSwipeOnCaptionAndToolbarHide",onToolbarTap:"PhotoSwipeOnToolbarTap",onBeforeZoomPanRotateShow:"PhotoSwipeOnBeforeZoomPanRotateShow",onZoomPanRotateShow:"PhotoSwipeOnZoomPanRotateShow",onBeforeZoomPanRotateHide:"PhotoSwipeOnBeforeZoomPanRotateHide",onZoomPanRotateHide:"PhotoSwipeOnZoomPanRotateHide",onZoomPanRotateTransform:"PhotoSwipeOnZoomPanRotateTransform"},n.instances=[],n.activeInstances=[],n.setActivateInstance=function(t){if(e.arrayIndexOf(t.settings.target,n.activeInstances,"target")>-1)throw"Code.PhotoSwipe.activateInstance: Unable to active instance as another instance is already active for this target";n.activeInstances.push({target:t.settings.target,instance:t})},n.unsetActivateInstance=function(t){t=e.arrayIndexOf(t,n.activeInstances,"instance"),n.activeInstances.splice(t,1)},n.attach=function(t,i,o){var s,r;for(s=n.createInstance(t,i,o),i=0,o=t.length;o>i;i++)r=t[i],e.isNothing(r.nodeType)||1!==r.nodeType||(r.__photoSwipeClickHandler=n.onTriggerElementClick.bind(s),e.Events.remove(r,"click",r.__photoSwipeClickHandler),e.Events.add(r,"click",r.__photoSwipeClickHandler));return s},t.jQuery&&(t.jQuery.fn.photoSwipe=function(t,e){return n.attach(this,t,e)}),n.detatch=function(t){var i,o,s;for(i=0,o=t.originalImages.length;o>i;i++)s=t.originalImages[i],!e.isNothing(s.nodeType)&&1===s.nodeType&&(e.Events.remove(s,"click",s.__photoSwipeClickHandler),delete s.__photoSwipeClickHandler);n.disposeInstance(t)},n.createInstance=function(t,i,o){var s;if(e.isNothing(t))throw"Code.PhotoSwipe.attach: No images passed.";if(!e.isLikeArray(t))throw"Code.PhotoSwipe.createInstance: Images must be an array of elements or image urls.";if(1>t.length)throw"Code.PhotoSwipe.createInstance: No images to passed.";if(i=e.coalesce(i,{}),s=n.getInstance(o),!e.isNothing(s))throw'Code.PhotoSwipe.createInstance: Instance with id "'+o+' already exists."';return s=new n.PhotoSwipeClass(t,i,o),n.instances.push(s),s},n.disposeInstance=function(t){var e=n.getInstanceIndex(t);if(0>e)throw"Code.PhotoSwipe.disposeInstance: Unable to find instance to dispose.";t.dispose(),n.instances.splice(e,1)},n.onTriggerElementClick=function(t){t.preventDefault(),this.show(t.currentTarget)},n.getInstance=function(t){var e,i,o;for(e=0,i=n.instances.length;i>e;e++)if(o=n.instances[e],o.id===t)return o;return null},n.getInstanceIndex=function(t){var e,i,o=-1;for(e=0,i=n.instances.length;i>e;e++)if(n.instances[e]===t){o=e;break}return o}}(window,window.Code.Util),function(t,e,n,i,o,s,r,a,l){n.registerNamespace("Code.PhotoSwipe");var u=t.Code.PhotoSwipe;u.PhotoSwipeClass=e({id:null,settings:null,isBackEventSupported:null,backButtonClicked:null,currentIndex:null,originalImages:null,mouseWheelStartTime:null,windowDimensions:null,cache:null,documentOverlay:null,carousel:null,uiLayer:null,toolbar:null,zoomPanRotate:null,windowOrientationChangeHandler:null,windowScrollHandler:null,windowHashChangeHandler:null,keyDownHandler:null,windowOrientationEventName:null,uiLayerTouchHandler:null,carouselSlideByEndHandler:null,carouselSlideshowStartHandler:null,carouselSlideshowStopHandler:null,toolbarTapHandler:null,toolbarBeforeShowHandler:null,toolbarShowHandler:null,toolbarBeforeHideHandler:null,toolbarHideHandler:null,mouseWheelHandler:null,zoomPanRotateTransformHandler:null,_isResettingPosition:null,_uiWebViewResetPositionTimeout:null,dispose:function(){var t;n.Events.remove(this,u.EventTypes.onBeforeShow),n.Events.remove(this,u.EventTypes.onShow),n.Events.remove(this,u.EventTypes.onBeforeHide),n.Events.remove(this,u.EventTypes.onHide),n.Events.remove(this,u.EventTypes.onDisplayImage),n.Events.remove(this,u.EventTypes.onResetPosition),n.Events.remove(this,u.EventTypes.onSlideshowStart),n.Events.remove(this,u.EventTypes.onSlideshowStop),n.Events.remove(this,u.EventTypes.onTouch),n.Events.remove(this,u.EventTypes.onBeforeCaptionAndToolbarShow),n.Events.remove(this,u.EventTypes.onCaptionAndToolbarShow),n.Events.remove(this,u.EventTypes.onBeforeCaptionAndToolbarHide),n.Events.remove(this,u.EventTypes.onCaptionAndToolbarHide),n.Events.remove(this,u.EventTypes.onZoomPanRotateTransform),this.removeEventHandlers(),n.isNothing(this.documentOverlay)||this.documentOverlay.dispose(),n.isNothing(this.carousel)||this.carousel.dispose(),n.isNothing(this.uiLayer)||this.uiLayer.dispose(),n.isNothing(this.toolbar)||this.toolbar.dispose(),this.destroyZoomPanRotate(),n.isNothing(this.cache)||this.cache.dispose();for(t in this)n.objectHasProperty(this,t)&&(this[t]=null)},initialize:function(e,o,s){this.id=n.isNothing(s)?"PhotoSwipe"+(""+(new Date).getTime()):s,this.originalImages=e,n.Browser.android&&(""+t.navigator.userAgent.match(/Android (\d+.\d+)/)).replace(/^.*\,/,"")>=2.1&&(this.isBackEventSupported=!0),this.isBackEventSupported||(this.isBackEventSupported=n.objectHasProperty(t,"onhashchange")),this.settings={fadeInSpeed:250,fadeOutSpeed:250,preventHide:!1,preventSlideshow:!1,zIndex:1e3,backButtonHideEnabled:!0,enableKeyboard:!0,enableMouseWheel:!0,mouseWheelSpeed:350,autoStartSlideshow:!1,jQueryMobile:!n.isNothing(t.jQuery)&&!n.isNothing(t.jQuery.mobile),jQueryMobileDialogHash:"&ui-state=dialog",enableUIWebViewRepositionTimeout:!1,uiWebViewResetPositionDelay:500,target:t,preventDefaultTouchEvents:!0,loop:!0,slideSpeed:250,nextPreviousSlideSpeed:0,enableDrag:!0,swipeThreshold:50,swipeTimeThreshold:250,slideTimingFunction:"ease-out",slideshowDelay:3e3,doubleTapSpeed:250,margin:20,imageScaleMethod:"fit",captionAndToolbarHide:!1,captionAndToolbarFlipPosition:!1,captionAndToolbarAutoHideDelay:5e3,captionAndToolbarOpacity:.8,captionAndToolbarShowEmptyCaptions:!0,getToolbar:u.Toolbar.getToolbar,allowUserZoom:!0,allowRotationOnUserZoom:!1,maxUserZoom:5,minUserZoom:.5,doubleTapZoomLevel:2.5,getImageSource:u.Cache.Functions.getImageSource,getImageCaption:u.Cache.Functions.getImageCaption,getImageMetaData:u.Cache.Functions.getImageMetaData,cacheMode:u.Cache.Mode.normal},n.extend(this.settings,o),this.settings.target!==t&&(o=n.DOM.getStyle(this.settings.target,"position"),("relative"!==o||"absolute"!==o)&&n.DOM.setStyle(this.settings.target,"position","relative")),this.settings.target!==t?(this.isBackEventSupported=!1,this.settings.backButtonHideEnabled=!1):this.settings.preventHide&&(this.settings.backButtonHideEnabled=!1),this.cache=new i.CacheClass(e,this.settings)},show:function(e){var i,o;if(this.backButtonClicked=this._isResettingPosition=!1,n.isNumber(e))this.currentIndex=e;else for(this.currentIndex=-1,i=0,o=this.originalImages.length;o>i;i++)if(this.originalImages[i]===e){this.currentIndex=i;break}if(0>this.currentIndex||this.currentIndex>this.originalImages.length-1)throw"Code.PhotoSwipe.PhotoSwipeClass.show: Starting index out of range";this.isAlreadyGettingPage=this.getWindowDimensions(),u.setActivateInstance(this),this.windowDimensions=this.getWindowDimensions(),this.settings.target===t?n.DOM.addClass(t.document.body,u.CssClasses.buildingBody):n.DOM.addClass(this.settings.target,u.CssClasses.buildingBody),this.createComponents(),n.Events.fire(this,{type:u.EventTypes.onBeforeShow,target:this}),this.documentOverlay.fadeIn(this.settings.fadeInSpeed,this.onDocumentOverlayFadeIn.bind(this))},getWindowDimensions:function(){return{width:n.DOM.windowWidth(),height:n.DOM.windowHeight()}},createComponents:function(){this.documentOverlay=new o.DocumentOverlayClass(this.settings),this.carousel=new s.CarouselClass(this.cache,this.settings),this.uiLayer=new a.UILayerClass(this.settings),this.settings.captionAndToolbarHide||(this.toolbar=new r.ToolbarClass(this.cache,this.settings))},resetPosition:function(){if(!this._isResettingPosition){var t=this.getWindowDimensions();(n.isNothing(this.windowDimensions)||t.width!==this.windowDimensions.width||t.height!==this.windowDimensions.height)&&(this._isResettingPosition=!0,this.windowDimensions=t,this.destroyZoomPanRotate(),this.documentOverlay.resetPosition(),this.carousel.resetPosition(),n.isNothing(this.toolbar)||this.toolbar.resetPosition(),this.uiLayer.resetPosition(),this._isResettingPosition=!1,n.Events.fire(this,{type:u.EventTypes.onResetPosition,target:this}))}},addEventHandler:function(t,e){n.Events.add(this,t,e)},addEventHandlers:function(){n.isNothing(this.windowOrientationChangeHandler)&&(this.windowOrientationChangeHandler=this.onWindowOrientationChange.bind(this),this.windowScrollHandler=this.onWindowScroll.bind(this),this.keyDownHandler=this.onKeyDown.bind(this),this.windowHashChangeHandler=this.onWindowHashChange.bind(this),this.uiLayerTouchHandler=this.onUILayerTouch.bind(this),this.carouselSlideByEndHandler=this.onCarouselSlideByEnd.bind(this),this.carouselSlideshowStartHandler=this.onCarouselSlideshowStart.bind(this),this.carouselSlideshowStopHandler=this.onCarouselSlideshowStop.bind(this),this.toolbarTapHandler=this.onToolbarTap.bind(this),this.toolbarBeforeShowHandler=this.onToolbarBeforeShow.bind(this),this.toolbarShowHandler=this.onToolbarShow.bind(this),this.toolbarBeforeHideHandler=this.onToolbarBeforeHide.bind(this),this.toolbarHideHandler=this.onToolbarHide.bind(this),this.mouseWheelHandler=this.onMouseWheel.bind(this),this.zoomPanRotateTransformHandler=this.onZoomPanRotateTransform.bind(this)),n.Browser.android?this.orientationEventName="resize":n.Browser.iOS&&!n.Browser.safari?n.Events.add(t.document.body,"orientationchange",this.windowOrientationChangeHandler):this.orientationEventName=n.isNothing(t.onorientationchange)?"resize":"orientationchange",n.isNothing(this.orientationEventName)||n.Events.add(t,this.orientationEventName,this.windowOrientationChangeHandler),this.settings.target===t&&n.Events.add(t,"scroll",this.windowScrollHandler),this.settings.enableKeyboard&&n.Events.add(t.document,"keydown",this.keyDownHandler),this.isBackEventSupported&&this.settings.backButtonHideEnabled&&(this.windowHashChangeHandler=this.onWindowHashChange.bind(this),this.settings.jQueryMobile?t.location.hash=this.settings.jQueryMobileDialogHash:(this.currentHistoryHashValue="PhotoSwipe"+(""+(new Date).getTime()),t.location.hash=this.currentHistoryHashValue),n.Events.add(t,"hashchange",this.windowHashChangeHandler)),this.settings.enableMouseWheel&&n.Events.add(t,"mousewheel",this.mouseWheelHandler),n.Events.add(this.uiLayer,n.TouchElement.EventTypes.onTouch,this.uiLayerTouchHandler),n.Events.add(this.carousel,s.EventTypes.onSlideByEnd,this.carouselSlideByEndHandler),n.Events.add(this.carousel,s.EventTypes.onSlideshowStart,this.carouselSlideshowStartHandler),n.Events.add(this.carousel,s.EventTypes.onSlideshowStop,this.carouselSlideshowStopHandler),n.isNothing(this.toolbar)||(n.Events.add(this.toolbar,r.EventTypes.onTap,this.toolbarTapHandler),n.Events.add(this.toolbar,r.EventTypes.onBeforeShow,this.toolbarBeforeShowHandler),n.Events.add(this.toolbar,r.EventTypes.onShow,this.toolbarShowHandler),n.Events.add(this.toolbar,r.EventTypes.onBeforeHide,this.toolbarBeforeHideHandler),n.Events.add(this.toolbar,r.EventTypes.onHide,this.toolbarHideHandler))},removeEventHandlers:function(){n.Browser.iOS&&!n.Browser.safari&&n.Events.remove(t.document.body,"orientationchange",this.windowOrientationChangeHandler),n.isNothing(this.orientationEventName)||n.Events.remove(t,this.orientationEventName,this.windowOrientationChangeHandler),n.Events.remove(t,"scroll",this.windowScrollHandler),this.settings.enableKeyboard&&n.Events.remove(t.document,"keydown",this.keyDownHandler),this.isBackEventSupported&&this.settings.backButtonHideEnabled&&n.Events.remove(t,"hashchange",this.windowHashChangeHandler),this.settings.enableMouseWheel&&n.Events.remove(t,"mousewheel",this.mouseWheelHandler),n.isNothing(this.uiLayer)||n.Events.remove(this.uiLayer,n.TouchElement.EventTypes.onTouch,this.uiLayerTouchHandler),n.isNothing(this.toolbar)||(n.Events.remove(this.carousel,s.EventTypes.onSlideByEnd,this.carouselSlideByEndHandler),n.Events.remove(this.carousel,s.EventTypes.onSlideshowStart,this.carouselSlideshowStartHandler),n.Events.remove(this.carousel,s.EventTypes.onSlideshowStop,this.carouselSlideshowStopHandler)),n.isNothing(this.toolbar)||(n.Events.remove(this.toolbar,r.EventTypes.onTap,this.toolbarTapHandler),n.Events.remove(this.toolbar,r.EventTypes.onBeforeShow,this.toolbarBeforeShowHandler),n.Events.remove(this.toolbar,r.EventTypes.onShow,this.toolbarShowHandler),n.Events.remove(this.toolbar,r.EventTypes.onBeforeHide,this.toolbarBeforeHideHandler),n.Events.remove(this.toolbar,r.EventTypes.onHide,this.toolbarHideHandler))},hide:function(){if(!this.settings.preventHide){if(n.isNothing(this.documentOverlay))throw"Code.PhotoSwipe.PhotoSwipeClass.hide: PhotoSwipe instance is already hidden";n.isNothing(this.hiding)&&(this.clearUIWebViewResetPositionTimeout(),this.destroyZoomPanRotate(),this.removeEventHandlers(),n.Events.fire(this,{type:u.EventTypes.onBeforeHide,target:this}),this.uiLayer.dispose(),this.uiLayer=null,n.isNothing(this.toolbar)||(this.toolbar.dispose(),this.toolbar=null),this.carousel.dispose(),this.carousel=null,n.DOM.removeClass(t.document.body,u.CssClasses.activeBody),this.documentOverlay.dispose(),this.documentOverlay=null,this._isResettingPosition=!1,u.unsetActivateInstance(this),n.Events.fire(this,{type:u.EventTypes.onHide,target:this}),this.goBackInHistory())}},goBackInHistory:function(){this.isBackEventSupported&&this.settings.backButtonHideEnabled&&(this.backButtonClicked||t.history.back())},play:function(){!this.isZoomActive()&&!this.settings.preventSlideshow&&!n.isNothing(this.carousel)&&(!n.isNothing(this.toolbar)&&this.toolbar.isVisible&&this.toolbar.fadeOut(),this.carousel.startSlideshow())},stop:function(){this.isZoomActive()||n.isNothing(this.carousel)||this.carousel.stopSlideshow()},previous:function(){this.isZoomActive()||n.isNothing(this.carousel)||this.carousel.previous()},next:function(){this.isZoomActive()||n.isNothing(this.carousel)||this.carousel.next()},toggleToolbar:function(){this.isZoomActive()||n.isNothing(this.toolbar)||this.toolbar.toggleVisibility(this.currentIndex)},fadeOutToolbarIfVisible:function(){!n.isNothing(this.toolbar)&&this.toolbar.isVisible&&this.settings.captionAndToolbarAutoHideDelay>0&&this.toolbar.fadeOut()},createZoomPanRotate:function(){this.stop(),this.canUserZoom()&&!this.isZoomActive()&&(n.Events.fire(this,u.EventTypes.onBeforeZoomPanRotateShow),this.zoomPanRotate=new l.ZoomPanRotateClass(this.settings,this.cache.images[this.currentIndex],this.uiLayer),this.uiLayer.captureSettings.preventDefaultTouchEvents=!0,n.Events.add(this.zoomPanRotate,u.ZoomPanRotate.EventTypes.onTransform,this.zoomPanRotateTransformHandler),n.Events.fire(this,u.EventTypes.onZoomPanRotateShow),!n.isNothing(this.toolbar)&&this.toolbar.isVisible&&this.toolbar.fadeOut())},destroyZoomPanRotate:function(){n.isNothing(this.zoomPanRotate)||(n.Events.fire(this,u.EventTypes.onBeforeZoomPanRotateHide),n.Events.remove(this.zoomPanRotate,u.ZoomPanRotate.EventTypes.onTransform,this.zoomPanRotateTransformHandler),this.zoomPanRotate.dispose(),this.zoomPanRotate=null,this.uiLayer.captureSettings.preventDefaultTouchEvents=this.settings.preventDefaultTouchEvents,n.Events.fire(this,u.EventTypes.onZoomPanRotateHide))},canUserZoom:function(){var t;if(n.Browser.msie){if(t=document.createElement("div"),n.isNothing(t.style.msTransform))return!1}else if(!n.Browser.isCSSTransformSupported)return!1;return this.settings.allowUserZoom?this.carousel.isSliding?!1:(t=this.cache.images[this.currentIndex],n.isNothing(t)?!1:t.isLoading?!1:!0):!1},isZoomActive:function(){return!n.isNothing(this.zoomPanRotate)},getCurrentImage:function(){return this.cache.images[this.currentIndex]},onDocumentOverlayFadeIn:function(){t.setTimeout(function(){var e=this.settings.target===t?t.document.body:this.settings.target;n.DOM.removeClass(e,u.CssClasses.buildingBody),n.DOM.addClass(e,u.CssClasses.activeBody),this.addEventHandlers(),this.carousel.show(this.currentIndex),this.uiLayer.show(),this.settings.autoStartSlideshow?this.play():n.isNothing(this.toolbar)||this.toolbar.show(this.currentIndex),n.Events.fire(this,{type:u.EventTypes.onShow,target:this}),this.setUIWebViewResetPositionTimeout()}.bind(this),250)},setUIWebViewResetPositionTimeout:function(){this.settings.enableUIWebViewRepositionTimeout&&n.Browser.iOS&&!n.Browser.safari&&(n.isNothing(this._uiWebViewResetPositionTimeout)||t.clearTimeout(this._uiWebViewResetPositionTimeout),this._uiWebViewResetPositionTimeout=t.setTimeout(function(){this.resetPosition(),this.setUIWebViewResetPositionTimeout()}.bind(this),this.settings.uiWebViewResetPositionDelay))},clearUIWebViewResetPositionTimeout:function(){n.isNothing(this._uiWebViewResetPositionTimeout)||t.clearTimeout(this._uiWebViewResetPositionTimeout)},onWindowScroll:function(){this.resetPosition()},onWindowOrientationChange:function(){this.resetPosition()},onWindowHashChange:function(){t.location.hash!=="#"+(this.settings.jQueryMobile?this.settings.jQueryMobileDialogHash:this.currentHistoryHashValue)&&(this.backButtonClicked=!0,this.hide())},onKeyDown:function(t){37===t.keyCode?(t.preventDefault(),this.previous()):39===t.keyCode?(t.preventDefault(),this.next()):38===t.keyCode||40===t.keyCode?t.preventDefault():27===t.keyCode?(t.preventDefault(),this.hide()):32===t.keyCode?(this.settings.hideToolbar?this.hide():this.toggleToolbar(),t.preventDefault()):13===t.keyCode&&(t.preventDefault(),this.play())},onUILayerTouch:function(e){if(this.isZoomActive())switch(e.action){case n.TouchElement.ActionTypes.gestureChange:this.zoomPanRotate.zoomRotate(e.scale,this.settings.allowRotationOnUserZoom?e.rotation:0);break;case n.TouchElement.ActionTypes.gestureEnd:this.zoomPanRotate.setStartingScaleAndRotation(e.scale,this.settings.allowRotationOnUserZoom?e.rotation:0);break;case n.TouchElement.ActionTypes.touchStart:this.zoomPanRotate.panStart(e.point);break;case n.TouchElement.ActionTypes.touchMove:this.zoomPanRotate.pan(e.point);break;case n.TouchElement.ActionTypes.doubleTap:this.destroyZoomPanRotate(),this.toggleToolbar();break;case n.TouchElement.ActionTypes.swipeLeft:this.destroyZoomPanRotate(),this.next(),this.toggleToolbar();break;case n.TouchElement.ActionTypes.swipeRight:this.destroyZoomPanRotate(),this.previous(),this.toggleToolbar()}else switch(e.action){case n.TouchElement.ActionTypes.touchMove:case n.TouchElement.ActionTypes.swipeLeft:case n.TouchElement.ActionTypes.swipeRight:this.fadeOutToolbarIfVisible(),this.carousel.onTouch(e.action,e.point);break;case n.TouchElement.ActionTypes.touchStart:case n.TouchElement.ActionTypes.touchMoveEnd:this.carousel.onTouch(e.action,e.point);break;case n.TouchElement.ActionTypes.tap:this.toggleToolbar();break;case n.TouchElement.ActionTypes.doubleTap:this.settings.target===t&&(e.point.x-=n.DOM.windowScrollLeft(),e.point.y-=n.DOM.windowScrollTop());var i=this.cache.images[this.currentIndex].imageEl,o=t.parseInt(n.DOM.getStyle(i,"top"),10),s=t.parseInt(n.DOM.getStyle(i,"left"),10),r=s+n.DOM.width(i),i=o+n.DOM.height(i);s>e.point.x?e.point.x=s:e.point.x>r&&(e.point.x=r),o>e.point.y?e.point.y=o:e.point.y>i&&(e.point.y=i),this.createZoomPanRotate(),this.isZoomActive()&&this.zoomPanRotate.zoomAndPanToPoint(this.settings.doubleTapZoomLevel,e.point);break;case n.TouchElement.ActionTypes.gestureStart:this.createZoomPanRotate()}n.Events.fire(this,{type:u.EventTypes.onTouch,target:this,point:e.point,action:e.action})},onCarouselSlideByEnd:function(t){this.currentIndex=t.cacheIndex,n.isNothing(this.toolbar)||(this.toolbar.setCaption(this.currentIndex),this.toolbar.setToolbarStatus(this.currentIndex)),n.Events.fire(this,{type:u.EventTypes.onDisplayImage,target:this,action:t.action,index:t.cacheIndex})},onToolbarTap:function(t){switch(t.action){case r.ToolbarAction.next:this.next();break;case r.ToolbarAction.previous:this.previous();break;case r.ToolbarAction.close:this.hide();break;case r.ToolbarAction.play:this.play()}n.Events.fire(this,{type:u.EventTypes.onToolbarTap,target:this,toolbarAction:t.action,tapTarget:t.tapTarget})},onMouseWheel:function(t){var e=n.Events.getWheelDelta(t);t.timeStamp-(this.mouseWheelStartTime||0)<this.settings.mouseWheelSpeed||(this.mouseWheelStartTime=t.timeStamp,this.settings.invertMouseWheel&&(e*=-1),0>e?this.next():e>0&&this.previous())},onCarouselSlideshowStart:function(){n.Events.fire(this,{type:u.EventTypes.onSlideshowStart,target:this})},onCarouselSlideshowStop:function(){n.Events.fire(this,{type:u.EventTypes.onSlideshowStop,target:this})},onToolbarBeforeShow:function(){n.Events.fire(this,{type:u.EventTypes.onBeforeCaptionAndToolbarShow,target:this})},onToolbarShow:function(){n.Events.fire(this,{type:u.EventTypes.onCaptionAndToolbarShow,target:this})},onToolbarBeforeHide:function(){n.Events.fire(this,{type:u.EventTypes.onBeforeCaptionAndToolbarHide,target:this})},onToolbarHide:function(){n.Events.fire(this,{type:u.EventTypes.onCaptionAndToolbarHide,target:this})},onZoomPanRotateTransform:function(t){n.Events.fire(this,{target:this,type:u.EventTypes.onZoomPanRotateTransform,scale:t.scale,rotation:t.rotation,rotationDegs:t.rotationDegs,translateX:t.translateX,translateY:t.translateY})
}})}(window,window.klass,window.Code.Util,window.Code.PhotoSwipe.Cache,window.Code.PhotoSwipe.DocumentOverlay,window.Code.PhotoSwipe.Carousel,window.Code.PhotoSwipe.Toolbar,window.Code.PhotoSwipe.UILayer,window.Code.PhotoSwipe.ZoomPanRotate),define("components/photoswipe/release/3.0.3/code.photoswipe-3.0.3.min",["components/photoswipe/release/3.0.3/lib/klass.min"],function(t){return function(){var e;return e||t.Code.PhotoSwipe}}(this)),function(){function t(t,e,n,i,o,s,r,a){function l(t,n,i,o){var s="string"==typeof i&&"*"===i[0],r=(n.match(/:[^\/]*\b/g)||[]).map(function(t){return t.substr(1)});s&&(i=i.substr(1));var a=function(l,u,h,d){"function"==typeof l&&(d=u,h=l,u=void 0,l=void 0),"function"==typeof u&&(d=h,h=u,u=void 0);for(var p=n,m=angular.extend({},o||{},f,l||{},void 0===f.oauth_token?g:{}),v=0;r.length>v;v++){var y=r[v];void 0!==m[y]&&(p=p.replace(":"+y,escape(m[y])),delete m[y])}if("POST"===t.toUpperCase()){u=u||new FormData;for(var w in m)void 0!==m[w]&&null!==m[w]&&m[w]!==!1&&0/0!==m[w]&&u.append(w,m[w])}var $=s?[]:{},E=e({url:c+p,params:"POST"===t.toUpperCase()?void 0:m,method:t,data:u,headers:angular.extend({"X-Requested-With":void 0},"POST"===t.toUpperCase()?{"Content-Type":!1}:{}),transformResponse:function(t){return"string"==typeof t&&(t=JSON.parse(t)),200>=t.meta.code&&300>t.meta.code?(angular.copy(void 0===i?t.response:t.response[i],$),$):(t.meta.retry=function(){return a(l,u)},delete t.meta.code,t.meta)}});return E.then(h,d),$};return a}function u(){var e=t.defer();return e.reject("not implemented"),e.promise}var c="https://api.foursquare.com/v2/",h=s,d=r,p=a,f={v:20130317},g={client_id:i,client_secret:o},m=function(t){return{users:t(l("get","users/:user_id","user",{user_id:"self"}),{leaderboard:l("get","users/leaderboard","leaderboard"),requests:l("get","users/requests","*requests"),search:l("get","users/search"),badges:l("get","users/:user_id/badges","",{user_id:"self"}),checkins:l("get","users/:user_id/checkins","checkins",{user_id:"self"}),friends:l("get","users/:user_id/friends","friends",{user_id:"self"}),lists:l("get","users/:user_id/lists","lists",{user_id:"self"}),mayorships:l("get","users/:user_id/mayorships","mayorships",{user_id:"self"}),photos:l("get","users/:user_id/photos","photos",{user_id:"self"}),tips:l("get","users/:user_id/tips","tips",{user_id:"self"}),todos:l("get","users/:user_id/todos","todos",{user_id:"self"}),venuehistory:l("get","users/:user_id/venuehistory","venues",{user_id:"self"}),approve:l("post","users/:user_id/approve","user"),deny:l("post","users/:user_id/deny","user"),request:l("post","users/:user_id/request","user"),setpings:l("post","users/:user_id/setpings","user"),unfriend:l("post","users/:user_id/unfriend","user"),update:u}),venues:t(l("get","venues/:venueId","venue"),{add:l("post","venues/add","venue"),categories:l("get","venues/categories","*categories"),explore:l("get","venues/explore"),managed:l("get","venues/managed","*venues"),search:l("get","venues/search"),suggestcompletion:l("get","venues/suggestcompletion","*minivenues"),timeseries:l("get","venues/timeseries","*timeseries"),trending:l("get","venues/trending","*venues"),events:l("get","venues/:venueId/events","events"),herenow:l("get","venues/:venueId/herenow","hereNow"),hours:l("get","venues/:venueId/hours"),likes:l("get","venues/:venueId/likes","likes"),links:l("get","venues/:venueId/links","links"),listed:l("get","venues/:venueId/listed","lists"),menu:l("get","venues/:venueId/menu","menus"),nextvenues:l("get","venues/:venueId/nextvenues","nextVenues"),photos:l("get","venues/:venueId/photos","photos"),similar:l("get","venues/:venueId/similar","similar"),stats:l("get","venues/:venueId/stats","stats"),tips:l("get","venues/:venueId/tips","tips"),dislike:l("post","venues/:venueId/dislike"),edit:l("post","venues/:venueId/edit"),flag:l("post","venues/:venueId/flag"),like:l("post","venues/:venueId/like","likes"),proposeedit:l("post","venues/:venueId/proposeedit"),setrole:l("post","venues/:venueId/setrole")}),venuegroup:t(l("get","venuegroups/:group_id","venuegroup"),{add:l("post","venuegroups/:group_id/add","venuegroup"),"delete":l("post","venuegroups/:group_id/delete"),list:l("get","venuegroups/list","venuegroup"),timeseries:l("post","venuegroups/:group_id/timeseries","timeseries"),addvenue:l("post","venuegroups/:group_id/addvenue"),campaigns:l("get","venuegroups/:group_id/campaigns","campaigns"),edit:l("post","venuegroups/:group_id/edit"),removevenue:l("post","venuegroups/:group_id/removevenue"),update:l("post","venuegroups/:group_id/update","venuegroup")}),checkins:t(l("get","checkins/:checkin_id","checkin"),{add:l("post","checkins/add"),recent:l("get","checkins/recent","*recent"),likes:l("get","checkins/:checkin_id/likes","likes"),addcomment:l("post","checkins/:checkin_id/addcomment","comment"),addpost:l("post","checkins/:checkin_id/addpost","post"),deletecomment:l("post","checkins/:checkin_id/deletecomment","checkin"),like:l("post","checkins/:checkin_id/like","likes"),reply:l("post","checkins/:checkin_id/reply","reply")}),tips:t(l("get","tips/:tip_id","tip"),{add:l("post","tips/add","tip"),search:l("get","tips/search","*tips"),likes:l("get","tips/:tip_id/likes","likes"),listed:l("get","tips/:tip_id/listed","lists"),saves:l("get","tips/:tip_id/saves","saves"),flag:l("post","tips/:tip_id/flag"),like:l("post","tips/:tip_id/like","likes"),unmark:l("post","tips/:tip_id/unmark","tip")}),lists:t(l("get","lists/:list_id","list"),{add:l("post","lists/add","list"),followers:l("get","lists/:list_id/followers","followers"),saves:l("get","lists/:list_id/saves","saves"),suggestphoto:l("get","lists/:list_id/suggestphoto","photos"),suggesttip:l("get","lists/:list_id/suggesttip","tips"),suggestvenues:l("get","lists/:list_id/suggestvenues","suggestedVenues"),additem:l("post","lists/:list_id/additem"),deleteitem:l("post","lists/:list_id/deleteitem"),follow:l("post","lists/:list_id/follow","list"),moveitem:l("post","lists/:list_id/moveitem","list"),share:l("post","lists/:list_id/share"),unfollow:l("post","lists/:list_id/unfollow","list"),update:l("post","lists/:list_id/update","list"),updateitem:l("post","lists/:list_id/updateitem")}),updates:t(l("get","updates/:update_id","notification"),{notifications:l("get","updates/notifications","notifications"),marknotificationsread:l("get","updates/marknotificationsread","notifications")}),photos:t(l("get","photos/:photo_id","photo"),{add:l("post","photos/add","photo")}),settings:t(l("get","settings/:setting_id","value"),{all:l("get","settings/all","settings"),set:l("post","settings/:setting_id/set","settings")}),specials:t(l("get","specials/:special_id","special"),{add:l("post","specials/add","special"),list:l("get","specials/list","specials"),search:l("get","specials/search","*specials"),configuration:l("post","specials/:special_id/configuration","special"),flag:l("post","specials/:special_id/flag"),retire:l("post","specials/:special_id/retire")}),campaigns:t(l("get","campaigns/:campaign_id","campaigns"),{add:l("post","campaigns/add","campaign"),list:l("get","campaigns/list","matches"),timeseries:l("get","campaigns/:campaign_id/timeseries","*timeseries"),"delete":l("post","campaigns/:campaign_id/delete"),end:l("post","campaigns/:campaign_id/end"),start:l("post","campaigns/:campaign_id/start")}),events:t(l("get","events/:event_id","event"),{categories:l("get","events/categories","*categories"),search:l("get","events/search","*event"),add:l("post","events/add","event")}),pages:t(l("get","pages/:user_id","user"),{add:l("post","pages/add"),managing:l("get","pages/managing","*managing"),search:l("get","pages/search","*results"),timeseries:l("get","pages/:page_id/timeseries","*timeseries"),venues:l("get","pages/:page_id/venues","venues"),like:l("post","pages/:page_id/like","user")}),pageupdate:t(l("get","pageupdates/:update_id","pageUpdate"),{add:l("post","pageupdates/add","pageUpdate"),list:l("get","pageupdates/list","pageUpdates"),"delete":l("post","pageupdates/:update_id/delete"),like:l("post","pageupdates/:update_id/like")})}}(angular.extend),v={defaultParameters:function(t){return f=angular.extend(f,t),v.logged=void 0!==f.oauth_token,f},setOAuthToken:function(t){v.defaultParameters({oauth_token:t})},setLocale:function(t){v.defaultParameters({locale:t}),n.apply()},authURI:function(t,e){return"https://foursquare.com/oauth2/authenticate?client_id="+g.client_id+"&display="+(t||"")+"&response_type="+(e||"token")+"&redirect_uri="+encodeURI(h)},login:function(e,i,o){var s=t.defer();if(v.logged===!1)var r=window.setInterval(function(){this.closed&&(window.clearInterval(r),v.setOAuthToken(p()),v.logged?s.resolve():s.reject(),n.$apply())}.bind(window.open(v.authURI(i,o))),e||500);else s.resolve();return s.promise},logout:function(){v.setOAuthToken(void 0),d(void 0)},api:m};return v.setOAuthToken(p()),v}function e(){var e={clientId:void 0,clientSecret:void 0,redirectURI:void 0,saveOAuthToken:function(t){void 0===t?localStorage.removeItem("foursquare_oauth_token"):localStorage.foursquare_oauth_token=t},getOAuthToken:function(){return localStorage.foursquare_oauth_token}};this.config=function(t){for(var n in t)e[n]=t[n]||e[n];var i=location.hash.split("#access_token=")[1];void 0!==i&&"function"==typeof e.saveOAuthToken&&(e.saveOAuthToken(i),window.close())},this.setPath=function(t){n=t},this.$get=["$q","$http","$rootScope",function(n,i,o){return new t(n,i,o,e.clientId,e.clientSecret,e.redirectURI,e.saveOAuthToken,e.getOAuthToken)}]}var n="/components/angularjs-foursquare";angular.module("thFoursquareService",[],["$provide",function(t){t.provider("thFoursquare",e)}]).directive("thFsqLogin",["$parse","thFoursquare",function(t,e){return{restrict:"E",template:'<form><input type="image" ng:src="'+n+'/connect-{{color}}.png" alt="connect to Foursquare"></input></form>',replace:!0,scope:{onLogin:"&thFsqOnLogin",color:"@thFsqColor",step:"@thFsqStep",display:"@thFsqDisplay"},link:function(n,i){n.thFsq=e,i.bind("submit",function(){e.login(n.step,n.display).then(function(){t(n.onLogin)})})}}}]).directive("thFsqPhoto",function(){return{restrict:"A",link:function(t,e,n){t.$watch(n.thFsqPhoto,function(t){if(void 0!==t){var i=n.thFsqPhotoSize||"original",o=t.prefix+i+t.suffix,s=n.thFsqPhotoAttr||"IMG"===e[0].nodeName?"src":"href";e.attr(s,o)}})}}})}(),define("components/angularjs-foursquare/angularjs-foursquare",function(){}),angular.module("thWebApp",[]).factory("thHistory",["$window","$rootScope",function(t,e){var n=null===t.history.state?0:t.history.state.position||0,i={position:function(){return n},replace:function(i){t.history.replaceState({data:i,position:n},""),e.$broadcast("history:current-state-changed",i,n)},push:function(i,o){t.history.pushState({data:i,position:++n},"",o),e.$broadcast("history:current-state-changed",i,n)},back:function(){t.history.back()},state:function(){return null===t.history.state?null:t.history.state.data}};return t.addEventListener("popstate",function(){e.$broadcast("history:current-state-changed",i.state(),--n)}),e.$evalAsync(function(){e.$broadcast("history:current-state-changed",i.state(),n)}),i}]).factory("thRouter",["$parse",function(t){var e=[],n={register:function(t){e.push({elem:t,match:function(t){return function(e){if(t.length!==e.length)return!1;for(var n=0;t.length>n;n++)if(":"!==t[n][0]&&t[n]!==e[n])return!1;return!0}}((t.attr("th:route")||t.attr("th-route")||t.attr("thRoute")).split("/"))})},find:function(t){var n=t.split("/"),i=null;return e.some(function(t){return t.match(n)?(i=t,!0):void 0}),i},compile:function(t,e){return void 0===t?null:t.split("/").map(function(t){return":"!==t[0]?t:encodeURIComponent(e.$eval(t.substr(1)))}).join("/")},parse:function(e,n,i){var o=n.split("/");(e||"").split("/").forEach(function(e,n){if(":"===e[0]){var s=e.substr(1),r=o[n];t(s).assign(i,decodeURIComponent(r))}})}};return n}]).factory("thScreenManager",["$rootScope","$window","thHistory","thRouter",function(t,e,n,i){function o(t){if(null!==t){var n=s(t),o=n.scope(),r=n.attr("th:screen:activate")||n.attr("th:screen-activate")||n.attr("th-screen:activate")||n.attr("th-screen-activate")||n.attr("th:screenActivate")||n.attr("th-screenActivate")||n.attr("thScreen:activate")||n.attr("thScreenActivate")||n.attr("thScreen-activate");i.parse(n.attr("th:route")||n.attr("th-route")||n.attr("thRoute"),e.location.pathname,o),null===o.$$phase&&o.$apply(),void 0!==r&&o.$eval(r)}}function s(t){var n=t.selector,i=t.model,o="string"==typeof t.selector?angular.element(e.document.querySelector(n)):n,s=o.attr("th:model")||o.attr("th-model")||o.attr("thModel");if(void 0!==r&&r.removeClass(a),void 0!==s){var l=o.scope();l[s]=i,null===l.$$phase&&l.$apply()}return o.addClass(a),r=o,o}var r,a,l;t.$on("history:current-state-changed",function(t,e){o(e)});var u={replace:function(t,e){return t[0]!==r[0]?!1:(n.replace({model:e,selector:n.state().selector}),!0)},go:function(t,e){if("$backOrHome"===t&&(t=0===n.position()?"$home":"$back"),"$back"===t)return n.back();var o="$home"===t?l:t,r={model:e,selector:o},a=s(r),u=i.compile(a.attr("th:route")||a.attr("th-route")||a.attr("thRoute"),a.scope());n.push(r,u,!0)},config:function(t,e){a=t,l=e},start:function(){null===n.state()&&t.$evalAsync(function(){var t=i.find(e.location.pathname),o={selector:null===t?l:'[route="'+(t.elem.attr("th:route")||t.elem.attr("th-route")||t.elem.attr("thRoute"))+'"]',historyPosition:currentHistoryPosition=0};n.replace(o)})}};return u}]).directive("thApp",["thScreenManager",function(t){return{controller:["$attrs",function(e){t.config(e.thScreenClass||"active",e.thFirstScreen||"#home"),t.start()}]}}]).directive("thRoute",["thRouter",function(t){return{restrict:"A",link:function(e,n){t.register(n)}}}]).directive("thModel",["thHistory","thScreenManager",function(t,e){return{restrict:"A",link:function(t,n,i){t.replaceState=function(){var o=t.$eval(i.thModel);e.replace(n,o)}}}}]).directive("thScreen",["thScreenManager",function(t){return{restrict:"A",link:function(e,n,i){n.bind("click",function(){t.go(i.thScreen,e.$eval(i.thScreenModel))}),"$back"===i.thScreen&&(n[0].disabled=!thHistory.position(),e.$on("history:current-state-changed",function(t,e,i){n[0].disabled=!i}))}}}]),define("components/angularjs-webapp/angularjs-webapp",function(){}),angular.module("thGeolocation",[]).factory("thGeolocation",["$rootScope",function(t){var e,n=0,i={},o={supported:"geolocation"in navigator,watching:!1,waiting:!1,config:function(t){i=angular.extend(i,t||{}),o.watching&&o.watchPosition()},stopWatching:function(t){navigator.geolocation.clearWatch(e),o.watching=!1,n++,t&&delete o.position,delete o.error}},s=function(s){return function(r,a){var l=angular.extend({},i),u=navigator.geolocation[s?"watchPosition":"getCurrentPosition"].bind(navigator.geolocation);if(s&&o.stopWatching(),delete o.error,void 0===o.position&&(o.waiting=!0),void 0!==l.fake){if("function"!=typeof l.fake){var c=void 0!==l.fake.coords?l.fake:{coords:l.fake,timestamp:Date.now()};l.fake=function(){return c}}var h=l.fake;h.stopped=function(t){return function(){return s&&t!==n}}(n),u=function(t,e,n){var i=h(function(e){h.stopped()||t(void 0!==e.coords?e:{coords:e,timestamp:Date.now()})},function(t){h.stopped()||e(t)},n);void 0!==i&&t(i)},delete l.fake}e=u(function(e){o.waiting=!1,o.position={coords:{},timestamp:e.timestamp};for(var n in e.coords)o.position.coords[n]=e.coords[n];r&&r(o.position),null===t.$$phase&&t.$apply()},function(e){o.position.watching=!1,o.position=void 0,o.error=e,a&&a(o.error),null===t.$$phase&&t.$apply()}),o.watching=o.watching||s}};return o.watchPosition=s(!0),o.getCurrentPosition=s(!1),o}]),define("components/angularjs-geolocation/angularjs-geolocation",function(){}),requirejs.config({shim:{"components/angular/angular":{exports:"angular"},"components/angularjs-foursquare/angularjs-foursquare":["components/angular/angular"],"components/angularjs-webapp/angularjs-webapp":["components/angular/angular"],"components/angularjs-geolocation/angularjs-geolocation":["components/angular/angular"],"components/photoswipe/release/3.0.3/lib/klass.min":{exports:"klass"},"components/photoswipe/release/3.0.3/code.photoswipe-3.0.3.min":{deps:["components/photoswipe/release/3.0.3/lib/klass.min"],exports:"Code.PhotoSwipe"}}}),require(["components/angular/angular","components/photoswipe/release/3.0.3/code.photoswipe-3.0.3.min","components/angularjs-foursquare/angularjs-foursquare","components/angularjs-webapp/angularjs-webapp","components/angularjs-geolocation/angularjs-geolocation"],function(t,e){t.module("FoursquareApp",["thFoursquareService","thWebApp","thGeolocation"],["thFoursquareProvider",function(t){var e={prod:{clientId:"R4MYVBHKVMCNR0MAB5YTWRIJ5Z2ROR3R2DWRDTC1EOQCKEEI",clientSecret:"GZ2TX5NP0VX3EV1CSACE455GKE3CYLHMIHHJKDUX0LWGJSCN",redirectURI:"http://place.texthtml.net/?authenticated"},dev:{clientId:"1BEYPWIORJCADPTGGG4P42TGWHZKERP3YTJ54L144PHJ0Q2J",clientSecret:"QQ3BOXSPS1OSYUS0NZG3MT2GHWJC1LDQFI1DXVG5M21JHP0Q",redirectURI:"http://place.webapp.192.168.1.70.xip.io/?authenticated"}}["place.texthtml.net"===location.hostname?"prod":"dev"];t.config(e)}]).directive("model",function(){return{restrict:"A",link:function(t,e,n){"file"===n.type&&(e.bind("change",function(){t.$apply(function(){t[n.model]=n.multiple?e[0].files:e[0].files[0]})}),t.$watch(n.model,function(t){""===t&&e.val("")}))}}}).directive("ngModelDelay",["$timeout",function(t){return{restrict:"A",require:"ngModel",link:function(e,n,i,o){if("radio"!==i.type&&"checkbox"!==i.type){n.unbind("input").unbind("keydown").unbind("change");var s=null;n.bind("input",function(){null!==s&&t.cancel(s),s=t(function(){s=null,o.$setViewValue(n.val())},200,!0)})}}}}]).directive("gallery",function(){return{link:function(t,n){n.bind("click",function(t){var i=n[0].querySelectorAll("li"),o=-1,s=[].map.call(i,function(e,n){if(-1===o){var i=t.target;do i=i.parentNode;while(null!==i&&i!==e);i===e&&(o=n)}return{url:e.querySelector("a").href}}),r={getImageSource:function(t){return t.url},getImageCaption:function(t){return t.caption},loop:!1,captionAndToolbarHide:!0},a=e.createInstance(s,r);-1!==o&&(a.toggleToolbar=function(){a.hide(),a.dispose()},a.show(o))})}}}).controller("FoursquareApp",["$scope","thFoursquare",function(t,e){t.fsq=e,t.canUploadPhoto=new XMLHttpRequest({mozSystem:!0,mozAnon:!0}).mozSystem,t.$watch("fsq.logged",function(n){n?t.me=e.api.users():delete t.me})}]).controller("FoursquareHome",["$scope","thFoursquare",function(t,e){t.loading=!1,t.refresh=function(){t.loading=!0,e.api.checkins.recent(function(e){t.checkins=[],[].push.apply(t.checkins,e.data),t.loading=!1})},t.$watch("fsq.logged",function(e){t.checkins=[],e&&t.refresh()}),t.$on("fsq:new-checkin",t.refresh)}]).controller("FoursquareCheckin",["$scope","$rootScope","llConfig","thFoursquare",function(t,e,n,i){t.loading=!1,t.$watch("checkin",function(){void 0===t.checkin||void 0===t.checkin.id||void 0!==t.checkin.user&&void 0!==t.checkin.comments||(t.loading=!0,i.api.checkins({checkin_id:t.checkin.id},function(e){t.checkin=e.data,t.loading=!1,t.replaceState()}))}),t.posting=!1,t.postComment=function(){void 0===t.checkin.comments&&(t.checkin.comments={count:1,items:[]});var e={text:t.new_comment,user:t.me,createdAt:Date.now()/1e3},n=t.checkin.comments.items.push(e)-1;t.posting=!0,i.api.checkins.addcomment({checkin_id:t.checkin.id,text:t.new_comment},function(e){t.posting=!1,t.new_comment="",t.checkin.comments.items[n]=e.data,t.replaceState()})},t.checkingin=!1,t.checkIn=function(){t.checkingin=!0,t.checkin.shout=t.new_shout,t.checkin.createdAt=Date.now()/1e3;var o={venueId:t.checkin.venue.id,shout:t.new_shout},s=function(){i.api.checkins.add(n(o),function(n){t.checkingin=!1,t.new_shout="",t.checkin=n.data.checkin,t.replaceState(),e.$broadcast("fsq:new-checkin",n.data)})};void 0===t.checkin.user?i.login().then(function(){t.checkin.user=i.api.users(),s()},function(){t.checkingin=!1,delete t.checkin.shout,delete t.checkin.createdAt,alert("checkin failed")}):s()},t.setFile=function(e){t.$apply(function(t){t.files=e.files})},t.uploading=!1,t.uploadPhoto=function(){t.uploading=!0;var e=new FormData;e.append("photo",t.photo),t.photo="",i.api.photos.add(n({checkinId:t.checkin.id}),e,function(e){t.uploading=!1;for(var n=0;t.checkin.photos.items.length>n;n++)if(e.data.id===t.checkin.photos.items[n].id)return;e.data.user=t.me,t.checkin.photos.count++,t.checkin.photos.items.push(e.data),t.replaceState()})}}]).controller("FoursquareSearch",["$scope","$timeout","thFoursquare","thGeolocation","llConfig",function(t,e,n,i,o){t.venues=[],t.geocode="",t.loading=!1,t.locating=!1,t.located=!1,t.position="",t.place="",t.query="",t.geolocationSupported=i.supported;var s=0;t.findMe=function(e){t.locating===!1&&t.located===!1||e?(t.locating=!0,t.located=!1,t.position="",s++,i.getCurrentPosition(function(e){return function(){t.locating&&s===e&&(t.located=!0,t.locating=!1,t.position="I know where you are!"),null===t.$$phase&&t.$apply()}}(s),function(e){return function(n){t.locating&&s===e&&(t.position=n.message),t.locating=!1,t.located=!1,t.position=""}}(s)),null===t.$$phase&&t.$apply()):(t.locating=!1,t.located=!1)},t.initSearch=function(){"true"===localStorage.geolocationEnabled&&t.findMe(!0)};var r=function(){var e=0;return function(){if(0===e||arguments[0]!==arguments[1]){var i=++e;if(t.place.length>2||t.located){t.loading=!0;var s=t.located?o({query:t.query}):{query:t.query,near:t.place};n.api.venues.search(s,function(n){e===i&&(t.loading=!1,t.venues=[],[].push.apply(t.venues,n.data.venues),t.geocode=n.data.geocode?n.data.geocode.feature:void 0)},function(){e===i&&(t.venues=[],t.geocode=!1,t.loading=!1)})}else t.loading=!1}}}();t.$watch("query",r),t.$watch("place",r),t.$watch("located",r)}]).controller("FoursquareVenue",["$scope","$timeout","thFoursquare",function(t,e,n){t.loading=!1,t.$watch("venue",function(e){void 0!==e&&void 0!==e.id&&void 0===e.photos?(t.loading=!0,n.api.venues({venueId:e.id},function(e){t.venue=e.data,t.loading=!1,t.replaceState()})):t.loading=!1},!0)}]).controller("FoursquareSettings",["$scope","thFoursquare","thGeolocation",function(t,e,n){function i(n){t.$watch("settings."+n,function(i,o){void 0!==i&&void 0!==o&&(t.loading=!0,e.api.settings.set({setting_id:n,value:i},function(){t.loading=!1}))})}t.geolocationSupported=n.supported,t.geolocationEnabled="true"===localStorage.geolocationEnabled,t.geolocationHighAccuracy="true"===localStorage.geolocationHighAccuracy,t.$watch("geolocationEnabled",function(t){localStorage.geolocationEnabled=t,t?n.watching||n.watchPosition():n.stopWatching()}),t.$watch("geolocationHighAccuracy",function(t){localStorage.geolocationHighAccuracy=t,n.config({enableHighAccuracy:t})}),t.loading=!1,t.$watch("fsq.logged",function(e){e||delete t.settings}),["sendBadgesToTwitter","sendMayorshipsToTwitter","sendBadgesToFacebook","sendMayorshipsToFacebook","receivePings","receiveCommentPings"].forEach(i),t.loadSettings=function(){e.logged&&(t.loading=!0,t.settings=e.api.settings.all(function(){t.loading=!1}),null===t.$$phase&&t.$apply())}}]).factory("llConfig",["thGeolocation",function(t){return function(e){return void 0!==t.position&&void 0!==t.position.coords&&(e.ll=t.position.coords.latitude+","+t.position.coords.longitude,e.llAcc=t.position.coords.accuracy,e.alt=t.position.coords.altitude,e.altAcc=t.position.coords.altitudeAccuracy),e}}]),t.bootstrap(document.documentElement,["FoursquareApp"])}),define("index.js",function(){});